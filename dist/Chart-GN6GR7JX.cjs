"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { newObj[key] = obj[key]; } } } newObj.default = obj; return newObj; } } function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _chunkOM3S2DITcjs = require('./chunk-OM3S2DIT.cjs');var la=_chunkOM3S2DITcjs.b.call(void 0, (xo,Rt)=>{(function(n,t){typeof xo=="object"&&typeof Rt<"u"?Rt.exports=t():typeof define=="function"&&define.amd?define(t):n.moment=t()})(xo,(function(){"use strict";var n;function t(){return n.apply(null,arguments)}function s(e){n=e}function o(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function a(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function l(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function d(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var r;for(r in e)if(l(e,r))return!1;return!0}function c(e){return e===void 0}function u(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function h(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function y(e,r){var i=[],f,m=e.length;for(f=0;f<m;++f)i.push(r(e[f],f));return i}function g(e,r){for(var i in r)l(r,i)&&(e[i]=r[i]);return l(r,"toString")&&(e.toString=r.toString),l(r,"valueOf")&&(e.valueOf=r.valueOf),e}function x(e,r,i,f){return zi(e,r,i,f,!0).utc()}function C(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function k(e){return e._pf==null&&(e._pf=C()),e._pf}var D;Array.prototype.some?D=Array.prototype.some:D=function(e){var r=Object(this),i=r.length>>>0,f;for(f=0;f<i;f++)if(f in r&&e.call(this,r[f],f,r))return!0;return!1};function $(e){var r=null,i=!1,f=e._d&&!isNaN(e._d.getTime());if(f&&(r=k(e),i=D.call(r.parsedDateParts,function(m){return m!=null}),f=r.overflow<0&&!r.empty&&!r.invalidEra&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&i),e._strict&&(f=f&&r.charsLeftOver===0&&r.unusedTokens.length===0&&r.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=f;else return f;return e._isValid}function I(e){var r=x(NaN);return e!=null?g(k(r),e):k(r).userInvalidated=!0,r}var W=t.momentProperties=[],H=!1;function B(e,r){var i,f,m,p=W.length;if(c(r._isAMomentObject)||(e._isAMomentObject=r._isAMomentObject),c(r._i)||(e._i=r._i),c(r._f)||(e._f=r._f),c(r._l)||(e._l=r._l),c(r._strict)||(e._strict=r._strict),c(r._tzm)||(e._tzm=r._tzm),c(r._isUTC)||(e._isUTC=r._isUTC),c(r._offset)||(e._offset=r._offset),c(r._pf)||(e._pf=k(r)),c(r._locale)||(e._locale=r._locale),p>0)for(i=0;i<p;i++)f=W[i],m=r[f],c(m)||(e[f]=m);return e}function U(e){B(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),H===!1&&(H=!0,t.updateOffset(this),H=!1)}function b(e){return e instanceof U||e!=null&&e._isAMomentObject!=null}function Z(e){t.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function F(e,r){var i=!0;return g(function(){if(t.deprecationHandler!=null&&t.deprecationHandler(null,e),i){var f=[],m,p,w,T=arguments.length;for(p=0;p<T;p++){if(m="",typeof arguments[p]=="object"){m+=`
[`+p+"] ";for(w in arguments[0])l(arguments[0],w)&&(m+=w+": "+arguments[0][w]+", ");m=m.slice(0,-2)}else m=arguments[p];f.push(m)}Z(e+`
Arguments: `+Array.prototype.slice.call(f).join("")+`
`+new Error().stack),i=!1}return r.apply(this,arguments)},r)}var Se={};function ne(e,r){t.deprecationHandler!=null&&t.deprecationHandler(e,r),Se[e]||(Z(r),Se[e]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function ce(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function A(e){var r,i;for(i in e)l(e,i)&&(r=e[i],ce(r)?this[i]=r:this["_"+i]=r);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function L(e,r){var i=g({},e),f;for(f in r)l(r,f)&&(a(e[f])&&a(r[f])?(i[f]={},g(i[f],e[f]),g(i[f],r[f])):r[f]!=null?i[f]=r[f]:delete i[f]);for(f in e)l(e,f)&&!l(r,f)&&a(e[f])&&(i[f]=g({},i[f]));return i}function te(e){e!=null&&this.set(e)}var re;Object.keys?re=Object.keys:re=function(e){var r,i=[];for(r in e)l(e,r)&&i.push(r);return i};var q={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Fe(e,r,i){var f=this._calendar[e]||this._calendar.sameElse;return ce(f)?f.call(r,i):f}function le(e,r,i){var f=""+Math.abs(e),m=r-f.length,p=e>=0;return(p?i?"+":"":"-")+Math.pow(10,Math.max(0,m)).toString().substr(1)+f}var we=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,De=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Cn={},Mt={};function Y(e,r,i,f){var m=f;typeof f=="string"&&(m=function(){return this[f]()}),e&&(Mt[e]=m),r&&(Mt[r[0]]=function(){return le(m.apply(this,arguments),r[1],r[2])}),i&&(Mt[i]=function(){return this.localeData().ordinal(m.apply(this,arguments),e)})}function dl(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function ml(e){var r=e.match(we),i,f;for(i=0,f=r.length;i<f;i++)Mt[r[i]]?r[i]=Mt[r[i]]:r[i]=dl(r[i]);return function(m){var p="",w;for(w=0;w<f;w++)p+=ce(r[w])?r[w].call(m,e):r[w];return p}}function Sr(e,r){return e.isValid()?(r=gi(r,e.localeData()),Cn[r]=Cn[r]||ml(r),Cn[r](e)):e.localeData().invalidDate()}function gi(e,r){var i=5;function f(m){return r.longDateFormat(m)||m}for(De.lastIndex=0;i>=0&&De.test(e);)e=e.replace(De,f),De.lastIndex=0,i-=1;return e}var hl={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function pl(e){var r=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return r||!i?r:(this._longDateFormat[e]=i.match(we).map(function(f){return f==="MMMM"||f==="MM"||f==="DD"||f==="dddd"?f.slice(1):f}).join(""),this._longDateFormat[e])}var gl="Invalid date";function yl(){return this._invalidDate}var xl="%d",wl=/\d{1,2}/;function vl(e){return this._ordinal.replace("%d",e)}var kl={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Cl(e,r,i,f){var m=this._relativeTime[i];return ce(m)?m(e,r,i,f):m.replace(/%d/i,e)}function Sl(e,r){var i=this._relativeTime[e>0?"future":"past"];return ce(i)?i(r):i.replace(/%s/i,r)}var yi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function $e(e){return typeof e=="string"?yi[e]||yi[e.toLowerCase()]:void 0}function Sn(e){var r={},i,f;for(f in e)l(e,f)&&(i=$e(f),i&&(r[i]=e[f]));return r}var bl={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Ml(e){var r=[],i;for(i in e)l(e,i)&&r.push({unit:i,priority:bl[i]});return r.sort(function(f,m){return f.priority-m.priority}),r}var xi=/\d/,be=/\d\d/,wi=/\d{3}/,bn=/\d{4}/,br=/[+-]?\d{6}/,K=/\d\d?/,vi=/\d\d\d\d?/,ki=/\d\d\d\d\d\d?/,Mr=/\d{1,3}/,Mn=/\d{1,4}/,Dr=/[+-]?\d{1,6}/,Dt=/\d+/,$r=/[+-]?\d+/,Dl=/Z|[+-]\d\d:?\d\d/gi,_r=/Z|[+-]\d\d(?::?\d\d)?/gi,$l=/[+-]?\d+(\.\d{1,3})?/,jt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,$t=/^[1-9]\d?/,Dn=/^([1-9]\d|\d)/,Tr;Tr={};function O(e,r,i){Tr[e]=ce(r)?r:function(f,m){return f&&i?i:r}}function _l(e,r){return l(Tr,e)?Tr[e](r._strict,r._locale):new RegExp(Tl(e))}function Tl(e){return Be(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(r,i,f,m,p){return i||f||m||p}))}function Be(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _e(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function z(e){var r=+e,i=0;return r!==0&&isFinite(r)&&(i=_e(r)),i}var $n={};function G(e,r){var i,f=r,m;for(typeof e=="string"&&(e=[e]),u(r)&&(f=function(p,w){w[r]=z(p)}),m=e.length,i=0;i<m;i++)$n[e[i]]=f}function Gt(e,r){G(e,function(i,f,m,p){m._w=m._w||{},r(i,m._w,m,p)})}function Ol(e,r,i){r!=null&&l($n,e)&&$n[e](r,i._a,i,e)}function Or(e){return e%4===0&&e%100!==0||e%400===0}var me=0,Ve=1,Pe=2,ue=3,Ye=4,Ue=5,ht=6,Al=7,Ll=8;Y("Y",0,0,function(){var e=this.year();return e<=9999?le(e,4):"+"+e}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),O("Y",$r),O("YY",K,be),O("YYYY",Mn,bn),O("YYYYY",Dr,br),O("YYYYYY",Dr,br),G(["YYYYY","YYYYYY"],me),G("YYYY",function(e,r){r[me]=e.length===2?t.parseTwoDigitYear(e):z(e)}),G("YY",function(e,r){r[me]=t.parseTwoDigitYear(e)}),G("Y",function(e,r){r[me]=parseInt(e,10)});function Xt(e){return Or(e)?366:365}t.parseTwoDigitYear=function(e){return z(e)+(z(e)>68?1900:2e3)};var Ci=_t("FullYear",!0);function Yl(){return Or(this.year())}function _t(e,r){return function(i){return i!=null?(Si(this,e,i),t.updateOffset(this,r),this):Zt(this,e)}}function Zt(e,r){if(!e.isValid())return NaN;var i=e._d,f=e._isUTC;switch(r){case"Milliseconds":return f?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return f?i.getUTCSeconds():i.getSeconds();case"Minutes":return f?i.getUTCMinutes():i.getMinutes();case"Hours":return f?i.getUTCHours():i.getHours();case"Date":return f?i.getUTCDate():i.getDate();case"Day":return f?i.getUTCDay():i.getDay();case"Month":return f?i.getUTCMonth():i.getMonth();case"FullYear":return f?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Si(e,r,i){var f,m,p,w,T;if(!(!e.isValid()||isNaN(i))){switch(f=e._d,m=e._isUTC,r){case"Milliseconds":return void(m?f.setUTCMilliseconds(i):f.setMilliseconds(i));case"Seconds":return void(m?f.setUTCSeconds(i):f.setSeconds(i));case"Minutes":return void(m?f.setUTCMinutes(i):f.setMinutes(i));case"Hours":return void(m?f.setUTCHours(i):f.setHours(i));case"Date":return void(m?f.setUTCDate(i):f.setDate(i));case"FullYear":break;default:return}p=i,w=e.month(),T=e.date(),T=T===29&&w===1&&!Or(p)?28:T,m?f.setUTCFullYear(p,w,T):f.setFullYear(p,w,T)}}function El(e){return e=$e(e),ce(this[e])?this[e]():this}function Wl(e,r){if(typeof e=="object"){e=Sn(e);var i=Ml(e),f,m=i.length;for(f=0;f<m;f++)this[i[f].unit](e[i[f].unit])}else if(e=$e(e),ce(this[e]))return this[e](r);return this}function Il(e,r){return(e%r+r)%r}var oe;Array.prototype.indexOf?oe=Array.prototype.indexOf:oe=function(e){var r;for(r=0;r<this.length;++r)if(this[r]===e)return r;return-1};function _n(e,r){if(isNaN(e)||isNaN(r))return NaN;var i=Il(r,12);return e+=(r-i)/12,i===1?Or(e)?29:28:31-i%7%2}Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),Y("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("M",K,$t),O("MM",K,be),O("MMM",function(e,r){return r.monthsShortRegex(e)}),O("MMMM",function(e,r){return r.monthsRegex(e)}),G(["M","MM"],function(e,r){r[Ve]=z(e)-1}),G(["MMM","MMMM"],function(e,r,i,f){var m=i._locale.monthsParse(e,f,i._strict);m!=null?r[Ve]=m:k(i).invalidMonth=e});var Pl="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),bi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Mi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,zl=jt,Rl=jt;function Hl(e,r){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Mi).test(r)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone}function Nl(e,r){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Mi.test(r)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Fl(e,r,i){var f,m,p,w=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],f=0;f<12;++f)p=x([2e3,f]),this._shortMonthsParse[f]=this.monthsShort(p,"").toLocaleLowerCase(),this._longMonthsParse[f]=this.months(p,"").toLocaleLowerCase();return i?r==="MMM"?(m=oe.call(this._shortMonthsParse,w),m!==-1?m:null):(m=oe.call(this._longMonthsParse,w),m!==-1?m:null):r==="MMM"?(m=oe.call(this._shortMonthsParse,w),m!==-1?m:(m=oe.call(this._longMonthsParse,w),m!==-1?m:null)):(m=oe.call(this._longMonthsParse,w),m!==-1?m:(m=oe.call(this._shortMonthsParse,w),m!==-1?m:null))}function Bl(e,r,i){var f,m,p;if(this._monthsParseExact)return Fl.call(this,e,r,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),f=0;f<12;f++){if(m=x([2e3,f]),i&&!this._longMonthsParse[f]&&(this._longMonthsParse[f]=new RegExp("^"+this.months(m,"").replace(".","")+"$","i"),this._shortMonthsParse[f]=new RegExp("^"+this.monthsShort(m,"").replace(".","")+"$","i")),!i&&!this._monthsParse[f]&&(p="^"+this.months(m,"")+"|^"+this.monthsShort(m,""),this._monthsParse[f]=new RegExp(p.replace(".",""),"i")),i&&r==="MMMM"&&this._longMonthsParse[f].test(e))return f;if(i&&r==="MMM"&&this._shortMonthsParse[f].test(e))return f;if(!i&&this._monthsParse[f].test(e))return f}}function Di(e,r){if(!e.isValid())return e;if(typeof r=="string"){if(/^\d+$/.test(r))r=z(r);else if(r=e.localeData().monthsParse(r),!u(r))return e}var i=r,f=e.date();return f=f<29?f:Math.min(f,_n(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,f):e._d.setMonth(i,f),e}function $i(e){return e!=null?(Di(this,e),t.updateOffset(this,!0),this):Zt(this,"Month")}function Vl(){return _n(this.year(),this.month())}function Ul(e){return this._monthsParseExact?(l(this,"_monthsRegex")||_i.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=zl),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function jl(e){return this._monthsParseExact?(l(this,"_monthsRegex")||_i.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Rl),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _i(){function e(E,R){return R.length-E.length}var r=[],i=[],f=[],m,p,w,T;for(m=0;m<12;m++)p=x([2e3,m]),w=Be(this.monthsShort(p,"")),T=Be(this.months(p,"")),r.push(w),i.push(T),f.push(T),f.push(w);r.sort(e),i.sort(e),f.sort(e),this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Gl(e,r,i,f,m,p,w){var T;return e<100&&e>=0?(T=new Date(e+400,r,i,f,m,p,w),isFinite(T.getFullYear())&&T.setFullYear(e)):T=new Date(e,r,i,f,m,p,w),T}function qt(e){var r,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,r=new Date(Date.UTC.apply(null,i)),isFinite(r.getUTCFullYear())&&r.setUTCFullYear(e)):r=new Date(Date.UTC.apply(null,arguments)),r}function Ar(e,r,i){var f=7+r-i,m=(7+qt(e,0,f).getUTCDay()-r)%7;return-m+f-1}function Ti(e,r,i,f,m){var p=(7+i-f)%7,w=Ar(e,f,m),T=1+7*(r-1)+p+w,E,R;return T<=0?(E=e-1,R=Xt(E)+T):T>Xt(e)?(E=e+1,R=T-Xt(e)):(E=e,R=T),{year:E,dayOfYear:R}}function Kt(e,r,i){var f=Ar(e.year(),r,i),m=Math.floor((e.dayOfYear()-f-1)/7)+1,p,w;return m<1?(w=e.year()-1,p=m+je(w,r,i)):m>je(e.year(),r,i)?(p=m-je(e.year(),r,i),w=e.year()+1):(w=e.year(),p=m),{week:p,year:w}}function je(e,r,i){var f=Ar(e,r,i),m=Ar(e+1,r,i);return(Xt(e)-f+m)/7}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),O("w",K,$t),O("ww",K,be),O("W",K,$t),O("WW",K,be),Gt(["w","ww","W","WW"],function(e,r,i,f){r[f.substr(0,1)]=z(e)});function Xl(e){return Kt(e,this._week.dow,this._week.doy).week}var Zl={dow:0,doy:6};function ql(){return this._week.dow}function Kl(){return this._week.doy}function Jl(e){var r=this.localeData().week(this);return e==null?r:this.add((e-r)*7,"d")}function Ql(e){var r=Kt(this,1,4).week;return e==null?r:this.add((e-r)*7,"d")}Y("d",0,"do","day"),Y("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),Y("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),Y("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),O("d",K),O("e",K),O("E",K),O("dd",function(e,r){return r.weekdaysMinRegex(e)}),O("ddd",function(e,r){return r.weekdaysShortRegex(e)}),O("dddd",function(e,r){return r.weekdaysRegex(e)}),Gt(["dd","ddd","dddd"],function(e,r,i,f){var m=i._locale.weekdaysParse(e,f,i._strict);m!=null?r.d=m:k(i).invalidWeekday=e}),Gt(["d","e","E"],function(e,r,i,f){r[f]=z(e)});function ef(e,r){return typeof e!="string"?e:isNaN(e)?(e=r.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function tf(e,r){return typeof e=="string"?r.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Tn(e,r){return e.slice(r,7).concat(e.slice(0,r))}var rf="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Oi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),nf="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),of=jt,sf=jt,af=jt;function lf(e,r){var i=o(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(r)?"format":"standalone"];return e===!0?Tn(i,this._week.dow):e?i[e.day()]:i}function ff(e){return e===!0?Tn(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function cf(e){return e===!0?Tn(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function uf(e,r,i){var f,m,p,w=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],f=0;f<7;++f)p=x([2e3,1]).day(f),this._minWeekdaysParse[f]=this.weekdaysMin(p,"").toLocaleLowerCase(),this._shortWeekdaysParse[f]=this.weekdaysShort(p,"").toLocaleLowerCase(),this._weekdaysParse[f]=this.weekdays(p,"").toLocaleLowerCase();return i?r==="dddd"?(m=oe.call(this._weekdaysParse,w),m!==-1?m:null):r==="ddd"?(m=oe.call(this._shortWeekdaysParse,w),m!==-1?m:null):(m=oe.call(this._minWeekdaysParse,w),m!==-1?m:null):r==="dddd"?(m=oe.call(this._weekdaysParse,w),m!==-1||(m=oe.call(this._shortWeekdaysParse,w),m!==-1)?m:(m=oe.call(this._minWeekdaysParse,w),m!==-1?m:null)):r==="ddd"?(m=oe.call(this._shortWeekdaysParse,w),m!==-1||(m=oe.call(this._weekdaysParse,w),m!==-1)?m:(m=oe.call(this._minWeekdaysParse,w),m!==-1?m:null)):(m=oe.call(this._minWeekdaysParse,w),m!==-1||(m=oe.call(this._weekdaysParse,w),m!==-1)?m:(m=oe.call(this._shortWeekdaysParse,w),m!==-1?m:null))}function df(e,r,i){var f,m,p;if(this._weekdaysParseExact)return uf.call(this,e,r,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),f=0;f<7;f++){if(m=x([2e3,1]).day(f),i&&!this._fullWeekdaysParse[f]&&(this._fullWeekdaysParse[f]=new RegExp("^"+this.weekdays(m,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[f]=new RegExp("^"+this.weekdaysShort(m,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[f]=new RegExp("^"+this.weekdaysMin(m,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[f]||(p="^"+this.weekdays(m,"")+"|^"+this.weekdaysShort(m,"")+"|^"+this.weekdaysMin(m,""),this._weekdaysParse[f]=new RegExp(p.replace(".",""),"i")),i&&r==="dddd"&&this._fullWeekdaysParse[f].test(e))return f;if(i&&r==="ddd"&&this._shortWeekdaysParse[f].test(e))return f;if(i&&r==="dd"&&this._minWeekdaysParse[f].test(e))return f;if(!i&&this._weekdaysParse[f].test(e))return f}}function mf(e){if(!this.isValid())return e!=null?this:NaN;var r=Zt(this,"Day");return e!=null?(e=ef(e,this.localeData()),this.add(e-r,"d")):r}function hf(e){if(!this.isValid())return e!=null?this:NaN;var r=(this.day()+7-this.localeData()._week.dow)%7;return e==null?r:this.add(e-r,"d")}function pf(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var r=tf(e,this.localeData());return this.day(this.day()%7?r:r-7)}else return this.day()||7}function gf(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||On.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=of),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function yf(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||On.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=sf),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function xf(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||On.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=af),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function On(){function e(pe,Ke){return Ke.length-pe.length}var r=[],i=[],f=[],m=[],p,w,T,E,R;for(p=0;p<7;p++)w=x([2e3,1]).day(p),T=Be(this.weekdaysMin(w,"")),E=Be(this.weekdaysShort(w,"")),R=Be(this.weekdays(w,"")),r.push(T),i.push(E),f.push(R),m.push(T),m.push(E),m.push(R);r.sort(e),i.sort(e),f.sort(e),m.sort(e),this._weekdaysRegex=new RegExp("^("+m.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+f.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function An(){return this.hours()%12||12}function wf(){return this.hours()||24}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,An),Y("k",["kk",2],0,wf),Y("hmm",0,0,function(){return""+An.apply(this)+le(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+An.apply(this)+le(this.minutes(),2)+le(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+le(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+le(this.minutes(),2)+le(this.seconds(),2)});function Ai(e,r){Y(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),r)})}Ai("a",!0),Ai("A",!1);function Li(e,r){return r._meridiemParse}O("a",Li),O("A",Li),O("H",K,Dn),O("h",K,$t),O("k",K,$t),O("HH",K,be),O("hh",K,be),O("kk",K,be),O("hmm",vi),O("hmmss",ki),O("Hmm",vi),O("Hmmss",ki),G(["H","HH"],ue),G(["k","kk"],function(e,r,i){var f=z(e);r[ue]=f===24?0:f}),G(["a","A"],function(e,r,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),G(["h","hh"],function(e,r,i){r[ue]=z(e),k(i).bigHour=!0}),G("hmm",function(e,r,i){var f=e.length-2;r[ue]=z(e.substr(0,f)),r[Ye]=z(e.substr(f)),k(i).bigHour=!0}),G("hmmss",function(e,r,i){var f=e.length-4,m=e.length-2;r[ue]=z(e.substr(0,f)),r[Ye]=z(e.substr(f,2)),r[Ue]=z(e.substr(m)),k(i).bigHour=!0}),G("Hmm",function(e,r,i){var f=e.length-2;r[ue]=z(e.substr(0,f)),r[Ye]=z(e.substr(f))}),G("Hmmss",function(e,r,i){var f=e.length-4,m=e.length-2;r[ue]=z(e.substr(0,f)),r[Ye]=z(e.substr(f,2)),r[Ue]=z(e.substr(m))});function vf(e){return(e+"").toLowerCase().charAt(0)==="p"}var kf=/[ap]\.?m?\.?/i,Cf=_t("Hours",!0);function Sf(e,r,i){return e>11?i?"pm":"PM":i?"am":"AM"}var Yi={calendar:q,longDateFormat:hl,invalidDate:gl,ordinal:xl,dayOfMonthOrdinalParse:wl,relativeTime:kl,months:Pl,monthsShort:bi,week:Zl,weekdays:rf,weekdaysMin:nf,weekdaysShort:Oi,meridiemParse:kf},Q={},Jt={},Qt;function bf(e,r){var i,f=Math.min(e.length,r.length);for(i=0;i<f;i+=1)if(e[i]!==r[i])return i;return f}function Ei(e){return e&&e.toLowerCase().replace("_","-")}function Mf(e){for(var r=0,i,f,m,p;r<e.length;){for(p=Ei(e[r]).split("-"),i=p.length,f=Ei(e[r+1]),f=f?f.split("-"):null;i>0;){if(m=Lr(p.slice(0,i).join("-")),m)return m;if(f&&f.length>=i&&bf(p,f)>=i-1)break;i--}r++}return Qt}function Df(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Lr(e){var r=null,i;if(Q[e]===void 0&&typeof Rt<"u"&&Rt&&Rt.exports&&Df(e))try{r=Qt._abbr,i=_chunkOM3S2DITcjs.a,i("./locale/"+e),it(r)}catch (e2){Q[e]=null}return Q[e]}function it(e,r){var i;return e&&(c(r)?i=Ge(e):i=Ln(e,r),i?Qt=i:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Qt._abbr}function Ln(e,r){if(r!==null){var i,f=Yi;if(r.abbr=e,Q[e]!=null)ne("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),f=Q[e]._config;else if(r.parentLocale!=null)if(Q[r.parentLocale]!=null)f=Q[r.parentLocale]._config;else if(i=Lr(r.parentLocale),i!=null)f=i._config;else return Jt[r.parentLocale]||(Jt[r.parentLocale]=[]),Jt[r.parentLocale].push({name:e,config:r}),null;return Q[e]=new te(L(f,r)),Jt[e]&&Jt[e].forEach(function(m){Ln(m.name,m.config)}),it(e),Q[e]}else return delete Q[e],null}function $f(e,r){if(r!=null){var i,f,m=Yi;Q[e]!=null&&Q[e].parentLocale!=null?Q[e].set(L(Q[e]._config,r)):(f=Lr(e),f!=null&&(m=f._config),r=L(m,r),f==null&&(r.abbr=e),i=new te(r),i.parentLocale=Q[e],Q[e]=i),it(e)}else Q[e]!=null&&(Q[e].parentLocale!=null?(Q[e]=Q[e].parentLocale,e===it()&&it(e)):Q[e]!=null&&delete Q[e]);return Q[e]}function Ge(e){var r;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Qt;if(!o(e)){if(r=Lr(e),r)return r;e=[e]}return Mf(e)}function _f(){return re(Q)}function Yn(e){var r,i=e._a;return i&&k(e).overflow===-2&&(r=i[Ve]<0||i[Ve]>11?Ve:i[Pe]<1||i[Pe]>_n(i[me],i[Ve])?Pe:i[ue]<0||i[ue]>24||i[ue]===24&&(i[Ye]!==0||i[Ue]!==0||i[ht]!==0)?ue:i[Ye]<0||i[Ye]>59?Ye:i[Ue]<0||i[Ue]>59?Ue:i[ht]<0||i[ht]>999?ht:-1,k(e)._overflowDayOfYear&&(r<me||r>Pe)&&(r=Pe),k(e)._overflowWeeks&&r===-1&&(r=Al),k(e)._overflowWeekday&&r===-1&&(r=Ll),k(e).overflow=r),e}var Tf=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Of=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Af=/Z|[+-]\d\d(?::?\d\d)?/,Yr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],En=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Lf=/^\/?Date\((-?\d+)/i,Yf=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ef={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Wi(e){var r,i,f=e._i,m=Tf.exec(f)||Of.exec(f),p,w,T,E,R=Yr.length,pe=En.length;if(m){for(k(e).iso=!0,r=0,i=R;r<i;r++)if(Yr[r][1].exec(m[1])){w=Yr[r][0],p=Yr[r][2]!==!1;break}if(w==null){e._isValid=!1;return}if(m[3]){for(r=0,i=pe;r<i;r++)if(En[r][1].exec(m[3])){T=(m[2]||" ")+En[r][0];break}if(T==null){e._isValid=!1;return}}if(!p&&T!=null){e._isValid=!1;return}if(m[4])if(Af.exec(m[4]))E="Z";else{e._isValid=!1;return}e._f=w+(T||"")+(E||""),In(e)}else e._isValid=!1}function Wf(e,r,i,f,m,p){var w=[If(e),bi.indexOf(r),parseInt(i,10),parseInt(f,10),parseInt(m,10)];return p&&w.push(parseInt(p,10)),w}function If(e){var r=parseInt(e,10);return r<=49?2e3+r:r<=999?1900+r:r}function Pf(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function zf(e,r,i){if(e){var f=Oi.indexOf(e),m=new Date(r[0],r[1],r[2]).getDay();if(f!==m)return k(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function Rf(e,r,i){if(e)return Ef[e];if(r)return 0;var f=parseInt(i,10),m=f%100,p=(f-m)/100;return p*60+m}function Ii(e){var r=Yf.exec(Pf(e._i)),i;if(r){if(i=Wf(r[4],r[3],r[2],r[5],r[6],r[7]),!zf(r[1],i,e))return;e._a=i,e._tzm=Rf(r[8],r[9],r[10]),e._d=qt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),k(e).rfc2822=!0}else e._isValid=!1}function Hf(e){var r=Lf.exec(e._i);if(r!==null){e._d=new Date(+r[1]);return}if(Wi(e),e._isValid===!1)delete e._isValid;else return;if(Ii(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:t.createFromInputFallback(e)}t.createFromInputFallback=F("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Tt(e,r,i){return _nullishCoalesce(_nullishCoalesce(e, () => (r)), () => (i))}function Nf(e){var r=new Date(t.now());return e._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()]}function Wn(e){var r,i,f=[],m,p,w;if(!e._d){for(m=Nf(e),e._w&&e._a[Pe]==null&&e._a[Ve]==null&&Ff(e),e._dayOfYear!=null&&(w=Tt(e._a[me],m[me]),(e._dayOfYear>Xt(w)||e._dayOfYear===0)&&(k(e)._overflowDayOfYear=!0),i=qt(w,0,e._dayOfYear),e._a[Ve]=i.getUTCMonth(),e._a[Pe]=i.getUTCDate()),r=0;r<3&&e._a[r]==null;++r)e._a[r]=f[r]=m[r];for(;r<7;r++)e._a[r]=f[r]=e._a[r]==null?r===2?1:0:e._a[r];e._a[ue]===24&&e._a[Ye]===0&&e._a[Ue]===0&&e._a[ht]===0&&(e._nextDay=!0,e._a[ue]=0),e._d=(e._useUTC?qt:Gl).apply(null,f),p=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ue]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==p&&(k(e).weekdayMismatch=!0)}}function Ff(e){var r,i,f,m,p,w,T,E,R;r=e._w,r.GG!=null||r.W!=null||r.E!=null?(p=1,w=4,i=Tt(r.GG,e._a[me],Kt(J(),1,4).year),f=Tt(r.W,1),m=Tt(r.E,1),(m<1||m>7)&&(E=!0)):(p=e._locale._week.dow,w=e._locale._week.doy,R=Kt(J(),p,w),i=Tt(r.gg,e._a[me],R.year),f=Tt(r.w,R.week),r.d!=null?(m=r.d,(m<0||m>6)&&(E=!0)):r.e!=null?(m=r.e+p,(r.e<0||r.e>6)&&(E=!0)):m=p),f<1||f>je(i,p,w)?k(e)._overflowWeeks=!0:E!=null?k(e)._overflowWeekday=!0:(T=Ti(i,f,m,p,w),e._a[me]=T.year,e._dayOfYear=T.dayOfYear)}t.ISO_8601=function(){},t.RFC_2822=function(){};function In(e){if(e._f===t.ISO_8601){Wi(e);return}if(e._f===t.RFC_2822){Ii(e);return}e._a=[],k(e).empty=!0;var r=""+e._i,i,f,m,p,w,T=r.length,E=0,R,pe;for(m=gi(e._f,e._locale).match(we)||[],pe=m.length,i=0;i<pe;i++)p=m[i],f=(r.match(_l(p,e))||[])[0],f&&(w=r.substr(0,r.indexOf(f)),w.length>0&&k(e).unusedInput.push(w),r=r.slice(r.indexOf(f)+f.length),E+=f.length),Mt[p]?(f?k(e).empty=!1:k(e).unusedTokens.push(p),Ol(p,f,e)):e._strict&&!f&&k(e).unusedTokens.push(p);k(e).charsLeftOver=T-E,r.length>0&&k(e).unusedInput.push(r),e._a[ue]<=12&&k(e).bigHour===!0&&e._a[ue]>0&&(k(e).bigHour=void 0),k(e).parsedDateParts=e._a.slice(0),k(e).meridiem=e._meridiem,e._a[ue]=Bf(e._locale,e._a[ue],e._meridiem),R=k(e).era,R!==null&&(e._a[me]=e._locale.erasConvertYear(R,e._a[me])),Wn(e),Yn(e)}function Bf(e,r,i){var f;return i==null?r:e.meridiemHour!=null?e.meridiemHour(r,i):(e.isPM!=null&&(f=e.isPM(i),f&&r<12&&(r+=12),!f&&r===12&&(r=0)),r)}function Vf(e){var r,i,f,m,p,w,T=!1,E=e._f.length;if(E===0){k(e).invalidFormat=!0,e._d=new Date(NaN);return}for(m=0;m<E;m++)p=0,w=!1,r=B({},e),e._useUTC!=null&&(r._useUTC=e._useUTC),r._f=e._f[m],In(r),$(r)&&(w=!0),p+=k(r).charsLeftOver,p+=k(r).unusedTokens.length*10,k(r).score=p,T?p<f&&(f=p,i=r):(f==null||p<f||w)&&(f=p,i=r,w&&(T=!0));g(e,i||r)}function Uf(e){if(!e._d){var r=Sn(e._i),i=r.day===void 0?r.date:r.day;e._a=y([r.year,r.month,i,r.hour,r.minute,r.second,r.millisecond],function(f){return f&&parseInt(f,10)}),Wn(e)}}function jf(e){var r=new U(Yn(Pi(e)));return r._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Pi(e){var r=e._i,i=e._f;return e._locale=e._locale||Ge(e._l),r===null||i===void 0&&r===""?I({nullInput:!0}):(typeof r=="string"&&(e._i=r=e._locale.preparse(r)),b(r)?new U(Yn(r)):(h(r)?e._d=r:o(i)?Vf(e):i?In(e):Gf(e),$(e)||(e._d=null),e))}function Gf(e){var r=e._i;c(r)?e._d=new Date(t.now()):h(r)?e._d=new Date(r.valueOf()):typeof r=="string"?Hf(e):o(r)?(e._a=y(r.slice(0),function(i){return parseInt(i,10)}),Wn(e)):a(r)?Uf(e):u(r)?e._d=new Date(r):t.createFromInputFallback(e)}function zi(e,r,i,f,m){var p={};return(r===!0||r===!1)&&(f=r,r=void 0),(i===!0||i===!1)&&(f=i,i=void 0),(a(e)&&d(e)||o(e)&&e.length===0)&&(e=void 0),p._isAMomentObject=!0,p._useUTC=p._isUTC=m,p._l=i,p._i=e,p._f=r,p._strict=f,jf(p)}function J(e,r,i,f){return zi(e,r,i,f,!1)}var Xf=F("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=J.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:I()}),Zf=F("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=J.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:I()});function Ri(e,r){var i,f;if(r.length===1&&o(r[0])&&(r=r[0]),!r.length)return J();for(i=r[0],f=1;f<r.length;++f)(!r[f].isValid()||r[f][e](i))&&(i=r[f]);return i}function qf(){var e=[].slice.call(arguments,0);return Ri("isBefore",e)}function Kf(){var e=[].slice.call(arguments,0);return Ri("isAfter",e)}var Jf=function(){return Date.now?Date.now():+new Date},er=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Qf(e){var r,i=!1,f,m=er.length;for(r in e)if(l(e,r)&&!(oe.call(er,r)!==-1&&(e[r]==null||!isNaN(e[r]))))return!1;for(f=0;f<m;++f)if(e[er[f]]){if(i)return!1;parseFloat(e[er[f]])!==z(e[er[f]])&&(i=!0)}return!0}function ec(){return this._isValid}function tc(){return Ee(NaN)}function Er(e){var r=Sn(e),i=r.year||0,f=r.quarter||0,m=r.month||0,p=r.week||r.isoWeek||0,w=r.day||0,T=r.hour||0,E=r.minute||0,R=r.second||0,pe=r.millisecond||0;this._isValid=Qf(r),this._milliseconds=+pe+R*1e3+E*6e4+T*1e3*60*60,this._days=+w+p*7,this._months=+m+f*3+i*12,this._data={},this._locale=Ge(),this._bubble()}function Wr(e){return e instanceof Er}function Pn(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function rc(e,r,i){var f=Math.min(e.length,r.length),m=Math.abs(e.length-r.length),p=0,w;for(w=0;w<f;w++)(i&&e[w]!==r[w]||!i&&z(e[w])!==z(r[w]))&&p++;return p+m}function Hi(e,r){Y(e,0,0,function(){var i=this.utcOffset(),f="+";return i<0&&(i=-i,f="-"),f+le(~~(i/60),2)+r+le(~~i%60,2)})}Hi("Z",":"),Hi("ZZ",""),O("Z",_r),O("ZZ",_r),G(["Z","ZZ"],function(e,r,i){i._useUTC=!0,i._tzm=zn(_r,e)});var nc=/([\+\-]|\d\d)/gi;function zn(e,r){var i=(r||"").match(e),f,m,p;return i===null?null:(f=i[i.length-1]||[],m=(f+"").match(nc)||["-",0,0],p=+(m[1]*60)+z(m[2]),p===0?0:m[0]==="+"?p:-p)}function Rn(e,r){var i,f;return r._isUTC?(i=r.clone(),f=(b(e)||h(e)?e.valueOf():J(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+f),t.updateOffset(i,!1),i):J(e).local()}function Hn(e){return-Math.round(e._d.getTimezoneOffset())}t.updateOffset=function(){};function oc(e,r,i){var f=this._offset||0,m;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=zn(_r,e),e===null)return this}else Math.abs(e)<16&&!i&&(e=e*60);return!this._isUTC&&r&&(m=Hn(this)),this._offset=e,this._isUTC=!0,m!=null&&this.add(m,"m"),f!==e&&(!r||this._changeInProgress?Vi(this,Ee(e-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?f:Hn(this)}function ic(e,r){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,r),this):-this.utcOffset()}function sc(e){return this.utcOffset(0,e)}function ac(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Hn(this),"m")),this}function lc(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=zn(Dl,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function fc(e){return this.isValid()?(e=e?J(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function cc(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function uc(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e={},r;return B(e,this),e=Pi(e),e._a?(r=e._isUTC?x(e._a):J(e._a),this._isDSTShifted=this.isValid()&&rc(e._a,r.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function dc(){return this.isValid()?!this._isUTC:!1}function mc(){return this.isValid()?this._isUTC:!1}function Ni(){return this.isValid()?this._isUTC&&this._offset===0:!1}var hc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,pc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ee(e,r){var i=e,f=null,m,p,w;return Wr(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(i={},r?i[r]=+e:i.milliseconds=+e):(f=hc.exec(e))?(m=f[1]==="-"?-1:1,i={y:0,d:z(f[Pe])*m,h:z(f[ue])*m,m:z(f[Ye])*m,s:z(f[Ue])*m,ms:z(Pn(f[ht]*1e3))*m}):(f=pc.exec(e))?(m=f[1]==="-"?-1:1,i={y:pt(f[2],m),M:pt(f[3],m),w:pt(f[4],m),d:pt(f[5],m),h:pt(f[6],m),m:pt(f[7],m),s:pt(f[8],m)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(w=gc(J(i.from),J(i.to)),i={},i.ms=w.milliseconds,i.M=w.months),p=new Er(i),Wr(e)&&l(e,"_locale")&&(p._locale=e._locale),Wr(e)&&l(e,"_isValid")&&(p._isValid=e._isValid),p}Ee.fn=Er.prototype,Ee.invalid=tc;function pt(e,r){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*r}function Fi(e,r){var i={};return i.months=r.month()-e.month()+(r.year()-e.year())*12,e.clone().add(i.months,"M").isAfter(r)&&--i.months,i.milliseconds=+r-+e.clone().add(i.months,"M"),i}function gc(e,r){var i;return e.isValid()&&r.isValid()?(r=Rn(r,e),e.isBefore(r)?i=Fi(e,r):(i=Fi(r,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Bi(e,r){return function(i,f){var m,p;return f!==null&&!isNaN(+f)&&(ne(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),p=i,i=f,f=p),m=Ee(i,f),Vi(this,m,e),this}}function Vi(e,r,i,f){var m=r._milliseconds,p=Pn(r._days),w=Pn(r._months);e.isValid()&&(f=_nullishCoalesce(f, () => (!0)),w&&Di(e,Zt(e,"Month")+w*i),p&&Si(e,"Date",Zt(e,"Date")+p*i),m&&e._d.setTime(e._d.valueOf()+m*i),f&&t.updateOffset(e,p||w))}var yc=Bi(1,"add"),xc=Bi(-1,"subtract");function Ui(e){return typeof e=="string"||e instanceof String}function wc(e){return b(e)||h(e)||Ui(e)||u(e)||kc(e)||vc(e)||e===null||e===void 0}function vc(e){var r=a(e)&&!d(e),i=!1,f=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],m,p,w=f.length;for(m=0;m<w;m+=1)p=f[m],i=i||l(e,p);return r&&i}function kc(e){var r=o(e),i=!1;return r&&(i=e.filter(function(f){return!u(f)&&Ui(e)}).length===0),r&&i}function Cc(e){var r=a(e)&&!d(e),i=!1,f=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],m,p;for(m=0;m<f.length;m+=1)p=f[m],i=i||l(e,p);return r&&i}function Sc(e,r){var i=e.diff(r,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function bc(e,r){arguments.length===1&&(arguments[0]?wc(arguments[0])?(e=arguments[0],r=void 0):Cc(arguments[0])&&(r=arguments[0],e=void 0):(e=void 0,r=void 0));var i=e||J(),f=Rn(i,this).startOf("day"),m=t.calendarFormat(this,f)||"sameElse",p=r&&(ce(r[m])?r[m].call(this,i):r[m]);return this.format(p||this.localeData().calendar(m,this,J(i)))}function Mc(){return new U(this)}function Dc(e,r){var i=b(e)?e:J(e);return this.isValid()&&i.isValid()?(r=$e(r)||"millisecond",r==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(r).valueOf()):!1}function $c(e,r){var i=b(e)?e:J(e);return this.isValid()&&i.isValid()?(r=$e(r)||"millisecond",r==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(r).valueOf()<i.valueOf()):!1}function _c(e,r,i,f){var m=b(e)?e:J(e),p=b(r)?r:J(r);return this.isValid()&&m.isValid()&&p.isValid()?(f=f||"()",(f[0]==="("?this.isAfter(m,i):!this.isBefore(m,i))&&(f[1]===")"?this.isBefore(p,i):!this.isAfter(p,i))):!1}function Tc(e,r){var i=b(e)?e:J(e),f;return this.isValid()&&i.isValid()?(r=$e(r)||"millisecond",r==="millisecond"?this.valueOf()===i.valueOf():(f=i.valueOf(),this.clone().startOf(r).valueOf()<=f&&f<=this.clone().endOf(r).valueOf())):!1}function Oc(e,r){return this.isSame(e,r)||this.isAfter(e,r)}function Ac(e,r){return this.isSame(e,r)||this.isBefore(e,r)}function Lc(e,r,i){var f,m,p;if(!this.isValid())return NaN;if(f=Rn(e,this),!f.isValid())return NaN;switch(m=(f.utcOffset()-this.utcOffset())*6e4,r=$e(r),r){case"year":p=Ir(this,f)/12;break;case"month":p=Ir(this,f);break;case"quarter":p=Ir(this,f)/3;break;case"second":p=(this-f)/1e3;break;case"minute":p=(this-f)/6e4;break;case"hour":p=(this-f)/36e5;break;case"day":p=(this-f-m)/864e5;break;case"week":p=(this-f-m)/6048e5;break;default:p=this-f}return i?p:_e(p)}function Ir(e,r){if(e.date()<r.date())return-Ir(r,e);var i=(r.year()-e.year())*12+(r.month()-e.month()),f=e.clone().add(i,"months"),m,p;return r-f<0?(m=e.clone().add(i-1,"months"),p=(r-f)/(f-m)):(m=e.clone().add(i+1,"months"),p=(r-f)/(m-f)),-(i+p)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Yc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ec(e){if(!this.isValid())return null;var r=e!==!0,i=r?this.clone().utc():this;return i.year()<0||i.year()>9999?Sr(i,r?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ce(Date.prototype.toISOString)?r?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Sr(i,"Z")):Sr(i,r?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Wc(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",r="",i,f,m,p;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),i="["+e+'("]',f=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",m="-MM-DD[T]HH:mm:ss.SSS",p=r+'[")]',this.format(i+f+m+p)}function Ic(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var r=Sr(this,e);return this.localeData().postformat(r)}function Pc(e,r){return this.isValid()&&(b(e)&&e.isValid()||J(e).isValid())?Ee({to:this,from:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function zc(e){return this.from(J(),e)}function Rc(e,r){return this.isValid()&&(b(e)&&e.isValid()||J(e).isValid())?Ee({from:this,to:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function Hc(e){return this.to(J(),e)}function ji(e){var r;return e===void 0?this._locale._abbr:(r=Ge(e),r!=null&&(this._locale=r),this)}var Gi=F("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Xi(){return this._locale}var Pr=1e3,Ot=60*Pr,zr=60*Ot,Zi=(365*400+97)*24*zr;function At(e,r){return(e%r+r)%r}function qi(e,r,i){return e<100&&e>=0?new Date(e+400,r,i)-Zi:new Date(e,r,i).valueOf()}function Ki(e,r,i){return e<100&&e>=0?Date.UTC(e+400,r,i)-Zi:Date.UTC(e,r,i)}function Nc(e){var r,i;if(e=$e(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?Ki:qi,e){case"year":r=i(this.year(),0,1);break;case"quarter":r=i(this.year(),this.month()-this.month()%3,1);break;case"month":r=i(this.year(),this.month(),1);break;case"week":r=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":r=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":r=i(this.year(),this.month(),this.date());break;case"hour":r=this._d.valueOf(),r-=At(r+(this._isUTC?0:this.utcOffset()*Ot),zr);break;case"minute":r=this._d.valueOf(),r-=At(r,Ot);break;case"second":r=this._d.valueOf(),r-=At(r,Pr);break}return this._d.setTime(r),t.updateOffset(this,!0),this}function Fc(e){var r,i;if(e=$e(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?Ki:qi,e){case"year":r=i(this.year()+1,0,1)-1;break;case"quarter":r=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":r=i(this.year(),this.month()+1,1)-1;break;case"week":r=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":r=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":r=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":r=this._d.valueOf(),r+=zr-At(r+(this._isUTC?0:this.utcOffset()*Ot),zr)-1;break;case"minute":r=this._d.valueOf(),r+=Ot-At(r,Ot)-1;break;case"second":r=this._d.valueOf(),r+=Pr-At(r,Pr)-1;break}return this._d.setTime(r),t.updateOffset(this,!0),this}function Bc(){return this._d.valueOf()-(this._offset||0)*6e4}function Vc(){return Math.floor(this.valueOf()/1e3)}function Uc(){return new Date(this.valueOf())}function jc(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Gc(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Xc(){return this.isValid()?this.toISOString():null}function Zc(){return $(this)}function qc(){return g({},k(this))}function Kc(){return k(this).overflow}function Jc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Y("N",0,0,"eraAbbr"),Y("NN",0,0,"eraAbbr"),Y("NNN",0,0,"eraAbbr"),Y("NNNN",0,0,"eraName"),Y("NNNNN",0,0,"eraNarrow"),Y("y",["y",1],"yo","eraYear"),Y("y",["yy",2],0,"eraYear"),Y("y",["yyy",3],0,"eraYear"),Y("y",["yyyy",4],0,"eraYear"),O("N",Nn),O("NN",Nn),O("NNN",Nn),O("NNNN",fu),O("NNNNN",cu),G(["N","NN","NNN","NNNN","NNNNN"],function(e,r,i,f){var m=i._locale.erasParse(e,f,i._strict);m?k(i).era=m:k(i).invalidEra=e}),O("y",Dt),O("yy",Dt),O("yyy",Dt),O("yyyy",Dt),O("yo",uu),G(["y","yy","yyy","yyyy"],me),G(["yo"],function(e,r,i,f){var m;i._locale._eraYearOrdinalRegex&&(m=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?r[me]=i._locale.eraYearOrdinalParse(e,m):r[me]=parseInt(e,10)});function Qc(e,r){var i,f,m,p=this._eras||Ge("en")._eras;for(i=0,f=p.length;i<f;++i){switch(typeof p[i].since){case"string":m=t(p[i].since).startOf("day"),p[i].since=m.valueOf();break}switch(typeof p[i].until){case"undefined":p[i].until=1/0;break;case"string":m=t(p[i].until).startOf("day").valueOf(),p[i].until=m.valueOf();break}}return p}function eu(e,r,i){var f,m,p=this.eras(),w,T,E;for(e=e.toUpperCase(),f=0,m=p.length;f<m;++f)if(w=p[f].name.toUpperCase(),T=p[f].abbr.toUpperCase(),E=p[f].narrow.toUpperCase(),i)switch(r){case"N":case"NN":case"NNN":if(T===e)return p[f];break;case"NNNN":if(w===e)return p[f];break;case"NNNNN":if(E===e)return p[f];break}else if([w,T,E].indexOf(e)>=0)return p[f]}function tu(e,r){var i=e.since<=e.until?1:-1;return r===void 0?t(e.since).year():t(e.since).year()+(r-e.offset)*i}function ru(){var e,r,i,f=this.localeData().eras();for(e=0,r=f.length;e<r;++e)if(i=this.clone().startOf("day").valueOf(),f[e].since<=i&&i<=f[e].until||f[e].until<=i&&i<=f[e].since)return f[e].name;return""}function nu(){var e,r,i,f=this.localeData().eras();for(e=0,r=f.length;e<r;++e)if(i=this.clone().startOf("day").valueOf(),f[e].since<=i&&i<=f[e].until||f[e].until<=i&&i<=f[e].since)return f[e].narrow;return""}function ou(){var e,r,i,f=this.localeData().eras();for(e=0,r=f.length;e<r;++e)if(i=this.clone().startOf("day").valueOf(),f[e].since<=i&&i<=f[e].until||f[e].until<=i&&i<=f[e].since)return f[e].abbr;return""}function iu(){var e,r,i,f,m=this.localeData().eras();for(e=0,r=m.length;e<r;++e)if(i=m[e].since<=m[e].until?1:-1,f=this.clone().startOf("day").valueOf(),m[e].since<=f&&f<=m[e].until||m[e].until<=f&&f<=m[e].since)return(this.year()-t(m[e].since).year())*i+m[e].offset;return this.year()}function su(e){return l(this,"_erasNameRegex")||Fn.call(this),e?this._erasNameRegex:this._erasRegex}function au(e){return l(this,"_erasAbbrRegex")||Fn.call(this),e?this._erasAbbrRegex:this._erasRegex}function lu(e){return l(this,"_erasNarrowRegex")||Fn.call(this),e?this._erasNarrowRegex:this._erasRegex}function Nn(e,r){return r.erasAbbrRegex(e)}function fu(e,r){return r.erasNameRegex(e)}function cu(e,r){return r.erasNarrowRegex(e)}function uu(e,r){return r._eraYearOrdinalRegex||Dt}function Fn(){var e=[],r=[],i=[],f=[],m,p,w,T,E,R=this.eras();for(m=0,p=R.length;m<p;++m)w=Be(R[m].name),T=Be(R[m].abbr),E=Be(R[m].narrow),r.push(w),e.push(T),i.push(E),f.push(w),f.push(T),f.push(E);this._erasRegex=new RegExp("^("+f.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Rr(e,r){Y(0,[e,e.length],0,r)}Rr("gggg","weekYear"),Rr("ggggg","weekYear"),Rr("GGGG","isoWeekYear"),Rr("GGGGG","isoWeekYear"),O("G",$r),O("g",$r),O("GG",K,be),O("gg",K,be),O("GGGG",Mn,bn),O("gggg",Mn,bn),O("GGGGG",Dr,br),O("ggggg",Dr,br),Gt(["gggg","ggggg","GGGG","GGGGG"],function(e,r,i,f){r[f.substr(0,2)]=z(e)}),Gt(["gg","GG"],function(e,r,i,f){r[f]=t.parseTwoDigitYear(e)});function du(e){return Ji.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function mu(e){return Ji.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function hu(){return je(this.year(),1,4)}function pu(){return je(this.isoWeekYear(),1,4)}function gu(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)}function yu(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)}function Ji(e,r,i,f,m){var p;return e==null?Kt(this,f,m).year:(p=je(e,f,m),r>p&&(r=p),xu.call(this,e,r,i,f,m))}function xu(e,r,i,f,m){var p=Ti(e,r,i,f,m),w=qt(p.year,0,p.dayOfYear);return this.year(w.getUTCFullYear()),this.month(w.getUTCMonth()),this.date(w.getUTCDate()),this}Y("Q",0,"Qo","quarter"),O("Q",xi),G("Q",function(e,r){r[Ve]=(z(e)-1)*3});function wu(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Y("D",["DD",2],"Do","date"),O("D",K,$t),O("DD",K,be),O("Do",function(e,r){return e?r._dayOfMonthOrdinalParse||r._ordinalParse:r._dayOfMonthOrdinalParseLenient}),G(["D","DD"],Pe),G("Do",function(e,r){r[Pe]=z(e.match(K)[0])});var Qi=_t("Date",!0);Y("DDD",["DDDD",3],"DDDo","dayOfYear"),O("DDD",Mr),O("DDDD",wi),G(["DDD","DDDD"],function(e,r,i){i._dayOfYear=z(e)});function vu(e){var r=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?r:this.add(e-r,"d")}Y("m",["mm",2],0,"minute"),O("m",K,Dn),O("mm",K,be),G(["m","mm"],Ye);var ku=_t("Minutes",!1);Y("s",["ss",2],0,"second"),O("s",K,Dn),O("ss",K,be),G(["s","ss"],Ue);var Cu=_t("Seconds",!1);Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return this.millisecond()*10}),Y(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Y(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Y(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Y(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Y(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),O("S",Mr,xi),O("SS",Mr,be),O("SSS",Mr,wi);var st,es;for(st="SSSS";st.length<=9;st+="S")O(st,Dt);function Su(e,r){r[ht]=z(("0."+e)*1e3)}for(st="S";st.length<=9;st+="S")G(st,Su);es=_t("Milliseconds",!1),Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");function bu(){return this._isUTC?"UTC":""}function Mu(){return this._isUTC?"Coordinated Universal Time":""}var S=U.prototype;S.add=yc,S.calendar=bc,S.clone=Mc,S.diff=Lc,S.endOf=Fc,S.format=Ic,S.from=Pc,S.fromNow=zc,S.to=Rc,S.toNow=Hc,S.get=El,S.invalidAt=Kc,S.isAfter=Dc,S.isBefore=$c,S.isBetween=_c,S.isSame=Tc,S.isSameOrAfter=Oc,S.isSameOrBefore=Ac,S.isValid=Zc,S.lang=Gi,S.locale=ji,S.localeData=Xi,S.max=Zf,S.min=Xf,S.parsingFlags=qc,S.set=Wl,S.startOf=Nc,S.subtract=xc,S.toArray=jc,S.toObject=Gc,S.toDate=Uc,S.toISOString=Ec,S.inspect=Wc,typeof Symbol<"u"&&Symbol.for!=null&&(S[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),S.toJSON=Xc,S.toString=Yc,S.unix=Vc,S.valueOf=Bc,S.creationData=Jc,S.eraName=ru,S.eraNarrow=nu,S.eraAbbr=ou,S.eraYear=iu,S.year=Ci,S.isLeapYear=Yl,S.weekYear=du,S.isoWeekYear=mu,S.quarter=S.quarters=wu,S.month=$i,S.daysInMonth=Vl,S.week=S.weeks=Jl,S.isoWeek=S.isoWeeks=Ql,S.weeksInYear=gu,S.weeksInWeekYear=yu,S.isoWeeksInYear=hu,S.isoWeeksInISOWeekYear=pu,S.date=Qi,S.day=S.days=mf,S.weekday=hf,S.isoWeekday=pf,S.dayOfYear=vu,S.hour=S.hours=Cf,S.minute=S.minutes=ku,S.second=S.seconds=Cu,S.millisecond=S.milliseconds=es,S.utcOffset=oc,S.utc=sc,S.local=ac,S.parseZone=lc,S.hasAlignedHourOffset=fc,S.isDST=cc,S.isLocal=dc,S.isUtcOffset=mc,S.isUtc=Ni,S.isUTC=Ni,S.zoneAbbr=bu,S.zoneName=Mu,S.dates=F("dates accessor is deprecated. Use date instead.",Qi),S.months=F("months accessor is deprecated. Use month instead",$i),S.years=F("years accessor is deprecated. Use year instead",Ci),S.zone=F("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ic),S.isDSTShifted=F("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",uc);function Du(e){return J(e*1e3)}function $u(){return J.apply(null,arguments).parseZone()}function ts(e){return e}var V=te.prototype;V.calendar=Fe,V.longDateFormat=pl,V.invalidDate=yl,V.ordinal=vl,V.preparse=ts,V.postformat=ts,V.relativeTime=Cl,V.pastFuture=Sl,V.set=A,V.eras=Qc,V.erasParse=eu,V.erasConvertYear=tu,V.erasAbbrRegex=au,V.erasNameRegex=su,V.erasNarrowRegex=lu,V.months=Hl,V.monthsShort=Nl,V.monthsParse=Bl,V.monthsRegex=jl,V.monthsShortRegex=Ul,V.week=Xl,V.firstDayOfYear=Kl,V.firstDayOfWeek=ql,V.weekdays=lf,V.weekdaysMin=cf,V.weekdaysShort=ff,V.weekdaysParse=df,V.weekdaysRegex=gf,V.weekdaysShortRegex=yf,V.weekdaysMinRegex=xf,V.isPM=vf,V.meridiem=Sf;function Hr(e,r,i,f){var m=Ge(),p=x().set(f,r);return m[i](p,e)}function rs(e,r,i){if(u(e)&&(r=e,e=void 0),e=e||"",r!=null)return Hr(e,r,i,"month");var f,m=[];for(f=0;f<12;f++)m[f]=Hr(e,f,i,"month");return m}function Bn(e,r,i,f){typeof e=="boolean"?(u(r)&&(i=r,r=void 0),r=r||""):(r=e,i=r,e=!1,u(r)&&(i=r,r=void 0),r=r||"");var m=Ge(),p=e?m._week.dow:0,w,T=[];if(i!=null)return Hr(r,(i+p)%7,f,"day");for(w=0;w<7;w++)T[w]=Hr(r,(w+p)%7,f,"day");return T}function _u(e,r){return rs(e,r,"months")}function Tu(e,r){return rs(e,r,"monthsShort")}function Ou(e,r,i){return Bn(e,r,i,"weekdays")}function Au(e,r,i){return Bn(e,r,i,"weekdaysShort")}function Lu(e,r,i){return Bn(e,r,i,"weekdaysMin")}it("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var r=e%10,i=z(e%100/10)===1?"th":r===1?"st":r===2?"nd":r===3?"rd":"th";return e+i}}),t.lang=F("moment.lang is deprecated. Use moment.locale instead.",it),t.langData=F("moment.langData is deprecated. Use moment.localeData instead.",Ge);var Xe=Math.abs;function Yu(){var e=this._data;return this._milliseconds=Xe(this._milliseconds),this._days=Xe(this._days),this._months=Xe(this._months),e.milliseconds=Xe(e.milliseconds),e.seconds=Xe(e.seconds),e.minutes=Xe(e.minutes),e.hours=Xe(e.hours),e.months=Xe(e.months),e.years=Xe(e.years),this}function ns(e,r,i,f){var m=Ee(r,i);return e._milliseconds+=f*m._milliseconds,e._days+=f*m._days,e._months+=f*m._months,e._bubble()}function Eu(e,r){return ns(this,e,r,1)}function Wu(e,r){return ns(this,e,r,-1)}function os(e){return e<0?Math.floor(e):Math.ceil(e)}function Iu(){var e=this._milliseconds,r=this._days,i=this._months,f=this._data,m,p,w,T,E;return e>=0&&r>=0&&i>=0||e<=0&&r<=0&&i<=0||(e+=os(Vn(i)+r)*864e5,r=0,i=0),f.milliseconds=e%1e3,m=_e(e/1e3),f.seconds=m%60,p=_e(m/60),f.minutes=p%60,w=_e(p/60),f.hours=w%24,r+=_e(w/24),E=_e(is(r)),i+=E,r-=os(Vn(E)),T=_e(i/12),i%=12,f.days=r,f.months=i,f.years=T,this}function is(e){return e*4800/146097}function Vn(e){return e*146097/4800}function Pu(e){if(!this.isValid())return NaN;var r,i,f=this._milliseconds;if(e=$e(e),e==="month"||e==="quarter"||e==="year")switch(r=this._days+f/864e5,i=this._months+is(r),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(r=this._days+Math.round(Vn(this._months)),e){case"week":return r/7+f/6048e5;case"day":return r+f/864e5;case"hour":return r*24+f/36e5;case"minute":return r*1440+f/6e4;case"second":return r*86400+f/1e3;case"millisecond":return Math.floor(r*864e5)+f;default:throw new Error("Unknown unit "+e)}}function Ze(e){return function(){return this.as(e)}}var ss=Ze("ms"),zu=Ze("s"),Ru=Ze("m"),Hu=Ze("h"),Nu=Ze("d"),Fu=Ze("w"),Bu=Ze("M"),Vu=Ze("Q"),Uu=Ze("y"),ju=ss;function Gu(){return Ee(this)}function Xu(e){return e=$e(e),this.isValid()?this[e+"s"]():NaN}function gt(e){return function(){return this.isValid()?this._data[e]:NaN}}var Zu=gt("milliseconds"),qu=gt("seconds"),Ku=gt("minutes"),Ju=gt("hours"),Qu=gt("days"),ed=gt("months"),td=gt("years");function rd(){return _e(this.days()/7)}var qe=Math.round,Lt={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function nd(e,r,i,f,m){return m.relativeTime(r||1,!!i,e,f)}function od(e,r,i,f){var m=Ee(e).abs(),p=qe(m.as("s")),w=qe(m.as("m")),T=qe(m.as("h")),E=qe(m.as("d")),R=qe(m.as("M")),pe=qe(m.as("w")),Ke=qe(m.as("y")),at=p<=i.ss&&["s",p]||p<i.s&&["ss",p]||w<=1&&["m"]||w<i.m&&["mm",w]||T<=1&&["h"]||T<i.h&&["hh",T]||E<=1&&["d"]||E<i.d&&["dd",E];return i.w!=null&&(at=at||pe<=1&&["w"]||pe<i.w&&["ww",pe]),at=at||R<=1&&["M"]||R<i.M&&["MM",R]||Ke<=1&&["y"]||["yy",Ke],at[2]=r,at[3]=+e>0,at[4]=f,nd.apply(null,at)}function id(e){return e===void 0?qe:typeof e=="function"?(qe=e,!0):!1}function sd(e,r){return Lt[e]===void 0?!1:r===void 0?Lt[e]:(Lt[e]=r,e==="s"&&(Lt.ss=r-1),!0)}function ad(e,r){if(!this.isValid())return this.localeData().invalidDate();var i=!1,f=Lt,m,p;return typeof e=="object"&&(r=e,e=!1),typeof e=="boolean"&&(i=e),typeof r=="object"&&(f=Object.assign({},Lt,r),r.s!=null&&r.ss==null&&(f.ss=r.s-1)),m=this.localeData(),p=od(this,!i,f,m),i&&(p=m.pastFuture(+this,p)),m.postformat(p)}var Un=Math.abs;function Yt(e){return(e>0)-(e<0)||+e}function Nr(){if(!this.isValid())return this.localeData().invalidDate();var e=Un(this._milliseconds)/1e3,r=Un(this._days),i=Un(this._months),f,m,p,w,T=this.asSeconds(),E,R,pe,Ke;return T?(f=_e(e/60),m=_e(f/60),e%=60,f%=60,p=_e(i/12),i%=12,w=e?e.toFixed(3).replace(/\.?0+$/,""):"",E=T<0?"-":"",R=Yt(this._months)!==Yt(T)?"-":"",pe=Yt(this._days)!==Yt(T)?"-":"",Ke=Yt(this._milliseconds)!==Yt(T)?"-":"",E+"P"+(p?R+p+"Y":"")+(i?R+i+"M":"")+(r?pe+r+"D":"")+(m||f||e?"T":"")+(m?Ke+m+"H":"")+(f?Ke+f+"M":"")+(e?Ke+w+"S":"")):"P0D"}var N=Er.prototype;N.isValid=ec,N.abs=Yu,N.add=Eu,N.subtract=Wu,N.as=Pu,N.asMilliseconds=ss,N.asSeconds=zu,N.asMinutes=Ru,N.asHours=Hu,N.asDays=Nu,N.asWeeks=Fu,N.asMonths=Bu,N.asQuarters=Vu,N.asYears=Uu,N.valueOf=ju,N._bubble=Iu,N.clone=Gu,N.get=Xu,N.milliseconds=Zu,N.seconds=qu,N.minutes=Ku,N.hours=Ju,N.days=Qu,N.weeks=rd,N.months=ed,N.years=td,N.humanize=ad,N.toISOString=Nr,N.toString=Nr,N.toJSON=Nr,N.locale=ji,N.localeData=Xi,N.toIsoString=F("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nr),N.lang=Gi,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),O("x",$r),O("X",$l),G("X",function(e,r,i){i._d=new Date(parseFloat(e)*1e3)}),G("x",function(e,r,i){i._d=new Date(z(e))});return t.version="2.30.1",s(J),t.fn=S,t.min=qf,t.max=Kf,t.now=Jf,t.utc=x,t.unix=Du,t.months=_u,t.isDate=h,t.locale=it,t.invalid=I,t.duration=Ee,t.isMoment=b,t.weekdays=Ou,t.parseZone=$u,t.localeData=Ge,t.isDuration=Wr,t.monthsShort=Tu,t.weekdaysMin=Lu,t.defineLocale=Ln,t.updateLocale=$f,t.locales=_f,t.weekdaysShort=Au,t.normalizeUnits=$e,t.relativeTimeRounding=id,t.relativeTimeThreshold=sd,t.calendarFormat=Sc,t.prototype=S,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t}))});var _d3dispatch = require('d3-dispatch');var _react = require('react'); var de = _interopRequireWildcard(_react);var _inRange = require('lodash/inRange'); var _inRange2 = _interopRequireDefault(_inRange);var _chunk = require('lodash/chunk'); var _chunk2 = _interopRequireDefault(_chunk);var _last = require('lodash/last'); var _last2 = _interopRequireDefault(_last);var _reactkonva = require('react-konva');var ls=_react.forwardRef.call(void 0, (n,t)=>de.default.createElement(_reactkonva.Stage,{ref:t,...n,preventDefault:!1})),j=_react.forwardRef.call(void 0, (n,t)=>de.default.createElement(_reactkonva.Layer,{ref:t,...n,preventDefault:!1})),jn=_react.forwardRef.call(void 0, (n,t)=>de.default.createElement(_reactkonva.Group,{ref:t,...n,preventDefault:!1})),Te=_react.forwardRef.call(void 0, (n,t)=>de.default.createElement(_reactkonva.Rect,{ref:t,...n,preventDefault:!1})),xg=_react.forwardRef.call(void 0, (n,t)=>de.default.createElement(_reactkonva.Circle,{ref:t,...n,preventDefault:!1})),fs=_react.forwardRef.call(void 0, (n,t)=>de.default.createElement(_reactkonva.Text,{ref:t,...n,preventDefault:!1})),Gn=_react.forwardRef.call(void 0, (n,t)=>de.default.createElement(_reactkonva.Line,{ref:t,...n,preventDefault:!1})),cs=_react.forwardRef.call(void 0, (n,t)=>de.default.createElement(_reactkonva.Image,{ref:t,...n,preventDefault:!1}));var Xn=de.default.createContext();function M(){return _react.useContext.call(void 0, Xn)}var _konva = require('konva'); var _konva2 = _interopRequireDefault(_konva);var{keys:Cd,values:Sd}=Object,Zn=n=>!Number.isNaN(n)&&![0,null,void 0].includes(n),bd=(n,t)=>!(n==="Rect"&&![t.x,t.y,t.width,t.height].every(Zn)||n==="Line"&&!t.points.every(Zn)||(n==="Circle"||n==="Text")&&![t.x,t.y].every(Zn));function ie(n){let{config:t,frame:s}=M(),o=_react.useRef.call(void 0, {}),a=_react.useRef.call(void 0, {}),[l,d]=_react.useState.call(void 0, );_react.useEffect.call(void 0, ()=>(d(!0),()=>d(!1)),[]);let c=_react.useCallback.call(void 0, (h,y)=>{if(!y||!bd(y.type,y))return null;let{key:g,show:x=!0}=y;if(g==null)throw new Error(`renderer(fn, props) props has no key ${JSON.stringify(y,null,2)} ${h}`);let C=a.current[g];if(!x)return C&&(C.destroy(),delete a.current[g]),null;let k=h({config:t,frame:s,node:C,...y}).filter(Boolean);if(!k||!k.length)return C&&(C.destroy(),delete a.current[g]),null;if(C)return k.forEach(($,I)=>{try{C.children[I].setAttrs($.attrs)}catch (e3){}}),C;let D=new _konva2.default.Group({key:g});return k.forEach($=>{try{let I=new _konva2.default[$.type]($.attrs);D.add(I)}catch(I){console.error(I.stack),console.error($)}}),n.add(D),a.current[g]=D,D},[_optionalChain([n, 'optionalAccess', _2 => _2._id]),JSON.stringify(s)]);_react.useEffect.call(void 0, ()=>{l&&_optionalChain([n, 'optionalAccess', _3 => _3._id])&&Sd(o.current).forEach(([h,y])=>{c(h,y),delete o.current[y.key]})},[l,_optionalChain([n, 'optionalAccess', _4 => _4._id])]);function u(h,y){return!l||!_optionalChain([n, 'optionalAccess', _5 => _5.add])?(o.current[y.key]=[h,y],null):c(h,y)}return u.queue=o.current,u.nodes=a.current,u.destroy=h=>{a.current[h]&&(a.current[h].destroy(),delete a.current[h])},u.destroyAllWith=h=>{Cd(a.current).filter(y=>y.startsWith(h)).forEach(y=>{a.current[y].destroy(),delete a.current[y],n.draw()})},u.destroyAll=()=>{Object.keys(a.current).forEach(h=>{_optionalChain([a, 'access', _6 => _6.current, 'access', _7 => _7[h], 'optionalAccess', _8 => _8.destroy, 'call', _9 => _9()]),delete a.current[h]})},u}var{values:$d}=Object;function se(n){let{dispatch:t}=M(),s=_react.useRef.call(void 0, {}),o=_react.useRef.call(void 0, {loaded:!1,onChange:(d,c)=>{s.current[c||n]=d},offChange:d=>{delete s.current[d||n]}}),[a,l]=_react.useState.call(void 0, !1);return _react.useEffect.call(void 0, ()=>{t.on(`scale.${n}`,d=>{d.x&&(o.current.x=d.x,o.current.xBand=d.xBand,o.current.xTicks=d.xTicks),d.y&&(o.current.y=d.y,o.current.yTicks=d.yTicks),o.current.x&&o.current.y&&(a||(o.current.loaded=!0,l(!0)),$d(s.current).forEach(c=>{c(o.current)}))})},[t]),o.current}var _polished = require('polished');function _d({config:n,key:t,points:s,color:o,isHovering:a,isSelected:l}){let d=!!a||!!l;return[{type:"Line",attrs:{key:t,stroke:o,strokeWidth:n.theme.lineWidth,hitStrokeWidth:n.theme.lineWidth+5,points:s,anchor:{points:s,selection:[0,1,2,3]}}},{type:"Circle",attrs:{x:s[0],y:s[1],radius:n.theme.lineCircleSize/2,fill:n.theme.bgColor,stroke:o,strokeWidth:n.theme.lineWidth,visible:!!d,listening:!1}},{type:"Circle",attrs:{x:s[2],y:s[3],radius:n.theme.lineCircleSize/2,fill:n.theme.bgColor,stroke:o,strokeWidth:n.theme.lineWidth,visible:!!d,listening:!1}}]}function Td({frame:n,config:t,key:s,points:o,color:a,isHovering:l,isSelected:d}){let c=!!l||!!d;return[{type:"Line",attrs:{key:s,stroke:a,strokeWidth:t.theme.lineWidth,hitStrokeWidth:t.theme.lineWidth+5,points:[n.mainChart.xStart,o[1],n.mainChart.xEnd,o[1]],anchor:{points:o,selection:[0,1]}}},{type:"Circle",attrs:{x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}}]}function Od({frame:n,config:t,key:s,points:o,color:a,isHovering:l,isSelected:d}){let c=!!l||!!d;return[{type:"Line",attrs:{key:s,stroke:a,strokeWidth:t.theme.lineWidth,points:[o[0],n.mainChart.yStart,o[0],n.mainChart.yEnd],anchor:{points:o,selection:[0,1]}}},{type:"Circle",attrs:{key:s,x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}}]}function Ad({frame:n,config:t,key:s,points:o,color:a,isHovering:l,isSelected:d}){let c=!!l||!!d;return[{type:"Rect",attrs:{x:Math.min(o[0],o[2]),y:Math.min(o[1],o[3]),width:Math.abs(o[2]-o[0]),height:Math.abs(o[3]-o[1]),fill:_polished.transparentize.call(void 0, .85,a),listening:!1}},{type:"Line",attrs:{key:s,stroke:a,strokeWidth:1,hitStrokeWidth:t.theme.lineWidth+5,points:[[o[0],o[1]],[o[2],o[1]],[o[2],o[3]],[o[0],o[3]],[o[0],o[1]]].flat(1),anchor:{points:o,selection:[0,1,2,3]}}},{type:"Circle",attrs:{x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}},{type:"Circle",attrs:{x:o[2],y:o[3],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}}]}function Ld({frame:n,config:t,key:s,points:o,color:a,isHovering:l,isSelected:d}){let c=!!l||!!d;return[{type:"Rect",attrs:{x:n.mainChart.xStart,y:o[1],width:n.mainChart.width,height:o[3]-o[1],fill:_polished.transparentize.call(void 0, .85,a),listening:!1}},{type:"Line",attrs:{key:s,stroke:a,strokeWidth:1,hitStrokeWidth:t.theme.lineWidth+5,points:[n.mainChart.xStart,o[1],n.mainChart.xEnd,o[1]],anchor:{points:o,selection:[0,1]}}},{type:"Circle",attrs:{x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}},{type:"Line",attrs:{key:s,stroke:a,strokeWidth:1,dash:[3,4],points:[n.mainChart.xStart,o[1]+(o[3]-o[1])/2,n.mainChart.xEnd,o[1]+(o[3]-o[1])/2],listening:!1}},{type:"Line",attrs:{key:s,stroke:a,strokeWidth:1,hitStrokeWidth:t.theme.lineWidth+5,points:[n.mainChart.xStart,o[3],n.mainChart.xEnd,o[3]],anchor:{points:o,selection:[2,3]}}},{type:"Circle",attrs:{x:o[2],y:o[3],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}}]}var qn={small:12,medium:15,large:22};function Yd({frame:n,config:t,key:s,points:o,color:a,text:l,textSize:d,isHovering:c,isSelected:u,isMoving:h}){let y=!!c||!!u;return[{type:"Text",attrs:{key:s,text:l,x:Math.min(o[0],o[2])+4,y:Math.min(o[1],o[3])+4,width:Math.abs(o[2]-o[0])-8,height:Math.abs(o[3]-o[1])-8,fontFamily:t.theme.fontFamily,fontStyle:t.theme.fontStyle,fontSize:qn[d],lineHeight:1.4,textDecoration:c&&!u?"underline":"none",fill:a,points:[[o[0],o[1]],[o[2],o[1]],[o[2],o[3]],[o[0],o[3]],[o[0],o[1]]].flat(1),anchor:{points:o,selection:[0,1,2,3]},visible:!u||h}},{type:"Line",attrs:{key:s,text:!0,stroke:t.theme.lineColor,strokeWidth:1,hitStrokeWidth:t.theme.lineWidth+5,points:[[o[0],o[1]],[o[2],o[1]],[o[2],o[3]],[o[0],o[3]],[o[0],o[1]]].flat(1),opacity:y?1:0,anchor:{points:o,selection:[0,1,2,3]}}},{type:"Circle",attrs:{x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:t.theme.lineColor,strokeWidth:t.theme.lineWidth,visible:!!y,listening:!1}},{type:"Circle",attrs:{x:o[2],y:o[3],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:t.theme.lineColor,strokeWidth:t.theme.lineWidth,visible:!!y,listening:!1}}]}var Ed={line:_d,hline:Td,vline:Od,rect:Ad,harea:Ld,text:Yd};function ve(n){return n.points?Ed[n.type](n):null}var _div = require('@streamlinedfi/div'); var _div2 = _interopRequireDefault(_div);var _reactkonvautils = require('react-konva-utils');var _styledcomponents = require('styled-components'); var _styledcomponents2 = _interopRequireDefault(_styledcomponents);var gs="./Aa-AL7GRVRG.svg";var Fr="./harea-U7QAD6S7.svg";var Br="./hline-MPF4RLK5.svg";var Vr="./line-WDII3NNF.svg";var Ur="./rect-WKEJUCSQ.svg";var jr="./text-CEDM6746.svg";var Gr="./vline-LU5T5QR4.svg";var Et=_div.createUISystem.call(void 0, {theme:{},breakpoints:{},spacingUnit:16});var _Plus = require('@styled-icons/feather/Plus');function tr({onClick:n,size:t=38,...s}){let{config:o}=M();return de.default.createElement(_div2.default,{as:"button",$absolute:!0,$z:2,$flex:!0,$innerCenter:!0,$radius:"50%",$top:8,$right:8,$w:t,$h:t,$background:"none",$background$active:o.theme.close.bgColorActive,$color:o.theme.close.color,$color$hover:o.theme.close.colorHover,$color$active:o.theme.close.colorActive,onClick:n,...s},de.default.createElement(_div2.default,{as:_Plus.Plus,$w:t*.75,$transform:"rotate(45deg)"}))}var Gd={small:.85,medium:1,large:1.15},Xd={line:Vr,rect:Ur,harea:Fr,hline:Br,vline:Gr,text:jr};function Kn({currentDrawing:n,onColorChange:t,onTextSizeChange:s,onRemove:o}){let{frame:a,config:l}=M(),{color:d,textSize:c}=n||{},u=t,h=s,y=l.theme.drawingToolbar.colors;if(!n)return null;let g=Xd[n.type];return de.default.createElement(_reactkonvautils.Html,{divProps:{style:{width:"100%"}}},de.default.createElement(_styledcomponents.ThemeProvider,{theme:Et.theme},de.default.createElement(_div2.default,{$flex:!0,$innerCenter:!0,$w:"auto",$absolute:!0,$top:a.header.yEnd,$left:"50%",$transform:"translateX(-50%)",$border:l.theme.drawingToolbar.borderColor,$background:l.theme.drawingToolbar.bgColor,$h:34,$radius:17,$px:.5},de.default.createElement(_div2.default,{$flex:!0,$shrink:"0",$innerCenter:!0,$w:32,$h:32,$color:l.theme.drawingToolbar.iconColor},de.default.createElement(g,null)),y.map(x=>de.default.createElement(_div2.default,{as:"button",key:x,$shrink:"0",$w:16,$h:16,$mr:.5,$radius:8,$background:d===x?d:void 0,$background$hover:d===x?void 0:_polished.transparentize.call(void 0, .5,x),$border:`1.5px solid ${x}`,onClick:()=>u(x)})),n.type==="text"&&de.default.createElement(_div2.default,{$flex:!0,$w:"auto",$shrink:"0",$mr:.5},["small","medium","large"].map(x=>de.default.createElement(_div2.default,{key:x,$flex:!0,as:"button",$shrink:"0",$innerCenter:!0,$w:32,$h:32,$radius:16,$color:c===x?l.theme.drawingToolbar.textColorActive:l.theme.drawingToolbar.textColor,$background:c===x?l.theme.drawingToolbar.textBgColor:void 0,onClick:()=>h(x)},de.default.createElement(_div2.default,{as:gs,$transform:`scale(${Gd[x]})`})))),de.default.createElement(tr,{size:24,$position:"static",$background:l.theme.drawingToolbar.closeBgColor,onClick:()=>o(n)}))))}function Jn({currentDrawing:n,isMovingText:t,onTextFocus:s,onTextChange:o,textSizeMapping:a}){let{frame:l,config:d}=M();if(!n||n.type!=="text"||t)return null;let{text:c,textSize:u,points:h,color:y}=n;return de.default.createElement(_reactkonvautils.Html,{divProps:{style:{width:"100%"}}},de.default.createElement(_div2.default,{as:"textarea",$flex:!0,$innerCenter:!0,$w:"auto",$absolute:!0,$left:Math.min(h[0],h[2])+4,$top:Math.min(h[1],h[3])+3,$width:Math.abs(h[2]-h[0])-8,$height:Math.abs(h[3]-h[1])-8,$fontSize:a[u],$lineHeight:a[u]*1.4,$p:"0",$color:y,$background:"none",$border:"none",onFocus:s,onChange:g=>o(g.target.value),value:c}))}var{stringify:Cs}=JSON,{keys:Qd,values:to,fromEntries:em,entries:Sy}=Object;function tm(n,t){let s=n.anchor.selection.map(l=>[n.anchor.points[l],l]),a=_chunk2.default.call(void 0, s,2).find(([[l],[d]])=>_inRange2.default.call(void 0, t.offsetX,l-5,l+5)&&_inRange2.default.call(void 0, t.offsetY,d-5,d+5));return to(em(a||s))}function rm(n){return Qd(n).length}function ro({onDrawings:n}){let{frame:t,config:s,setConfig:o,setCursor:a,dispatch:l}=M(),d=_react.useRef.call(void 0, ),c=ie(d.current),u=se("drawings"),h=_react.useRef.call(void 0, {}),[y,g]=_react.useState.call(void 0, null),[x,C]=_react.useState.call(void 0, !1),k=_react.useRef.call(void 0, null),D=_react.useRef.call(void 0, null),$=_react.useRef.call(void 0, null),I=()=>h.current[k.current],W=A=>{let L=_optionalChain([d, 'access', _10 => _10.current, 'optionalAccess', _11 => _11.getAllIntersections, 'call', _12 => _12({x:A.offsetX,y:A.offsetY})]);return _last2.default.call(void 0, L)},H=()=>{typeof n=="function"&&n(h.current)};_react.useEffect.call(void 0, ()=>{c.destroyAll(),h.current={},k.current=null,D.current=null,$.current=null,g(null)},[s.timeframe]);let B=_react.useCallback.call(void 0, A=>{let L=rm(h.current),te=u.x.invert(A.offsetX),re=u.y.invert(A.offsetY),q={key:L,type:s.tool,domainPoints:[te,re],points:[A.offsetX,A.offsetY],isSelected:!0,color:s.theme.lineColor};if(h.current[L]=q,k.current=L,q.type==="text"){let Fe=A.offsetX+120,le=A.offsetY+80,we=u.x.invert(Fe),De=u.y.invert(le);q.domainPoints=[...q.domainPoints,we,De],q.points=[...q.points,Fe,le],q.color=s.theme.title.color,q.text="Text",q.textSize="medium"}return["hline","vline","text"].includes(q.type)&&(o({...s,tool:"crosshair"}),g(q)),H(),q},[s.tool]),U=_react.useCallback.call(void 0, A=>{let L=I();if(["line","rect","harea"].includes(L.type)){let te=u.x.invert(A.offsetX),re=u.y.invert(A.offsetY),q=[L.domainPoints[0],L.domainPoints[1],te,re],Fe={...L,domainPoints:q,points:L.domainPoints.map((le,we)=>(we+1)%2===1?u.x(le):u.y(le))};return A.type!=="mousemove"&&(o({...s,tool:"crosshair"}),g(L)),h.current[L.key]=Fe,H(),Fe}},[Cs(s)]),b=_react.useCallback.call(void 0, A=>{let L=h.current[$.current.key],te=A.offsetX-$.current.initX,re=A.offsetY-$.current.initY,q=L.points.map((we,De)=>{if($.current.moveablePoints.includes(De)){if(["line","rect","text"].includes(L.type))return(De+1)%2===1?we+te:we+re;if(["hline","vline","harea"].includes(L.type))return(De+1)%2===1?A.offsetX:A.offsetY}return we}),Fe=L.points.map((we,De)=>(De+1)%2===1?u.x.invert(we):u.y.invert(we)),le={...L,domainPoints:Fe,points:q};return h.current[L.key]=le,L.type==="text"&&g({...le}),$.current.initX=A.offsetX,$.current.initY=A.offsetY,H(),le},[]),Z=_react.useCallback.call(void 0, A=>{let L={...A,points:A.domainPoints.map((te,re)=>(re+1)%2===1?u.x(te):u.y(te))};return h.current[A.key]=L,H(),L},[]),F=_react.useCallback.call(void 0, A=>{let L=h.current[A?A.attrs.key:D.current];if(!L)return null;A?(D.current=A.attrs.key,$.current||a("move")):(D.current=null,a("crosshair"));let te={...L,isHovering:!!A};return h.current[L.key]=te,H(),te},[]),Se=_react.useCallback.call(void 0, (A,L)=>{let te=h.current[A?A.attrs.key:k.current];if(A&&L){let q=tm(A.attrs,L);k.current=A.attrs.key,g(te),$.current={key:A.attrs.key,initX:L.offsetX,initY:L.offsetY,moveablePoints:q},A.attrs.text&&C(!0)}else k.current=null,D.current=null,g(null),C(!1);let re={...te,isSelected:!!A,isHovering:!1,isMoving:!!A};return h.current[te.key]=re,H(),re},[l]),ne=_react.useCallback.call(void 0, (A,L)=>(h.current[y.key][A]=L,g({...h.current[y.key]}),H(),h.current[y.key]),[Cs(y)]),ce=_react.useCallback.call(void 0, A=>{let L=_nullishCoalesce(A.key, () => (y.key));h.current[L]=null,k.current=null,g(null),c.destroy(L),H()},[y]);return _react.useEffect.call(void 0, ()=>{s.tool!=="crosshair"&&I()&&Se(null,null)},[s.tool]),_react.useEffect.call(void 0, ()=>{let A=["line","hline","vline","rect","harea","text"].includes(s.tool);l.on("scale.chartDrawings",()=>{to(h.current).filter(Boolean).forEach(L=>c(ve,Z(L)))}),l.on("pointerdown.chartDrawings",L=>{let te=I();if(A)if(!te)c(ve,B(L));else{let re=U(L);re&&c(ve,re)}else{te&&c(ve,Se(null,null));let re=W(L);re&&c(ve,Se(re,L))}}),l.on("mousemove.chartDrawings",L=>{if(L){if(I()){if(A){let q=U(L);if(q){c(ve,q);return}}else if($.current){c(ve,b(L));return}}D.current!==null&&c(ve,F(null));let re=W(L);if(re){let q=F(re);c(ve,q),l.call("hoverDrawing",null,q)}else l.call("hoverDrawing",null,null)}}),l.on("pointerup.chartDrawings",L=>{$.current&&(h.current[$.current.key].isMoving=!1,$.current=null,C(!1))}),l.on("removeDrawing",L=>{ce(L)}),l.on("removeDrawings",()=>{to(h.current).filter(Boolean).forEach(L=>{ce(L)})})},[l,s.tool,d.current]),de.default.createElement(j,{ref:d,clipX:t.mainChart.xStart,clipY:t.mainChart.yStart,clipWidth:t.mainChart.width,clipHeight:t.mainChart.height},y&&de.default.createElement(Kn,{currentDrawing:y,onColorChange:A=>{let L=ne("color",A);c(ve,L)},onTextSizeChange:A=>{c(ve,ne("textSize",A))},onRemove:ce}),de.default.createElement(Jn,{currentDrawing:y,textSizeMapping:qn,isMovingText:x,onTextFocus:()=>{$.current=null},onTextChange:A=>{c(ve,ne("text",A))}}))}var _momenttimezone = require('moment-timezone'); var _momenttimezone2 = _interopRequireDefault(_momenttimezone);function om({config:n,frame:t,y:s,text:o,fill:a}){let l=n.theme.axes.lastValueTickBgSize;return[{type:"Line",attrs:{fill:_polished.mix.call(void 0, .2,a,n.theme.bgColor),points:[t.yAxis.xStart,s,t.yAxis.xStart+l/2,s-l/2,t.yAxis.xStart+t.yAxis.width,s-l/2,t.yAxis.xStart+t.yAxis.width,s+l/2,t.yAxis.xStart+l/2,s+l/2,t.yAxis.xStart,s],closed:!0}},{type:"Line",attrs:{stroke:a,strokeWidth:1,points:[t.yAxis.xStart,s,t.yAxis.xStart+n.theme.axes.tickSize,s]}},{type:"Text",attrs:{fontFamily:n.theme.fontFamily,fontStyle:n.theme.fontStyle,fontSize:n.theme.axes.fontSize,text:o,x:t.yAxis.xStart+n.theme.axes.tickSize+n.theme.axes.tickMargin,y:s+1,offsetY:n.theme.axes.fontSize/2,fill:a}}]}var It=om;var _={MA:"Moving Average",BB:"Bollinger Bands",RSI:"Relative Strength Index",STO:"Stochastic",ATR:"Average True Range",MACD:"MACD",ROC:"Rate of Change"},Oe={Datawindow:"Datawindow",Indicators:"Indicators",..._},Ss=n=>({[_.MA]:{indicator:_.MA,active:!0,length:21,colorOptions:[0,1,2,3,4].map(t=>n.colorMap[t]),color:n.colorMap[0],type:"SMA",thickness:1.5},[_.BB]:{indicator:_.BB,active:!1,length:20,stdDev:2,thickness:1},[_.MACD]:{indicator:_.MACD,active:!1,order:1,type:"EMA",fastLength:12,slowLength:26,macdLineColor:n.primary,signalLineLength:8,signalLineColor:n.red,thickness:1,defaultHeight:72},[_.RSI]:{indicator:_.RSI,active:!1,order:2,length:14,colorOptions:[0,1,2,3,4].map(t=>n.colorMap[t]),color:n.colorMap[0],thickness:1.5,upperLine:70,lowerLine:30,defaultHeight:72},[_.ATR]:{indicator:_.ATR,active:!1,order:3,length:7,colorOptions:[0,1,2,3,4].map(t=>n.colorMap[t]),color:n.colorMap[0],thickness:1.5,defaultHeight:72},[_.STO]:{indicator:_.STO,active:!1,order:4,kLength:4,kSmoothing:3,dSmoothing:3,kColor:n.colorMap[0],dColor:n.colorMap[3],upperLine:80,lowerLine:20,thickness:1.5,defaultHeight:72},[_.ROC]:{indicator:_.ROC,active:!1,order:5,length:14,colorOptions:[0,1,2,3,4].map(t=>n.colorMap[t]),color:n.colorMap[0],thickness:1.5,defaultHeight:72}});var Ms=JSON.stringify,{values:Ry}=Object;function cm({config:n,frame:t,x:s,y:o,candle:a}){let l={fontFamily:n.theme.fontFamily,fontStyle:n.theme.fontStyle,fontSize:n.theme.axes.fontSize,text:_momenttimezone2.default.tz(_optionalChain([a, 'optionalAccess', _13 => _13.time]),n.timezone).format(n.timeframe.id==="D1"?"ddd D MMM \u2019YY":"H:mm ddd D MMM \u2019YY"),x:s,y:t.xAxis.yStart+n.theme.axes.tickSize+n.theme.axes.tickMargin,fill:n.theme.crosshair.color},d=new _konva2.default.Text(l).getTextWidth();return[{type:"Line",attrs:{stroke:n.theme.crosshair.lineColor,strokeWidth:1,dash:n.theme.crosshair.lineDash,points:[s,t.mainInner.yStart,s,t.mainInner.yEnd],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.crosshair.lineColor,strokeWidth:1,dash:n.theme.crosshair.lineDash,points:[t.mainInner.xStart,o,t.mainInner.xEnd,o],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.crosshair.tickColor,strokeWidth:1,points:[s,t.xAxis.yStart,s,t.xAxis.yStart+n.theme.axes.tickSize],transformsEnabled:"none",perfectDrawEnabled:!1,listening:!1}},{type:"Rect",attrs:{x:s-1,y:t.xAxis.yStart+n.theme.axes.tickSize-1,width:d+2,height:n.theme.axes.fontSize+2,fill:n.theme.bgColor,perfectDrawEnabled:!1,listening:!1}},{type:"Text",attrs:{...l}}]}function um(){let{config:n,frame:t,data:s,dispatch:o}=M(),a=_react.useRef.call(void 0, ),l=_react.useRef.call(void 0, ),d=ie(a.current),c=se("crosshair"),u="crosshair",h=`${u}:ytick`;return _react.useEffect.call(void 0, ()=>{if(s.series&&c.loaded){let y=function(g){_optionalChain([g, 'access', _14 => _14.sourceEvent, 'optionalAccess', _15 => _15.type])!=="wheel"&&(d.destroy(u),d.destroy(h))};o.on("zoomX.crosshair",y),o.on("zoomY.crosshair",y),o.on("mousemove.crosshair",g=>{g?(d(cm,{key:u,x:g.offsetX,y:g.offsetY,candle:l.current}),_inRange2.default.call(void 0, g.offsetY,t.mainChart.yStart,t.mainChart.yEnd)?d(It,{key:h,x:g.offsetX,y:g.offsetY,fill:n.theme.crosshair.color,text:n.formatters.crosshair.y(_optionalChain([c, 'access', _16 => _16.y, 'optionalAccess', _17 => _17.invert, 'call', _18 => _18(g.offsetY)]))}):d.destroy(h)):(d.destroy(u),d.destroy(h))}),o.on("candle.crosshair",g=>{l.current=g})}},[o,c.loaded,s.seriesId,Ms(t.mainChart),Ms(t.indicatorWindows)]),de.default.createElement(j,{ref:a})}var Ds=um;var _isArray = require('lodash/isArray'); var _isArray2 = _interopRequireDefault(_isArray);var _isEqualWith = require('lodash/isEqualWith'); var _isEqualWith2 = _interopRequireDefault(_isEqualWith);var _isFunction = require('lodash/isFunction'); var _isFunction2 = _interopRequireDefault(_isFunction);var _isObject = require('lodash/isObject'); var _isObject2 = _interopRequireDefault(_isObject);var pm=(n,t,s=9)=>{let o=l=>(d,c)=>typeof d!=typeof c?!1:_isFunction2.default.call(void 0, d)?d.toString()===c.toString():_isArray2.default.call(void 0, d)?d.length===c.length&&d.every((u,h)=>_isEqualWith2.default.call(void 0, u,c[h],o(l-1))):d!==null&&_isObject2.default.call(void 0, d)?l===0?!0:d.$$typeof===Symbol.for("react.element")?d.key===c.key&&_isEqualWith2.default.call(void 0, d.props,c.props,o(l-1)):Object.entries(d).every(([u,h])=>{try{let y=c[u];return _isEqualWith2.default.call(void 0, h,y,o(l-1))}catch (e4){return!1}}):d===c;return _isEqualWith2.default.call(void 0, n,t,o(s))},Zr=pm;var _d3scale = require('d3-scale');var _d3zoom = require('d3-zoom');var _debounce = require('lodash/debounce'); var _debounce2 = _interopRequireDefault(_debounce);var _flatMap = require('lodash/flatMap'); var _flatMap2 = _interopRequireDefault(_flatMap);var _reduce = require('lodash/reduce'); var _reduce2 = _interopRequireDefault(_reduce);var _throttle = require('lodash/throttle'); var _throttle2 = _interopRequireDefault(_throttle);var _milliseconds2 = require('milliseconds'); var _milliseconds3 = _interopRequireDefault(_milliseconds2);var _forEach = require('lodash/forEach'); var _forEach2 = _interopRequireDefault(_forEach);function gm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("YYYY");a[u]||(a[u]=u,o.push({i:l,value:c.format("YYYY"),x:t(l)}))}),o}function ym(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("YYYY"),h=c.format("Q"),y=c.format("MMM");h!=="1"&&h!=="3"||(a[u]||(a[u]={},a[u][h]=h,o.push({i:l,value:h==="1"?c.format("YYYY"):y,x:t(l),emphasize:!0})),a[u]&&!a[u][h]&&(a[u][h]=h,o.push({i:l,value:y,x:t(l)})))}),o}function xm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("YYYY"),h=c.format("Q"),y=c.format("MMM");a[u]||(a[u]={},a[u][h]=h,o.push({i:l,value:h==="1"?c.format("YYYY"):y,x:t(l),emphasize:!0})),a[u]&&!a[u][h]&&(a[u][h]=h,o.push({i:l,value:y,x:t(l)}))}),o}function wm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("YYYY"),h=c.format("MMM");a[u]||(a[u]={},a[u][h]=h,o.push({i:l,value:h==="Jan"?c.format("YYYY"):h,x:t(l),emphasize:h==="Jan"})),a[u]&&!a[u][h]&&(a[u][h]=h,o.push({i:l,value:h==="Jan"?c.format("YYYY"):h,x:t(l)}))}),o}function vm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("M"),h=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/2),"days");a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),!a[u][1]&&c.valueOf()>=h.valueOf()&&(a[u][1]=c,o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function km(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("M"),h=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/3),"days"),y=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/3*2),"days");a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),!a[u][1]&&c.valueOf()>=h.valueOf()&&(a[u][1]=c,o.push({i:l,value:c.format("D"),x:t(l)})),!a[u][2]&&c.valueOf()>=y.valueOf()&&(a[u][2]=c,o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function Cm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("M"),h=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/4),"days"),y=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/4*2),"days"),g=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/4*3),"days");a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),!a[u][1]&&c.valueOf()>=h.valueOf()&&(a[u][1]=c,o.push({i:l,value:c.format("D"),x:t(l)})),!a[u][2]&&c.valueOf()>=y.valueOf()&&(a[u][2]=c,o.push({i:l,value:c.format("D"),x:t(l)})),!a[u][3]&&c.valueOf()>=g.valueOf()&&(a[u][3]=c,o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function Sm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("M"),h=c.format("D");a[u]||(a[u]={},a[u][h]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),a[u]&&!a[u][h]&&(a[u][h]=c,Object.keys(a[u]).length%2===1&&o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function bm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("M"),h=c.format("D");a[u]||(a[u]={},a[u][h]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),a[u]&&!a[u][h]&&(a[u][h]=c,o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function Mm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("D"),h=c.clone().startOf("day").add(12,"hours");a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0})),!a[u][1]&&c.valueOf()>=h.valueOf()&&(a[u][1]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)}))}),o}function Dm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("D");if(a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0})),a[u]&&(c.format("HH")==="12"||c.format("HH")==="14")&&c.format("HH")>_last2.default.call(void 0, a[u]).format("HH")){let h=Object.keys(a[u]).length;a[u][h]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)})}}),o}function $m(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("D");if(!a[u])a[u]=[],a[u][0]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0});else if(a[u]&&c.format("HH")%2===0&&c.format("HH")>_last2.default.call(void 0, a[u]).format("HH")){let h=Object.keys(a[u]).length;a[u][h]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)})}}),o}function _m(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("D");if(!a[u])a[u]=[],a[u][0]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0});else if(a[u]&&c.format("HH")>_last2.default.call(void 0, a[u]).format("HH")){let h=Object.keys(a[u]).length;a[u][h]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)})}}),o}function Tm(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("D"),h=c.format("HH"),y=c.format("mm")<30?0:30,g=h+":"+y;a[u]||(a[u]={},a[u][g]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0})),a[u]&&!a[u][g]&&(a[u][g]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)}))}),o}function Om(n,t,s){let o=[],a={};return _forEach2.default.call(void 0, n,({i:l,time:d})=>{let c=_momenttimezone2.default.call(void 0, d).tz(s),u=c.format("D"),h=c.format("HH"),y=Math.floor(c.format("mm")/15),g=h+":"+y;a[u]||(a[u]={},a[u][g]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0})),a[u]&&!a[u][g]&&(a[u][g]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)}))}),o}function no(n,t,s,o){if(!t.series)return[];let l=o.invert(o.range()[0]+80)-o.invert(o.range()[0]),d=s.domain()[1]-s.domain()[0],c=s.domain()[1]-_last2.default.call(void 0, t.series).i,u=t.series.slice(-Math.ceil(d-c));return l>=_milliseconds3.default.days(180)?gm(u,s,n.timezone):l>=_milliseconds3.default.days(124)?ym(u,s,n.timezone):l>=_milliseconds3.default.days(53)?xm(u,s,n.timezone):l>=_milliseconds3.default.days(22)?wm(u,s,n.timezone):l>=_milliseconds3.default.days(14)?vm(u,s,n.timezone):l>=_milliseconds3.default.days(10)?km(u,s,n.timezone):l>=_milliseconds3.default.days(7)?Cm(u,s,n.timezone):l>=_milliseconds3.default.days(3)?Sm(u,s,n.timezone):l>=_milliseconds3.default.hours(20)||/D/.test(n.timeframe.id)?bm(u,s,n.timezone):l>=_milliseconds3.default.hours(12)?Mm(u,s,n.timezone):l>=_milliseconds3.default.hours(8)?Dm(u,s,n.timezone):l>=_milliseconds3.default.hours(6)?$m(u,s,n.timezone):l>=_milliseconds3.default.hours(1)||/H/.test(n.timeframe.id)?_m(u,s,n.timezone):l>=_milliseconds3.default.minutes(30)?Tm(u,s,n.timezone):Om(u,s,n.timezone)}var io=JSON.stringify;function Im(n,t,s){if(!t.series)return;let o=_d3scale.scaleLinear.call(void 0, ).domain([0,(t.series.length-t.zeroIndex)*n.theme.axes.xEndShiftRatio]).range([s.xAxis.xStart,s.xAxis.xEnd]),a=_d3scale.scaleLinear.call(void 0, ).domain(_optionalChain([t, 'access', _19 => _19.series, 'optionalAccess', _20 => _20.length])?[t.series[t.zeroIndex].time,_last2.default.call(void 0, t.series).time]:[]).range([s.xAxis.xStart,s.xAxis.xEnd]),l=d=>{let c=d.rescaleX(o),u=d.rescaleX(a),h=no(n,t,c,u);return{x:c,xTime:u,xTicks:h}};return{key:[s.xAxis.xEnd,s.xAxis.xStart,t.timeSeriesId].join(":"),transformer:l}}function Pm(n,t,s){if(!t.series)return;let o=_flatMap2.default.call(void 0, t.series.slice(t.zeroIndex),({open:d,high:c,low:u,close:h})=>[d,c,u,h]),a=_d3scale.scaleLinear.call(void 0, ).domain([Math.min(...o),Math.max(...o)]).range([s.yAxis.yEnd,s.yAxis.yStart]).nice(),l=d=>{let c=d.rescaleY(a),u=_reduce2.default.call(void 0, c.copy().nice().ticks(),(h,y,g)=>{let x=c(y);return g>0&&x>h.yEnd-n.theme.axes.minTickSpaceY?h:{yEnd:x-n.theme.axes.fontSize,ticks:[...h.ticks,{value:y,y:x}]}},{yEnd:s.mainChart.yEnd,ticks:[]}).ticks;return{y:c,yTicks:u}};return{key:[s.yAxis.yEnd,s.yAxis.yStart,t.scaleId].join(":"),transformer:l}}function Os(){let{frame:n,config:t,data:s,dispatch:o}=M(),a=_react.useRef.call(void 0, _d3zoom.zoomIdentity),l=_react.useMemo.call(void 0, ()=>Im(t,s,n),[s.timeSeriesId,io(n.xAxis)]),{key:d,transformer:c}=l||{};_react.useEffect.call(void 0, ()=>{s.seriesId&&(o.call("scale",null,c(a.current)),o.on("zoomX.xAxis",u=>{a.current=u,o.call("scale",null,c(a.current))}))},[o,d]),_react.useEffect.call(void 0, ()=>{d&&o.call("scale",null,c(a.current))},[d,c])}function As(){let{frame:n,config:t,data:s,dispatch:o}=M(),a=_react.useRef.call(void 0, _d3zoom.zoomIdentity),l=_react.useMemo.call(void 0, ()=>Pm(t,s,n),[s.scaleId,io(n)]),{key:d,transformer:c}=l||{};_react.useEffect.call(void 0, ()=>{s.series&&(o.call("scale",null,c(a.current)),o.on("zoomY.yAxis",_throttle2.default.call(void 0, u=>{a.current=u,o.call("scale",null,c(a.current))},50)))},[o,d]),_react.useEffect.call(void 0, ()=>{d&&o.call("scale",null,c(a.current))},[d,c])}function Ls(n){let{frame:t,config:s,data:o,dispatch:a}=M();_react.useEffect.call(void 0, ()=>{if(o.series&&typeof n=="function"){let l=0;[...s.indicators.windows,...s.indicators.mainChart].filter(c=>c.active).forEach(c=>{c.indicator==="MACD"&&(l=Math.max(l,Number(c.slowLength)+Number(c.signalLineLength))),["Moving Average","Bollinger Bands","Relative Strength Index"].includes(c.indicator)&&(l=Math.max(l,Number(c.length)))});let d=_debounce2.default.call(void 0, c=>{let u=c.invert(t.mainChart.xStart),h=Math.abs(u)+l,y=Math.abs(o.series[0].i),g=Math.ceil(h-y);g>0&&n(g)},500);a.on("scale.onLoadMore",c=>{c.x&&d(c.x)})}},[a,n,o.seriesId,io(s.indicators)])}function so(){let{config:n,data:t,dispatch:s}=M(),o=se("candleDispatcher");_react.useEffect.call(void 0, ()=>{if(t.series){let a=Object.fromEntries(t.series.map(l=>[l.i,l]));o.onChange(()=>{s.on("mousemove.candleDispatcher",l=>{if(_optionalChain([l, 'optionalAccess', _21 => _21.offsetX])){let d=Math.floor(o.x.invert(l.offsetX)),c=d<t.series[0].i?t.series[0]:a[d];s.call("candle",null,c)}else s.call("candle",null,null)})})}},[s,t.seriesId])}function or(n,t){let s=0,o=0;if(t===void 0)for(let a of n)a!=null&&(a=+a)>=a&&(++s,o+=a);else{let a=-1;for(let l of n)(l=t(l,++a,n))!=null&&(l=+l)>=l&&(++s,o+=l)}if(s)return o/s}var _d3selection = require('d3-selection');var Rm=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get(){Rm=!0}}))}catch (e5){}var px="onwheel"in document.createElement("div")?"wheel":"mousewheel";function ao(){return _react.useRef.call(void 0, )}var Um=JSON.stringify;function uo(n){let{config:t,data:s,frame:o,dispatch:a}=M(),l=_react.useRef.call(void 0, ),d=_react.useRef.call(void 0, ),c=_react.useRef.call(void 0, _d3zoom.zoomIdentity),u=se("zoomDispatch"),h=ao();l.current=t.tool;let y=_optionalChain([n, 'access', _22 => _22.current, 'optionalAccess', _23 => _23.getCanvas, 'call', _24 => _24()]);_react.useEffect.call(void 0, ()=>{if(y&&s.seriesId&&u.loaded){let H=function(b){if(b.sourceEvent){let Z=_d3selection.pointers.call(void 0, b,b.sourceEvent.target);return[or(Z,F=>F[0]),or(Z,F=>F[1])]}return[o.mainInner.width/2,o.mainInner.height/2]},g=_d3selection.select.call(void 0, y._canvas);g.interrupt=()=>g;let x=_d3selection.create.call(void 0, "svg").attr("viewBox",[o.mainInner.xStart,o.mainInner.yStart,o.mainInner.width,o.mainInner.height]),C=x.append("g"),k=x.append("g");C.interrupt=()=>C,k.interrupt=()=>k;let D=_d3zoom.zoom.call(void 0, ).scaleExtent([.1,10]).on("zoom",b=>{a.call("zoomX",null,b.transform)}),$=_d3zoom.zoom.call(void 0, ).scaleExtent([.2,5]).on("zoom",b=>{a.call("zoomY",null,b.transform)}),I=()=>_d3zoom.zoomTransform.call(void 0, C.node()),W=()=>_d3zoom.zoomTransform.call(void 0, k.node()),B=_d3zoom.zoom.call(void 0, ).filter(b=>l.current==="crosshair"&&!d.current&&(b.type!=="wheel"||_optionalChain([h, 'access', _25 => _25.current, 'optionalAccess', _26 => _26.metaKey]))&&_inRange2.default.call(void 0, b.offsetX,o.mainInner.xStart,o.mainInner.xEnd)&&_inRange2.default.call(void 0, b.offsetY,o.mainInner.yStart,o.mainInner.yEnd)).on("zoom",b=>{let Z=c.current,F=b.transform,Se=F.k/Z.k,ne=H(b,this),ce=["mousemove","dragX","dblclick","wheel"].includes(_optionalChain([b, 'access', _27 => _27.sourceEvent, 'optionalAccess', _28 => _28.type])),A=["mousemove","dragY"].includes(_optionalChain([b, 'access', _29 => _29.sourceEvent, 'optionalAccess', _30 => _30.type]));Se===1?(ce&&C.call(D.translateBy,(F.x-Z.x)/I().k,0),A&&k.call($.translateBy,0,(F.y-Z.y)/W().k)):(ce&&C.call(D.scaleBy,Se,ne),A&&k.call($.scaleBy,Se,ne)),c.current=F}),U=b=>{g.call(B.transform,b),C.call(D.transform,b),k.call($.transform,b)};return U(_d3zoom.zoomIdentity),g.call(B),a.on("dragX.zoom",({evt:b,dx:Z})=>{let F=1-Z/(o.xAxis.width/2);g.call(B.scaleBy,F,null,{sourceEvent:b,type:"dragX"})}),a.on("dragY.zoom",({evt:b,dy:Z})=>{let F=1-Z/o.yAxis.height;g.call(B.scaleBy,F,null,{sourceEvent:b,type:"dragY"})}),a.on("hoverDrawing.zoom",b=>{d.current=b}),a.on("resetZoom.zoom",()=>U(_d3zoom.zoomIdentity)),()=>{B.on("zoom",null)}}},[!!y,Um(o.mainInner),s.scaleId,u.loaded,!!c.current])}var mo=JSON.stringify;function Zm({onLoadMore:n}){let{config:t}=M(),s=_react.useRef.call(void 0, );return so(),uo(s),Os(),As(),Ls(n),(typeof window<"u"&&typeof document<"u"?document.body.clientWidth<t.mobileThreshold:!1)?de.default.createElement(j,null,de.default.createElement(_reactkonvautils.Html,{divProps:{style:{zIndex:1,width:"100%"}}},de.default.createElement(_div2.default,{$absolute:!0,$left:0,$top:0,$width:t.width,$height:t.height}))):de.default.createElement(j,{ref:s,x:0,y:0,width:t.width,height:t.height},de.default.createElement(qm,null))}function qm(){let{config:n,frame:t,dispatch:s,setCursor:o}=M(),a=_react.useRef.call(void 0, ),[l,d]=_react.useState.call(void 0, ),[c,u]=_react.useState.call(void 0, ),h=({evt:x})=>{s.call("pointerdown",null,x),n.tool==="crosshair"&&(o("grabbing"),document.body.addEventListener("pointerup",()=>o("crosshair"),{once:!0}))},y=({evt:x})=>{s.call("pointerup",null,x)},g=({evt:x})=>{s.call("mousemove",null,x)};return de.default.createElement(de.default.Fragment,null,de.default.createElement(Te,{key:mo(t.mainInner),x:t.mainInner.xStart,y:t.mainInner.yStart,width:t.mainInner.width,height:t.mainInner.height,onMouseEnter:()=>o("crosshair"),onPointerDown:h,onPointerUp:y,onMouseLeave:()=>{o("default"),s.call("mousemove",null,null)},onMouseMove:g,onContextMenu:({evt:x})=>{x.preventDefault(),s.call("contextmenu",null,x)},transformsEnabled:"position",perfectDrawEnabled:!1}),de.default.createElement(Te,{key:mo(t.yAxis),x:t.yAxis.xStart,y:t.yAxis.yStart,width:t.yAxis.width,height:t.yAxis.height,fill:c?n.theme.axes.hoverColor:void 0,onMouseEnter:()=>{o("ns-resize"),u(!0)},onMouseLeave:()=>{o("default"),u(!1)},onPointerDown:({evt:x})=>{a.current={},a.current.initY=x.offsetY,document.body.addEventListener("pointerup",()=>{a.current=null},{once:!0})},onMouseMove:({evt:x})=>{a.current&&(a.current.deltaY=x.offsetY-a.current.initY,s.call("dragY",null,{evt:x,dy:a.current.deltaY}),a.current.initY=x.offsetY)},transformsEnabled:"position",perfectDrawEnabled:!1}),de.default.createElement(Te,{key:mo(t.xAxis),x:t.xAxis.xStart,y:t.xAxis.yStart,width:t.xAxis.width,height:t.xAxis.height+8,fill:l?n.theme.axes.hoverColor:void 0,onMouseEnter:()=>{o("ew-resize"),d(!0)},onMouseLeave:()=>{o("default"),d(!1)},onPointerDown:({evt:x})=>{a.current={},a.current.initX=x.offsetX,document.body.addEventListener("pointerup",()=>{a.current=null},{once:!0})},onMouseMove:({evt:x})=>{a.current&&(a.current.deltaX=x.offsetX-a.current.initX,s.call("dragX",null,{evt:x,dx:a.current.deltaX}),a.current.initX=x.offsetX)},transformsEnabled:"position",perfectDrawEnabled:!1}))}var Ps=_react.memo.call(void 0, Zm,Zr);function ho({x:n,y:t,size:s=10,color:o}){return de.default.createElement(de.default.Fragment,null,de.default.createElement(Gn,{stroke:o,strokeWidth:1.5,points:[n,t,n+s/2,t+s/2],lineCap:"round"}),de.default.createElement(Gn,{stroke:o,strokeWidth:1.5,points:[n+s/2,t+s/2,n+s,t],lineCap:"round"}))}var Jr=Math.min,yt=Math.max,ir=Math.round;var Je=n=>({x:n,y:n});function po(n){return n.split("-")[0]}function zs(n){return n.split("-")[1]}function Rs(n){return n==="x"?"y":"x"}function Hs(n){return n==="y"?"height":"width"}function go(n){return["top","bottom"].includes(po(n))?"y":"x"}function Ns(n){return Rs(go(n))}function sr(n){let{x:t,y:s,width:o,height:a}=n;return{width:o,height:a,top:s,left:t,right:t+o,bottom:s+a,x:t,y:s}}function Fs(n,t,s){let{reference:o,floating:a}=n,l=go(t),d=Ns(t),c=Hs(d),u=po(t),h=l==="y",y=o.x+o.width/2-a.width/2,g=o.y+o.height/2-a.height/2,x=o[c]/2-a[c]/2,C;switch(u){case"top":C={x:y,y:o.y-a.height};break;case"bottom":C={x:y,y:o.y+o.height};break;case"right":C={x:o.x+o.width,y:g};break;case"left":C={x:o.x-a.width,y:g};break;default:C={x:o.x,y:o.y}}switch(zs(t)){case"start":C[d]-=x*(s&&h?-1:1);break;case"end":C[d]+=x*(s&&h?-1:1);break}return C}var Bs=async(n,t,s)=>{let{placement:o="bottom",strategy:a="absolute",middleware:l=[],platform:d}=s,c=l.filter(Boolean),u=await(d.isRTL==null?void 0:d.isRTL(t)),h=await d.getElementRects({reference:n,floating:t,strategy:a}),{x:y,y:g}=Fs(h,o,u),x=o,C={},k=0;for(let D=0;D<c.length;D++){let{name:$,fn:I}=c[D],{x:W,y:H,data:B,reset:U}=await I({x:y,y:g,initialPlacement:o,placement:x,strategy:a,middlewareData:C,rects:h,platform:d,elements:{reference:n,floating:t}});y=_nullishCoalesce(W, () => (y)),g=_nullishCoalesce(H, () => (g)),C={...C,[$]:{...C[$],...B}},U&&k<=50&&(k++,typeof U=="object"&&(U.placement&&(x=U.placement),U.rects&&(h=U.rects===!0?await d.getElementRects({reference:n,floating:t,strategy:a}):U.rects),{x:y,y:g}=Fs(h,x,u)),D=-1)}return{x:y,y:g,placement:x,strategy:a,middlewareData:C}};function xt(n){return Us(n)?(n.nodeName||"").toLowerCase():"#document"}function Ce(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function et(n){var t;return(t=(Us(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function Us(n){return n instanceof Node||n instanceof Ce(n).Node}function Ae(n){return n instanceof Element||n instanceof Ce(n).Element}function We(n){return n instanceof HTMLElement||n instanceof Ce(n).HTMLElement}function Vs(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ce(n).ShadowRoot}function Pt(n){let{overflow:t,overflowX:s,overflowY:o,display:a}=Le(n);return/auto|scroll|overlay|hidden|clip/.test(t+o+s)&&!["inline","contents"].includes(a)}function js(n){return["table","td","th"].includes(xt(n))}function ar(n){return[":popover-open",":modal"].some(t=>{try{return n.matches(t)}catch (e6){return!1}})}function en(n){let t=tn(),s=Ae(n)?Le(n):n;return s.transform!=="none"||s.perspective!=="none"||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(s.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(s.contain||"").includes(o))}function Gs(n){let t=Qe(n);for(;We(t)&&!wt(t);){if(en(t))return t;if(ar(t))return null;t=Qe(t)}return null}function tn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wt(n){return["html","body","#document"].includes(xt(n))}function Le(n){return Ce(n).getComputedStyle(n)}function lr(n){return Ae(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Qe(n){if(xt(n)==="html")return n;let t=n.assignedSlot||n.parentNode||Vs(n)&&n.host||et(n);return Vs(t)?t.host:t}function Xs(n){let t=Qe(n);return wt(t)?n.ownerDocument?n.ownerDocument.body:n.body:We(t)&&Pt(t)?t:Xs(t)}function Qr(n,t,s){var o;t===void 0&&(t=[]),s===void 0&&(s=!0);let a=Xs(n),l=a===((o=n.ownerDocument)==null?void 0:o.body),d=Ce(a);if(l){let c=rn(d);return t.concat(d,d.visualViewport||[],Pt(a)?a:[],c&&s?Qr(c):[])}return t.concat(a,Qr(a,[],s))}function rn(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Ks(n){let t=Le(n),s=parseFloat(t.width)||0,o=parseFloat(t.height)||0,a=We(n),l=a?n.offsetWidth:s,d=a?n.offsetHeight:o,c=ir(s)!==l||ir(o)!==d;return c&&(s=l,o=d),{width:s,height:o,$:c}}function Js(n){return Ae(n)?n:n.contextElement}function zt(n){let t=Js(n);if(!We(t))return Je(1);let s=t.getBoundingClientRect(),{width:o,height:a,$:l}=Ks(t),d=(l?ir(s.width):s.width)/o,c=(l?ir(s.height):s.height)/a;return(!d||!Number.isFinite(d))&&(d=1),(!c||!Number.isFinite(c))&&(c=1),{x:d,y:c}}var Km=Je(0);function Qs(n){let t=Ce(n);return!tn()||!t.visualViewport?Km:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Jm(n,t,s){return t===void 0&&(t=!1),!s||t&&s!==Ce(n)?!1:t}function fr(n,t,s,o){t===void 0&&(t=!1),s===void 0&&(s=!1);let a=n.getBoundingClientRect(),l=Js(n),d=Je(1);t&&(o?Ae(o)&&(d=zt(o)):d=zt(n));let c=Jm(l,s,o)?Qs(l):Je(0),u=(a.left+c.x)/d.x,h=(a.top+c.y)/d.y,y=a.width/d.x,g=a.height/d.y;if(l){let x=Ce(l),C=o&&Ae(o)?Ce(o):o,k=x,D=rn(k);for(;D&&o&&C!==k;){let $=zt(D),I=D.getBoundingClientRect(),W=Le(D),H=I.left+(D.clientLeft+parseFloat(W.paddingLeft))*$.x,B=I.top+(D.clientTop+parseFloat(W.paddingTop))*$.y;u*=$.x,h*=$.y,y*=$.x,g*=$.y,u+=H,h+=B,k=Ce(D),D=rn(k)}}return sr({width:y,height:g,x:u,y:h})}function Qm(n){let{elements:t,rect:s,offsetParent:o,strategy:a}=n,l=a==="fixed",d=et(o),c=t?ar(t.floating):!1;if(o===d||c&&l)return s;let u={scrollLeft:0,scrollTop:0},h=Je(1),y=Je(0),g=We(o);if((g||!g&&!l)&&((xt(o)!=="body"||Pt(d))&&(u=lr(o)),We(o))){let x=fr(o);h=zt(o),y.x=x.x+o.clientLeft,y.y=x.y+o.clientTop}return{width:s.width*h.x,height:s.height*h.y,x:s.x*h.x-u.scrollLeft*h.x+y.x,y:s.y*h.y-u.scrollTop*h.y+y.y}}function eh(n){return Array.from(n.getClientRects())}function ea(n){return fr(et(n)).left+lr(n).scrollLeft}function th(n){let t=et(n),s=lr(n),o=n.ownerDocument.body,a=yt(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),l=yt(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),d=-s.scrollLeft+ea(n),c=-s.scrollTop;return Le(o).direction==="rtl"&&(d+=yt(t.clientWidth,o.clientWidth)-a),{width:a,height:l,x:d,y:c}}function rh(n,t){let s=Ce(n),o=et(n),a=s.visualViewport,l=o.clientWidth,d=o.clientHeight,c=0,u=0;if(a){l=a.width,d=a.height;let h=tn();(!h||h&&t==="fixed")&&(c=a.offsetLeft,u=a.offsetTop)}return{width:l,height:d,x:c,y:u}}function nh(n,t){let s=fr(n,!0,t==="fixed"),o=s.top+n.clientTop,a=s.left+n.clientLeft,l=We(n)?zt(n):Je(1),d=n.clientWidth*l.x,c=n.clientHeight*l.y,u=a*l.x,h=o*l.y;return{width:d,height:c,x:u,y:h}}function Zs(n,t,s){let o;if(t==="viewport")o=rh(n,s);else if(t==="document")o=th(et(n));else if(Ae(t))o=nh(t,s);else{let a=Qs(n);o={...t,x:t.x-a.x,y:t.y-a.y}}return sr(o)}function ta(n,t){let s=Qe(n);return s===t||!Ae(s)||wt(s)?!1:Le(s).position==="fixed"||ta(s,t)}function oh(n,t){let s=t.get(n);if(s)return s;let o=Qr(n,[],!1).filter(c=>Ae(c)&&xt(c)!=="body"),a=null,l=Le(n).position==="fixed",d=l?Qe(n):n;for(;Ae(d)&&!wt(d);){let c=Le(d),u=en(d);!u&&c.position==="fixed"&&(a=null),(l?!u&&!a:!u&&c.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Pt(d)&&!u&&ta(n,d))?o=o.filter(y=>y!==d):a=c,d=Qe(d)}return t.set(n,o),o}function ih(n){let{element:t,boundary:s,rootBoundary:o,strategy:a}=n,d=[...s==="clippingAncestors"?ar(t)?[]:oh(t,this._c):[].concat(s),o],c=d[0],u=d.reduce((h,y)=>{let g=Zs(t,y,a);return h.top=yt(g.top,h.top),h.right=Jr(g.right,h.right),h.bottom=Jr(g.bottom,h.bottom),h.left=yt(g.left,h.left),h},Zs(t,c,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function sh(n){let{width:t,height:s}=Ks(n);return{width:t,height:s}}function ah(n,t,s){let o=We(t),a=et(t),l=s==="fixed",d=fr(n,!0,l,t),c={scrollLeft:0,scrollTop:0},u=Je(0);if(o||!o&&!l)if((xt(t)!=="body"||Pt(a))&&(c=lr(t)),o){let g=fr(t,!0,l,t);u.x=g.x+t.clientLeft,u.y=g.y+t.clientTop}else a&&(u.x=ea(a));let h=d.left+c.scrollLeft-u.x,y=d.top+c.scrollTop-u.y;return{x:h,y,width:d.width,height:d.height}}function yo(n){return Le(n).position==="static"}function qs(n,t){return!We(n)||Le(n).position==="fixed"?null:t?t(n):n.offsetParent}function ra(n,t){let s=Ce(n);if(ar(n))return s;if(!We(n)){let a=Qe(n);for(;a&&!wt(a);){if(Ae(a)&&!yo(a))return a;a=Qe(a)}return s}let o=qs(n,t);for(;o&&js(o)&&yo(o);)o=qs(o,t);return o&&wt(o)&&yo(o)&&!en(o)?s:o||Gs(n)||s}var lh=async function(n){let t=this.getOffsetParent||ra,s=this.getDimensions,o=await s(n.floating);return{reference:ah(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function fh(n){return Le(n).direction==="rtl"}var ch={convertOffsetParentRelativeRectToViewportRelativeRect:Qm,getDocumentElement:et,getClippingRect:ih,getOffsetParent:ra,getElementRects:lh,getClientRects:eh,getDimensions:sh,getScale:zt,isElement:Ae,isRTL:fh};var na=(n,t,s)=>{let o=new Map,a={platform:ch,...s},l={...a.platform,_c:o};return Bs(n,t,{...a,platform:l})};var _reactdom = require('react-dom'); var ia = _interopRequireWildcard(_reactdom);var nn=typeof document<"u"?_react.useLayoutEffect:_react.useEffect;function on(n,t){if(n===t)return!0;if(typeof n!=typeof t)return!1;if(typeof n=="function"&&n.toString()===t.toString())return!0;let s,o,a;if(n&&t&&typeof n=="object"){if(Array.isArray(n)){if(s=n.length,s!=t.length)return!1;for(o=s;o--!==0;)if(!on(n[o],t[o]))return!1;return!0}if(a=Object.keys(n),s=a.length,s!==Object.keys(t).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=s;o--!==0;){let l=a[o];if(!(l==="_owner"&&n.$$typeof)&&!on(n[l],t[l]))return!1}return!0}return n!==n&&t!==t}function oa(n){let t=de.useRef(n);return nn(()=>{t.current=n}),t}function sa(n){n===void 0&&(n={});let{placement:t="bottom",strategy:s="absolute",middleware:o=[],platform:a,whileElementsMounted:l,open:d}=n,[c,u]=de.useState({x:null,y:null,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[h,y]=de.useState(o);on(h,o)||y(o);let g=de.useRef(null),x=de.useRef(null),C=de.useRef(c),k=oa(l),D=oa(a),[$,I]=de.useState(null),[W,H]=de.useState(null),B=de.useCallback(ne=>{g.current!==ne&&(g.current=ne,I(ne))},[]),U=de.useCallback(ne=>{x.current!==ne&&(x.current=ne,H(ne))},[]),b=de.useCallback(()=>{if(!g.current||!x.current)return;let ne={placement:t,strategy:s,middleware:h};D.current&&(ne.platform=D.current),na(g.current,x.current,ne).then(ce=>{let A={...ce,isPositioned:!0};Z.current&&!on(C.current,A)&&(C.current=A,ia.flushSync(()=>{u(A)}))})},[h,t,s,D]);nn(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,u(ne=>({...ne,isPositioned:!1})))},[d]);let Z=de.useRef(!1);nn(()=>(Z.current=!0,()=>{Z.current=!1}),[]),nn(()=>{if($&&W){if(k.current)return k.current($,W,b);b()}},[$,W,b,k]);let F=de.useMemo(()=>({reference:g,floating:x,setReference:B,setFloating:U}),[B,U]),Se=de.useMemo(()=>({reference:$,floating:W}),[$,W]);return de.useMemo(()=>({...c,update:b,refs:F,elements:Se,reference:B,floating:U}),[c,b,F,Se,B,U])}var _Fullscreen = require('@styled-icons/boxicons-regular/Fullscreen');var _AngleDown = require('@styled-icons/fa-solid/AngleDown');var aa="./crosshair-2DYM4UMP.svg";var fa=_chunkOM3S2DITcjs.c.call(void 0, la(),1);function hh(n,t){let s={};s.link=document.createElement("a"),s.link.download=t,s.link.href=n,document.body.appendChild(s.link),s.link.click(),document.body.removeChild(s.link),delete s.link}function ph(n,t){let s=n.current.toDataURL({mimeType:"image/png",pixelRatio:window.devicePixelRatio}),o=t.replace(/{date}/,(0,fa.default)().format("YYYY-MM-DD HH:mm")).replace(/{fileType}/,"png");hh(s,o)}function wo(){let{stageRef:n,config:t}=M();return()=>ph(n,t.screenshotFileFormat)}var _reactoutsideclickhandler = require('react-outside-click-handler'); var _reactoutsideclickhandler2 = _interopRequireDefault(_reactoutsideclickhandler);var _get = require('lodash/get'); var _get2 = _interopRequireDefault(_get);function sn(n,t=[],s=typeof window<"u"&&document.body){let[o,a]=_react.useState.call(void 0, {});return _react.useEffect.call(void 0, ()=>{let l,d=_optionalChain([n, 'optionalAccess', _31 => _31.current])||s;return d&&(a({width:d.clientWidth,height:d.clientHeight}),t.length||(l=new ResizeObserver(c=>{requestAnimationFrame(()=>{a({width:_get2.default.call(void 0, c,"0.target.clientWidth",0),height:_get2.default.call(void 0, c,"0.target.clientHeight",0)})})}),l.observe(d))),()=>{l&&(l.disconnect(),l=null)}},[_optionalChain([n, 'optionalAccess', _32 => _32.current]),...t]),[o.width,o.height,o.breakpoints||{}]}function He({children:n,x:t,xOffset:s=0,y:o,yOffset:a=0,onOutsideClick:l=()=>{},hideCloseIcon:d,showAngle:c=!0,$display:u="block",zIndex:h=3,...y}){let{config:g}=M(),x=_react.useRef.call(void 0, ),[,C]=sn(),[,k]=sn(x),[D,$]=_react.useState.call(void 0, );_react.useEffect.call(void 0, ()=>{$(typeof window<"u"&&typeof document<"u"?document.body.clientWidth<g.mobileThreshold:!1)},[g.mobileThreshold]);let I={left:{$right:0+s},right:{$left:0+s},center:{$left:"50%",$transform:s?`translateX(calc(-50% + ${s}px))`:"translateX(-50%)"}},W={top:{$bottom:`calc(100% + 4px + ${a}px)`},bottom:{$top:`calc(100% + 4px + ${a}px)`}},H={left:{$right:"21px",$transform:"rotate(45deg)"},center:{$left:"50%",$transform:"translateX(-50%) rotate(45deg)"},right:{$left:"21px",$transform:"rotate(45deg)"}},B={left:{$right:"20px",$transform:"rotate(45deg)"},center:{$left:"50%",$transform:"translateX(-50%) rotate(45deg)"},right:{$left:"20px",$transform:"rotate(45deg)"}},U={top:{$bottom:-8},bottom:{$top:-8}},b={top:{$bottom:-6},bottom:{$top:-6}},Z=de.default.createElement(_reactoutsideclickhandler2.default,{onOutsideClick:l},D&&["block","flex"].includes(u)&&de.default.createElement(_div2.default,{$cover:!0,$fixed:!0,$z:g.theme.popoverMenu.zIndex-1,$background:"rgba(0, 0, 0, 0.7)",onClick:l}),de.default.createElement(_div2.default,{$display:u,$minW:256,$background:g.theme.popoverMenu.background,$border:g.theme.popoverMenu.borderColor,$mobile$borderBottom:"none",$boxShadow:"0 0 2px 1px rgba(0, 0, 0, .3)",onClick:F=>F.stopPropagation(),...y,...D?{$fixed:!0,$z:g.theme.popoverMenu.zIndex,$left:8,$right:8,$bottom:0,$w:"auto",$h:k?`${Math.min(k+24,C/2)}px`:"auto",$radius:[10,10,0,0]}:{$absolute:!0,$z:h,$radius:10,...I[t],...W[o],...y.$left&&{$left:y.$left},...y.$top&&{$top:y.$top}}},D&&!d&&de.default.createElement(tr,{onClick:l}),!D&&c&&de.default.createElement(de.default.Fragment,null,de.default.createElement(_div2.default,{$absolute:!0,$zIndex:2,$w:16,$h:16,$background:g.theme.popoverMenu.background,...B[t],...b[o]}),de.default.createElement(_div2.default,{$absolute:!0,$zIndex:1,$w:14,$h:14,$background:g.theme.popoverMenu.borderColor,$boxShadow:"0 0 2px 1px rgba(0, 0, 0, .3)",...H[t],...U[o]})),de.default.createElement(_div2.default,{ref:x,$display:u,$h:"auto",className:"popover-inner"},n)));return D===void 0?null:D?_reactdom.createPortal.call(void 0, Z,document.getElementById("streamlined-container")):Z}function ae(n,t,s){if(!n||!Array.isArray(n))return[];let o=typeof t=="number"?t:n.findIndex(t);if(o===-1)return n;let a=[...n];return typeof s=="function"?a[o]=s(n[o]):a[o]=s,a}var _uniq = require('lodash/uniq'); var _uniq2 = _interopRequireDefault(_uniq);function rt({label:n="Color",options:t,value:s,setValue:o}){let{config:a}=M();return de.default.createElement(_div.Div,{$px:1.25,$py:1,$borderTop:a.theme.indicatorsMenu.borderColor},de.default.createElement(_div.Text,{$size:13,$color:a.theme.indicatorsMenu.labelColor,$mb:.5},n),de.default.createElement(_div.Div,{$flex:!0},_uniq2.default.call(void 0, t).map(l=>de.default.createElement(_div.Div,{as:"button",key:l,$shrink:0,$w:24,$h:24,$radius:"50%",$border:`1.5px solid ${l}`,$background:s===l?l:void 0,$mr:.5,onClick:()=>o(l)}))))}var Oh=_styledcomponents2.default.input`
  width: 100%;
  border-radius: 8px;
  border: 1px solid ${n=>n.$bgColor};
  background-color: ${n=>n.$bgColor};
  box-shadow: inset 0 0 0 1px transparent;
  padding: 12px 16px;
  outline: 0;
  line-height: 20px;
  font-weight: 500;
  transition: all 0.2s;
  color: ${n=>n.$color};

  ${n=>n.value?_styledcomponents.css`
          border-color: ${n.$bgColor};
          background-color: ${n.$bgColor};
        `:_styledcomponents.css`
          &:not([readonly]):not(:focus):hover {
            border-color: ${n.$bgColorHover};
            background-color: ${n.$bgColorHover};
          }
        `}

  &.is-focused,
  &:not([readonly]):focus {
    border-color: ${n=>n.$primary};
    box-shadow: inset 0 0 0 1px ${n=>_polished.transparentize.call(void 0, .5,n.$primary)};
    background-color: ${n=>n.$bgColor};
  }

  &[readonly] {
    color: rgba(51, 51, 51, 0.6);
    cursor: not-allowed;
  }

  ${n=>n.css};
  ${n=>_div.divMixin.call(void 0, n)};
`,Ah=de.default.forwardRef((n,t)=>{let{config:s}=M(),{id:o,name:a,placeholder:l,as:d="input",css:c,wrapperProps:u,children:h,value:y,focus:g,autofocus:x,...C}=n,{rest:k,wrapperDivProps:D}=Object.entries(C).reduce((W,[H,B])=>(H.startsWith("$")?W.wrapperDivProps[H.slice(1)]=B===0?"0":B:W.rest[H]=B,W),{rest:{},wrapperDivProps:{}}),[$,I]=_react.useState.call(void 0, !1);return _react.useEffect.call(void 0, ()=>{!$&&y&&I(!0)},[$,y]),de.default.createElement(_div.Div,{$relative:!0,$mb:2,$maxW:342,css:c,...u,...D},de.default.createElement(_div.Div,{$w:"100%"},de.default.createElement(Oh,{as:d,id:o||a,name:a,ref:W=>{x&&W&&W.focus(),t&&(t.current=W)},value:y,placeholder:l,className:g?"is-focused":"",$primary:s.theme.primary,$color:s.theme.input.color,$bgColor:s.theme.input.bgColor,$bgColorHover:s.theme.input.bgColorHover,...k},h)))}),ma=Ah;function ee({label:n,value:t,setValue:s}){let{config:o}=M();return de.default.createElement(_div.Div,{$px:1.25,$py:1,$borderTop:o.theme.indicatorsMenu.borderColor},de.default.createElement(_div.Text,{$size:13,$color:o.theme.indicatorsMenu.labelColor,$mb:.5},n),de.default.createElement(ma,{type:"number",name:n,onChange:a=>s(a.target.value),value:Math.abs(t),min:0,wrapperProps:{$maxW:"auto",$mb:0}}))}var Ih=_styledcomponents.keyframes`
  0% {
    transform: translate3d(-100%, 0, 0);
  }

  100% {
    transform: translate3d(100%, 0, 0);
  }
`;function ur({text:n,width:t="100%",$w:s,$width:o,height:a=100,$h:l,$height:d,progress:c,small:u=!1,color:h="#0094FF",...y}){return de.default.createElement(_div.Div,{$flex:!0,$column:!0,$innerCenter:!0,$w:s||o||t,$h:l||d||a,...y},de.default.createElement(_div.Div,{$relative:!0,$w:u?18:22,$h:2,$overflow:"hidden",$radius:2},de.default.createElement(_div.Div,{$absolute:!0,$top:0,$left:0,$w:u?18:22,$h:2,$radius:2,$background:h,$css:_styledcomponents.css`
            animation: ${Ih} 1s ease infinite;
          `})))}var Hh={xl:{height:52,fontSize:16,fontWeight:600,px:1.5},large:{height:46,fontSize:14,px:1.25},medium:{height:42,fontSize:14,px:1},small:{height:34,fontSize:13,px:.75},xs:{height:24,fontSize:13,px:.5}};function Nh({primary:n,primaryWhite:t,secondary:s,invisible:o,danger:a,buy:l,sell:d,children:c,disabled:u,rounded:h,loading:y,onClick:g,active:x,size:C="large",...k},D){let{config:$}=M(),I={$border:x?$.theme.button.borderColorActive:$.theme.button.borderColor,$border$hover:x?$.theme.button.borderColorActive:$.theme.button.borderColorHover,$boxShadow:`inset 0 0 0 1px ${x?_polished.transparentize.call(void 0, .5,$.theme.button.borderColorActive):"transparent"}`,$color:x?$.theme.button.colorActive:$.theme.button.color,$color$hover:x?$.theme.button.colorActive:$.theme.button.colorHover},{height:W,fontSize:H,fontWeight:B,px:U}=Hh[C];return de.default.createElement(_div2.default,{as:"button",ref:D,$inlineFlex:!0,$innerCenter:!0,$h:W,$radius:h?W/2:8,$px:U,$fontSize:H,$fontWeight:B,$cursor:u?"default":"pointer",onClick:u?void 0:g,...I,...k},y?de.default.createElement(ur,null):c)}var nt=_react.forwardRef.call(void 0, Nh);function ot({label:n="Thickness",value:t,setValue:s}){let{config:o}=M();return de.default.createElement(_div.Div,{$px:1.25,$py:1,$borderTop:o.theme.indicatorsMenu.borderColor},de.default.createElement(_div.Text,{$size:13,$color:o.theme.indicatorsMenu.labelColor,$mb:.5},n),de.default.createElement(_div.Div,{$flex:!0},[1,1.5,2,2.5,3].map(a=>de.default.createElement(nt,{key:a,size:"xs",$mr:.5,active:a===t,onClick:()=>s(a),$background:o.theme.indicatorsMenu.buttonBgColor,$border:a===t?o.theme.primary:o.theme.indicatorsMenu.buttonBgColor},de.default.createElement(_div.Div,{$w:18,$h:a,$background:a===t?o.theme.indicatorsMenu.buttonBorderColorActive:o.theme.indicatorsMenu.buttonBorderColor})))))}var _ChevronLeft = require('@styled-icons/octicons/ChevronLeft');function mr({active:n,setActive:t,outerWidth:s=44,outerHeight:o=30,innerSize:a=24,innerMargin:l=3}){let{config:d}=M();return de.default.createElement(_div2.default,{as:"button",$relative:!0,$w:s,$radius:21,$h:o,$background:n?d.theme.switch.activeBgColor:d.theme.switch.inactiveBgColor,onClick:()=>t(!n)},de.default.createElement(_div2.default,{$absolute:!0,$top:l,$left:l,$transform:`translateX(${n?"14px":0})`,$transition:!0,$w:a,$h:a,$radius:"50%",$background:n?d.theme.switch.activeColor:d.theme.switch.inactiveColor}))}function xe({context:n,indicator:t,children:s,preSettingsChildren:o}){let{config:a,setConfig:l}=n,[d,c]=a.indicators.currentScreenMeta,u=(h,y)=>l({...a,indicators:{...a.indicators,[d]:ae(a.indicators[d],c,g=>({...g,[h]:y}))}});return de.default.createElement(_div.Div,{$pt:1.25,$flex:!0,$col:!0,$h:"100%"},de.default.createElement(_div.Div,{as:"button",$px:1,$flex:!0,$mb:1.25,onClick:()=>l({...a,indicators:{...a.indicators,currentScreen:Oe.Indicators}})},de.default.createElement(_div.Div,{as:_ChevronLeft.ChevronLeft,$w:16,$color:a.theme.primary}),de.default.createElement(_div.Text,{$size:13,$lineH:16,$color:a.theme.primary},"Indicators")),de.default.createElement(_div.Div,{$px:1.25,$flex:!0,$spaceBetween:!0},de.default.createElement(_div.Text,{$size:16,$lineH:30,$weight:600,$color:a.theme.indicatorsMenu.titleColor,$mb:1.375},t.indicator),de.default.createElement(mr,{active:t.active,setActive:h=>u("active",h)})),de.default.createElement(_div.Div,{$w:"100%",$outerCenter:!0,$overflowY:"scroll",$maxH:360},o,de.default.createElement(_div.Div,{$flex:!0,$spaceBetween:!0,$mb:.5},de.default.createElement(_div.Text,{$px:1.25,$size:13,$color:a.theme.indicatorsMenu.settingsColor},"Settings"),de.default.createElement(_div.Text,{as:"button",$px:1.25,$size:13,$color:a.theme.indicatorsMenu.settingsColor,onClick:()=>{let{active:h,...y}=a.indicators.defaultConfig[t.indicator];l({...a,indicators:{...a.indicators,[d]:ae(a.indicators[d],c,g=>({...g,...y}))}})}},"Reset Defaults")),s))}function Mo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return de.default.createElement(xe,{context:n,indicator:l},de.default.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),de.default.createElement(rt,{value:l.color,options:l.colorOptions,setValue:c=>d("color",c)}),de.default.createElement(ot,{value:l.thickness,setValue:c=>d("thickness",c)}))}function $o({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return de.default.createElement(xe,{context:n,indicator:l},de.default.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),de.default.createElement(ee,{label:"Standard Deviation",value:l.stdDev,setValue:c=>d("stdDev",c)}))}var _Plus3 = require('@styled-icons/evaicons-solid/Plus');var _sortBy = require('lodash/sortBy'); var _sortBy2 = _interopRequireDefault(_sortBy);var _reactdraglistview = require('react-drag-listview'); var _reactdraglistview2 = _interopRequireDefault(_reactdraglistview);function _o(n,t,s){let o=[...n],a=t<0?o.length+t:t;if(a>=0&&a<o.length){let l=s<0?o.length+s:s,[d]=o.splice(t,1);o.splice(l,0,d)}return o}var jh=_styledcomponents.createGlobalStyle`
  .drag-list-line {
    z-index: ${n=>n.zIndex} !important;
    border: 1px solid  ${n=>n.theme.primary} !important;
  }
`,Gh=n=>{let{config:t}=M();return de.default.createElement(_div.Div,{className:"drag-list-handle",$flex:!0,$col:!0,$shrink:"0",$innerCenter:!0,$w:24,$minH:"100%",$cursor:"grab",$radius:8,$background$hover:t.theme.dragList.handleBgColorHover,$mr:.25},de.default.createElement(_div.Div,{$w:12,$h:2,$background:t.theme.dragList.handleColor,$mb:"2px"}),de.default.createElement(_div.Div,{$w:12,$h:2,$background:t.theme.dragList.handleColor}))},ya=({children:n,...t})=>de.default.createElement(_div.Div,{$flex:!0,className:"drag-list-item",...t},de.default.createElement(Gh,null),n);function To({children:n,listItems:t,onDragEnd:s}){let{config:o}=M();return de.default.createElement(_reactdraglistview2.default,{onDragEnd:(a,l)=>{s(_o(t,a,l))},nodeSelector:".drag-list-item",handleSelector:".drag-list-handle",lineClassName:"drag-list-line"},n,de.default.createElement(jh,{zIndex:o.theme.dragList.topZIndex}))}var Kh=_react.forwardRef.call(void 0, ({children:n,disabled:t,onClick:s,...o},a)=>{let{config:l}=M();return de.default.createElement(_div2.default,{ref:a,$block:!0,$py:.375,$px:1.25,$mx:.5,$radius:l.theme.menu.item.borderRadius,$background$hover:t?void 0:l.theme.menu.item.bgColorHover,$background$active:t?void 0:l.theme.menu.item.activeBgColor,$color:l.theme.menu.item.color,$color$hover:t?void 0:l.theme.menu.item.colorHover,$color$active:t?void 0:l.theme.menu.item.colorActive,$transition:!0,$cursor:t?"default":"pointer",$opacity:t?.5:void 0,onClick:t?void 0:s,...o},n)}),kt=Kh;var ep=_styledcomponents2.default.hr`
  border: 0;
  width: 100%;
  height: 1px;
  background: ${n=>[100,200,300,400].includes(n.color)?n.theme[`fill${n.color}`]:n.theme.fill200};
  margin: 16px 0;

  ${n=>_div.divMixin.call(void 0, n)};
`,Ct=ep;function Oo({show:n,setShow:t,items:s,children:o,x:a="left",y:l="bottom",xOffset:d=0,yOffset:c=0,showAngle:u=!1,...h}){let{config:y}=M();return de.default.createElement(He,{$display:n?"block":"none",y:l,x:a,xOffset:d,yOffset:c,onOutsideClick:()=>t(!1),$py:.75,$color:y.theme.popoverMenu.color,showAngle:u,$textAlign:"left",...h},s.map((g,x)=>{if(/title/i.test(g.type))return de.default.createElement(_div.Div,{key:g.key||g.props.text||x,$py:.375,$px:1.25,$mx:.5},de.default.createElement(_div.Text,{$size:12,$weight:600,$color:y.theme.popoverMenu.uppercaseColor,$uppercase:!0},g.props.text));if(/item/i.test(g.type))return g.props.href||g.href?de.default.createElement(kt,{as:"a",prefetch:!1,key:g.key||g.props.text||x,href:g.props.href||g.href,...g.props,onClick:C=>{t(!1),g.props.onClick&&g.props.onClick(C)}},g.props.text):de.default.createElement(kt,{key:g.key||g.props.text||x,href:g.props.href,...g.props,onClick:C=>{t(!1),g.props.onClick&&g.props.onClick(C)}},g.props.text);if(/separator/i.test(g.type))return de.default.createElement(Ct,{key:x,$my:.5})}))}var ip={[_.RSI]:"RSI",[_.ATR]:"ATR",[_.ROC]:"ROC"};function xa({indicator:n,setActive:t,setScreen:s,hasDuplicates:o,setRemove:a,...l}){let{config:d}=M();return de.default.createElement(_div.Div,{$flex:!0,$h:48,$innerCenter:!0,$spaceBetween:!0,$px:1.25,...l},de.default.createElement(_div.Div,{$flex:!0,$w:"auto",$h:"100%",$innerCenter:!0,$innerLeft:!0},de.default.createElement(_div.Text,{$size:13,$color:d.theme.indicatorsMenu.indicatorTextColor,$mr:.5},ip[n.indicator]||n.indicator),de.default.createElement(_div.Text,{$size:13,$color:d.theme.indicatorsMenu.settingsColor},[n.length,n.type,n.stdDev,n.fastLength,n.slowLength,n.signalLineLength,n.kLength,n.kSmoothing,n.dSmoothing].filter(Boolean).join(" "))),de.default.createElement(_div.Div,{$flex:!0,$w:"auto",$h:"100%",$innerCenter:!0,$innerLeft:!0},de.default.createElement(_div.Text,{as:"button",$size:13,$color:n.active?d.theme.indicatorsMenu.settingsColorActive:d.theme.indicatorsMenu.settingsColor,$mr:.5,onClick:()=>s(n)},"Settings"),de.default.createElement(mr,{active:n.active,setActive:t,outerWidth:40,outerHeight:26,innerSize:22,innerMargin:2}),o&&de.default.createElement(_div.Div,{$w:24},a&&de.default.createElement(_div.Div,{as:"button",onClick:a},de.default.createElement(_div.Div,{as:_Plus3.Plus,$w:20,$relative:!0,$left:4,$fill:d.theme.indicatorsMenu.removeIconColor,$transform:"rotate(45deg)"})))))}function Ao({context:n}){let{config:t,setConfig:s}=n,[o,a]=_react.useState.call(void 0, ),l=_sortBy2.default.call(void 0, t.indicators.windows,"order"),d=t.indicators.mainChart.map(x=>x.indicator),c=!!d.filter((x,C)=>d.indexOf(x)!==C).length,u=x=>{s({...t,indicators:{...t.indicators,windows:x.map((C,k)=>({...C,order:k}))}})},h=(x,C)=>k=>s({...t,indicators:{...t.indicators,currentScreen:k.indicator,currentScreenMeta:[x,C]}}),y=(x,C)=>k=>s({...t,indicators:{...t.indicators,[x]:ae(t.indicators[x],C,D=>({...D,active:k}))}}),g=x=>()=>s({...t,indicators:{...t.indicators,mainChart:ae(t.indicators.mainChart,x,C=>({...C,active:!1,shouldRemove:!0}))}});return de.default.createElement(_div.Div,{$py:1.25},de.default.createElement(_div.Div,{$mb:1.5},de.default.createElement(_div.Div,{$px:1.25,$flex:!0,$spaceBetween:!0,$mobile$justifyContent:"flex-start"},de.default.createElement(_div.Text,{$size:13,$color:t.theme.indicatorsMenu.subtitleColor,$mb:.5},"Main chart"),de.default.createElement(_div.Div,{$relative:!0,$mobile$left:8,$mobile$top:-1},de.default.createElement(_div.Div,{as:"button",onClick:()=>a(!0)},de.default.createElement(_div.Div,{as:_Plus3.Plus,$w:20,$fill:o?t.theme.indicatorsMenu.addIconColorActive:t.theme.indicatorsMenu.addIconColor,$transition:!0,$transform:o?"rotate(90deg)":"rotate(0deg)"})),o&&de.default.createElement(Oo,{showAngle:!0,show:o,setShow:a,y:"bottom",xOffset:-20,x:"left",$background:t.theme.popoverMenu.bgColor,items:[{type:"item",props:{text:_.MA,onClick:()=>s({...t,indicators:{...t.indicators,mainChart:[...t.indicators.mainChart,{...t.indicators.defaultConfig[_.MA],color:t.indicators.defaultConfig[_.MA].colorOptions.find(x=>t.indicators.mainChart.some(C=>C.color!==x))||t.indicators.defaultConfig[_.MA].color}]}})}}]}))),de.default.createElement(Ct,{$my:"0"}),t.indicators.mainChart.map((x,C)=>de.default.createElement(de.default.Fragment,{key:C},de.default.createElement(xa,{indicator:x,setScreen:h("mainChart",C),setActive:y("mainChart",C),hasDuplicates:c,setRemove:c&&C>0?g(C):void 0}),de.default.createElement(Ct,{$my:"0"})))),de.default.createElement(_div.Div,null,de.default.createElement(_div.Text,{$px:1.25,$size:13,$color:t.theme.indicatorsMenu.subtitleColor,$mb:.5},"Indicator windows"),de.default.createElement(To,{listItems:l,onDragEnd:u},l.map((x,C)=>de.default.createElement(ya,{key:C,$px:1.25,$borderTop:t.theme.dragList.borderColor,$borderBottom:t.theme.dragList.borderColor,$mb:"-1px",$background$hover:t.theme.dragList.bgColorHover},de.default.createElement(xa,{indicator:x,setScreen:h("windows",C),setActive:y("windows",C),$px:"0"}))))))}function pr({label:n="Select",value:t,setValue:s,options:o}){let{config:a}=M();return de.default.createElement(_div.Div,{$px:1.25,$py:1,$borderTop:a.theme.indicatorsMenu.borderColor},de.default.createElement(_div.Text,{$size:13,$color:a.theme.indicatorsMenu.labelColor,$mb:.5},n),de.default.createElement(_div.Div,{$flex:!0},o.map(l=>de.default.createElement(nt,{key:l.value,size:"xs",$mr:.5,active:l.value===t,onClick:()=>s(l.value),$background:a.theme.indicatorsMenu.buttonBgColor,$border:l.value===t?a.theme.primary:a.theme.indicatorsMenu.buttonBgColor},l.text))))}function Lo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return de.default.createElement(xe,{context:n,indicator:l},de.default.createElement(pr,{label:"Type",value:l.type,options:[{text:"Simple",value:"SMA"},{text:"Exponential",value:"EMA"}],setValue:c=>d("type",c)}),de.default.createElement(ee,{label:"Fast Length",value:l.fastLength,setValue:c=>d("fastLength",c)}),de.default.createElement(ee,{label:"Slow Length",value:l.slowLength,setValue:c=>d("slowLength",c)}),de.default.createElement(ee,{label:"Signal Line Length",value:l.signalLineLength,setValue:c=>d("signalLineLength",c)}))}function Yo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return de.default.createElement(xe,{context:n,indicator:l},de.default.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),de.default.createElement(pr,{label:"Type",value:l.type,options:[{text:"Simple",value:"SMA"},{text:"Exponential",value:"EMA"}],setValue:c=>d("type",c)}),de.default.createElement(rt,{value:l.color,options:l.colorOptions,setValue:c=>d("color",c)}),de.default.createElement(ot,{value:l.thickness,setValue:c=>d("thickness",c)}))}function Eo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return de.default.createElement(xe,{context:n,indicator:l},de.default.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),de.default.createElement(rt,{value:l.color,options:l.colorOptions,setValue:c=>d("color",c)}),de.default.createElement(ot,{value:l.thickness,setValue:c=>d("thickness",c)}))}function Wo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return de.default.createElement(xe,{context:n,indicator:l},de.default.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),de.default.createElement(rt,{value:l.color,options:l.colorOptions,setValue:c=>d("color",c)}),de.default.createElement(ot,{value:l.thickness,setValue:c=>d("thickness",c)}),de.default.createElement(ee,{label:"Upper line",value:l.upperLine,setValue:c=>d("upperLine",c)}),de.default.createElement(ee,{label:"Lower line",value:l.lowerLine,setValue:c=>d("lowerLine",c)}))}function Io({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return de.default.createElement(xe,{context:n,indicator:l},de.default.createElement(ee,{label:"K Length",value:l.kLength,setValue:c=>d("kLength",c)}),de.default.createElement(ee,{label:"K Smoothing",value:l.kSmoothing,setValue:c=>d("kSmoothing",c)}),de.default.createElement(ee,{label:"D Smoothing",value:l.dSmoothing,setValue:c=>d("dSmoothing",c)}),de.default.createElement(ee,{label:"Upper line",value:l.upperLine,setValue:c=>d("upperLine",c)}),de.default.createElement(ee,{label:"Lower line",value:l.lowerLine,setValue:c=>d("lowerLine",c)}))}var lp={[Oe.Indicators]:Ao,[Oe.MA]:Yo,[Oe.RSI]:Wo,[Oe.ATR]:Mo,[Oe.STO]:Io,[Oe.MACD]:Lo,[Oe.BB]:$o,[Oe.ROC]:Eo};function Po({floating:n,strategy:t,x:s,y:o,context:a,onOutsideClick:l}){let{config:d}=a,c=lp[d.indicators.currentScreen||Oe.Indicators];return typeof window<"u"&&_reactdom.createPortal.call(void 0, de.default.createElement(_div2.default,{$fixed:!0,$cover:!0,$z:d.theme.popoverMenu.zIndex-1,onClick:l},de.default.createElement(_div2.default,{ref:n,style:{position:t,top:_nullishCoalesce(o, () => (0)),left:_nullishCoalesce(s, () => (0)),width:360}},de.default.createElement(He,{y:"bottom",x:"center",yOffset:12,$w:360,onOutsideClick:l},de.default.createElement(c,{context:a})))),document.getElementById("streamlined-container"))}var{entries:Ma}=Object,zo={crosshair:aa,line:Vr,rect:Ur,harea:Fr,hline:Br,vline:Gr,text:jr},mp=_styledcomponents2.default.div`
  ${n=>console.log(n)}
`;function Ro({onTimeframeChange:n}){let t=M(),{frame:s,config:o,setConfig:a}=t,[l,d]=_react.useState.call(void 0, !1),[c,u]=_react.useState.call(void 0, !1),h=wo(),y=o.timeframe,g=typeof window<"u"&&typeof document<"u"?document.body.clientWidth<o.mobileThreshold:!1,x=o.width<472,{x:C,y:k,reference:D,floating:$,strategy:I}=sa({strategy:"absolute",placement:"bottom"}),W=b=>a({...o,tool:b}),H=(b=!0)=>{a({...o,indicators:{...o.indicators,showMenu:b,currentScreen:"Indicators"}})},B=976,U=zo[o.tool];return de.default.createElement(_reactkonvautils.Html,{divProps:{style:{width:"100%"}}},de.default.createElement(_styledcomponents.ThemeProvider,{theme:Et.theme},de.default.createElement(mp,null),de.default.createElement(_div.Div,{$w:"100%",$absolute:!0},de.default.createElement(_div.Div,{$flex:!0,$w:"auto",$absolute:!0,$top:s.header.yStart,...o.width>B?{$left:"50%",$transform:"translateX(-50%)"}:{$right:o.theme.header.marginRight}},de.default.createElement(_div.Div,{$relative:!0,$flex:!0,$innerCenter:!0,$w:"auto",$border:l?`1px solid ${o.theme.header.buttonBorderColorActive}`:`1px solid ${o.theme.header.buttonBorderColor}`,$background:o.theme.header.background,$h:34,$radius:17,$mr:.5},o.width>B?o.timeframes.map(b=>de.default.createElement(_div.Div,{key:b.id,$flex:!0,as:"button",$shrink:"0",$innerCenter:!0,$w:32,$h:32,$radius:16,$fontSize:13,$color:y.id===b.id?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$background:y.id===b.id?o.theme.header.buttonBgColorActive:void 0,onClick:()=>n(b)},b.text)):de.default.createElement(de.default.Fragment,null,de.default.createElement(_div.Div,{$flex:!0,as:"button",$shrink:"0",$innerCenter:!0,$h:32,$px:.75,$radius:16,$fontSize:13,$color:l?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$boxShadow:`inset 0 0 0 1px ${l?_polished.transparentize.call(void 0, .5,o.theme.header.buttonColorActive):"transparent"}`,onClick:()=>d(!l)},de.default.createElement(_div.Div,{as:"span",$mr:.25},y.text),de.default.createElement(_div.Div,{as:_AngleDown.AngleDown,$w:12})),l&&de.default.createElement(He,{x:"center",y:"bottom",onOutsideClick:()=>d(!1),$p:1.25,$color:o.theme.popoverMenu.color,showAngle:!1,$textAlign:"left"},de.default.createElement(_div.Text,{$size:13,$weight:600,$color:o.theme.popoverMenu.uppercaseColor,$uppercase:!0,$mb:.5},"Minute"),de.default.createElement(_div.Div,{$flex:!0,$mb:1.5},o.timeframes.filter(b=>/^M/.test(b.id)).map(b=>de.default.createElement(nt,{active:b.id===y.id,size:"small",rounded:!0,key:b.id,$mr:.5,onClick:()=>{n(b),d(!1)}},b.text))),de.default.createElement(_div.Text,{$size:13,$weight:600,$color:o.theme.popoverMenu.uppercaseColor,$uppercase:!0,$mb:.5},"Hour"),de.default.createElement(_div.Div,{$flex:!0,$mb:1.5},o.timeframes.filter(b=>/^H/.test(b.id)).map(b=>de.default.createElement(nt,{active:b.id===y.id,size:"small",rounded:!0,key:b.id,$mr:.5,onClick:()=>{n(b),d(!1)}},b.text))),de.default.createElement(_div.Text,{$size:13,$weight:600,$color:o.theme.popoverMenu.uppercaseColor,$uppercase:!0,$mb:.5},"Day/Week"),de.default.createElement(_div.Div,{$flex:!0},o.timeframes.filter(b=>/^(D|W)/.test(b.id)).map(b=>de.default.createElement(nt,{active:b.id===y.id,size:"small",rounded:!0,key:b.id,$mr:.5,onClick:()=>{n(b),d(!1)}},b.text)))))),!g&&de.default.createElement(_div.Div,{$relative:!0,$flex:!0,$innerCenter:!0,$w:"auto",$border:c?`1px solid ${o.theme.header.buttonBorderColorActive}`:`1px solid ${o.theme.header.buttonBorderColor}`,$boxShadow:`inset 0 0 0 1px ${c?_polished.transparentize.call(void 0, .5,o.theme.header.buttonBorderColorActive):"transparent"}`,$background:o.theme.header.background,$h:34,$radius:17,$mr:.5},o.width>B?Ma(zo).map(([b,Z])=>de.default.createElement(_div.Div,{key:b,$flex:!0,as:"button",$shrink:"0",$innerCenter:!0,$w:32,$h:32,$radius:16,$color:o.tool===b?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$background:o.tool===b?o.theme.header.buttonBgColorActive:void 0,onClick:()=>W(b),"aria-label":b},de.default.createElement(Z,null))):de.default.createElement(de.default.Fragment,null,de.default.createElement(_div.Div,{$flex:!0,as:"button","aria-label":"Chart tool",$shrink:"0",$innerCenter:!0,$h:32,$px:.75,$radius:16,$color:c?o.theme.header.buttonColorActive:o.theme.header.buttonColor,onClick:()=>u(!c)},de.default.createElement(_div.Div,{as:U,$mr:.25}),de.default.createElement(_div.Div,{as:_AngleDown.AngleDown,$w:12})),c&&de.default.createElement(He,{x:"left",y:"bottom",onOutsideClick:()=>u(!1),$p:1,$color:o.theme.popoverMenu.color,showAngle:!1,$textAlign:"left"},de.default.createElement(_div.Text,{$size:13,$weight:600,$color:o.theme.popoverMenu.uppercaseColor,$uppercase:!0,$mb:.5,$center:!0},"Tools"),de.default.createElement(_div.Div,{$flex:!0},Ma(zo).map(([b,Z])=>de.default.createElement(nt,{key:b,active:b===o.tool,size:"small",rounded:!0,$mx:.25,onClick:()=>{W(b),u(!1)}},de.default.createElement(Z,null))))))),!x&&de.default.createElement(_div.Div,{ref:D,as:"button",$flex:!0,$innerCenter:!0,$w:"auto",$border:`1px solid ${o.indicators.showMenu?o.theme.header.buttonBorderColorActive:o.theme.header.buttonBorderColor}`,$background:o.theme.header.background,$h:34,$radius:17,$px:.75,$fontSize:13,$color:o.indicators.showMenu?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$mr:.5,onClick:()=>H(!o.indicators.showMenu)},"Indicators"),o.indicators.showMenu&&de.default.createElement(Po,{floating:$,strategy:I,x:C,y:k,context:t,onOutsideClick:()=>H(!1)}),o.width>=584&&de.default.createElement(_div.Div,{as:"button",$flex:!0,$innerCenter:!0,$w:"auto",$border:`1px solid ${o.theme.header.buttonBorderColor}`,$background:o.theme.header.background,$h:34,$radius:17,$px:.75,$fontSize:13,$color:o.theme.header.buttonColor,$mr:.5,onClick:h},"Screenshot"),o.showFullscreenButton&&de.default.createElement(_div.Div,{as:"button",$flex:!0,$innerCenter:!0,$w:"auto",$border:`1px solid ${o.theme.header.buttonBorderColor}`,$background:o.theme.header.background,$h:34,$radius:17,$px:.75,$fontSize:13,$color:o.theme.header.buttonColor,onClick:()=>a({...o,fullscreen:!o.fullscreen})},de.default.createElement(_div.Div,{as:_Fullscreen.Fullscreen,$w:20,$fill:o.theme.header.buttonColor}))))))}var _isNil = require('lodash/isNil'); var _isNil2 = _interopRequireDefault(_isNil);var{fromEntries:hp,entries:pp}=Object;function No(n){return Array.isArray(n)?n.map(No).filter(t=>!_isNil2.default.call(void 0, t)):typeof n=="object"&&!_isNil2.default.call(void 0, n)?hp(pp(n).map(([t,s])=>[t,No(s)]).filter(([t,s])=>!_isNil2.default.call(void 0, s))):n}var gn=No;function xp({getWidth:n,...t},s){let o=_react.useRef.call(void 0, ),{config:a}=M(),l={fontFamily:a.theme.fontFamily,fontSize:a.theme.fontSize,fontStyle:a.theme.fontStyle,fill:a.theme.color,...gn(t)};return _optionalChain([o, 'access', _33 => _33.current, 'optionalAccess', _34 => _34.textWidth])&&typeof n=="function"&&n(_optionalChain([o, 'access', _35 => _35.current, 'optionalAccess', _36 => _36.textWidth])),de.default.createElement(de.default.Fragment,null,t.bgFill&&_optionalChain([o, 'access', _37 => _37.current, 'optionalAccess', _38 => _38.textWidth])&&de.default.createElement(Te,{x:t.x,y:t.y,offsetX:t.bgPadding,offsetY:t.bgPadding,width:o.current.textWidth+t.bgPadding*2,height:l.fontSize+t.bgPadding*2,fill:t.bgFill,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1}),de.default.createElement(fs,{ref:d=>{(n||t.bgFill)&&(o.current=d),s&&(s.current=d)},transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,...l}))}var xr=_react.forwardRef.call(void 0, xp);function vp({onTimeframeChange:n,onSymbolClick:t}){let{frame:s,config:o,setCursor:a}=M(),[l,d]=_react.useState.call(void 0, ),c=o.width<472,u=c?new _konva2.default.Text({text:o.symbol.code,fontFamily:o.theme.fontFamily,fontSize:o.theme.title.fontSize,fontStyle:500}).getTextWidth():Math.max(new _konva2.default.Text({text:o.symbol.name,fontFamily:o.theme.fontFamily,fontSize:o.theme.title.fontSize,fontStyle:500}).getTextWidth(),new _konva2.default.Text({text:o.symbol.code,fontFamily:o.theme.fontFamily,fontSize:o.theme.subtitle.fontSize,fontStyle:500}).getTextWidth());return de.default.createElement(j,null,o.symbolClick!==!1?de.default.createElement(jn,{onMouseEnter:()=>{a("pointer"),d(!0)},onMouseLeave:()=>{a("default"),d(!1)},onClick:t},de.default.createElement(Te,{x:s.header.xStart,y:s.header.yStart,width:u+8+o.theme.header.angleDownSize+4,height:4+o.theme.title.fontSize+4+o.theme.subtitle.fontSize+4}),de.default.createElement(xr,{text:c?o.symbol.code:o.symbol.name,x:s.header.xStart,y:c?s.header.yStart+12:s.header.yStart+4,fontSize:o.theme.title.fontSize,fill:l?o.theme.title.colorHover:o.theme.title.color}),!c&&de.default.createElement(xr,{text:o.symbol.code,x:s.header.xStart,y:s.header.yStart+4+o.theme.title.fontSize+4,fontSize:o.theme.subtitle.fontSize,fill:l?o.theme.subtitle.colorHover:o.theme.subtitle.color}),de.default.createElement(ho,{x:s.header.xStart+u+(c?4:8),y:c?s.header.yStart+12+4:s.header.yStart+4+4,size:o.theme.header.angleDownSize,color:l?o.theme.header.angleDownColorHover:o.theme.header.angleDownColor})):de.default.createElement(jn,null,de.default.createElement(xr,{text:c?o.symbol.code:o.symbol.name,x:s.header.xStart,y:c?s.header.yStart+12:s.header.yStart+4,fontSize:o.theme.title.fontSize,fill:o.theme.title.color}),!c&&de.default.createElement(xr,{text:o.symbol.code,x:s.header.xStart,y:s.header.yStart+4+o.theme.title.fontSize+4,fontSize:o.theme.subtitle.fontSize,fill:o.theme.subtitle.color})),de.default.createElement(Ro,{onTimeframeChange:n}))}var Da=vp;var _indicators = require('@debut/indicators');var Cp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=o.map(c=>[a.x(c.i),l(c.value)]).filter(([c,u])=>u!==void 0&&_inRange2.default.call(void 0, c,t.xStart,t.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.color,strokeWidth:s.thickness,points:d,perfectDrawEnabled:!1,listening:!1}}]},$a=Cp;var Sp=1;function Bo(n){let t=(_last2.default.call(void 0, n.range())-n.range()[0])/(_last2.default.call(void 0, n.domain())-n.domain()[0]),s=Sp,o=1;return t>10?(o=2,s=3):t>5?(o=1.5,s=2):t>2.5&&(s=1),{width:t-s,margin:s,wickWidth:o}}var bp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=Bo(a.x),c=s.signalLineLength>1?o.map(g=>[a.x(g.i),l(g.values.signal)]).filter(([g,x])=>x!==void 0&&_inRange2.default.call(void 0, g,t.xStart,t.xEnd)).flat(1):[],u=o.map(g=>[a.x(g.i),l(g.values.macd)]).filter(([g,x])=>x!==void 0&&_inRange2.default.call(void 0, g,t.xStart,t.xEnd)).flat(1),h=(g,x)=>{if(g){if(g.values.histogram&&Math.abs(g.values.histogram)!==1/0)return g.values.histogram;if((!g.values.histogram||Math.abs(g.values.histogram)===1/0)&&x>=s.signalLineLength)return g.values.macd}},y=o.map((g,x)=>{let C=h(g,x),k=h(o[x-1],x-1),D;return C>0?(D=n.theme.candleUpColor,k!==void 0&&(D=C>k?n.theme.candleUpColor:_polished.transparentize.call(void 0, .25,n.theme.candleUpColor))):(D=n.theme.candleDownColor,k!==void 0&&(D=C<k?n.theme.candleDownColor:_polished.transparentize.call(void 0, .25,n.theme.candleDownColor))),[a.x(g.i),l(C),D]}).filter(([g,x])=>x!==void 0&&_inRange2.default.call(void 0, g,t.xStart,t.xEnd));return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},...y.map(([g,x,C])=>({type:"Rect",attrs:{x:g,y:Math.min(x,l(0)),width:Math.max(d.width,.5),height:Math.abs(x-l(0)),fill:C,perfectDrawEnabled:!1,listening:!1}})),{type:"Line",attrs:{stroke:s.macdLineColor,strokeWidth:s.thickness,points:u,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.signalLineColor,strokeWidth:s.thickness,points:c,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.axes.lineColor,strokeWidth:1,points:[t.xEnd,t.yStart,t.xEnd,t.yEnd],perfectDrawEnabled:!1,listening:!1}}]},Oa=bp;var Dp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=o.map(c=>[a.x(c.i),l(c.value)]).filter(([c,u])=>u!==void 0&&_inRange2.default.call(void 0, c,t.xStart,t.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.roc.zeroLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(0),t.xEnd,l(0)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.color,strokeWidth:s.thickness,points:d,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.axes.lineColor,strokeWidth:1,points:[t.xEnd,t.yStart,t.xEnd,t.yEnd],perfectDrawEnabled:!1,listening:!1}}]},Aa=Dp;var _p=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=o.map(c=>[a.x(c.i),l(c.value)]).filter(([c,u])=>u!==void 0&&_inRange2.default.call(void 0, c,t.xStart,t.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Rect",attrs:{x:t.xStart,y:l(s.upperLine),width:t.xEnd-t.xStart,height:l(s.lowerLine)-l(s.upperLine),fill:n.theme.indicators.rsi.bgColor}},{type:"Line",attrs:{stroke:n.theme.indicators.rsi.upperLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(s.upperLine),t.xEnd,l(s.upperLine)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.rsi.middleLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(50),t.xEnd,l(50)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.rsi.lowerLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(s.lowerLine),t.xEnd,l(s.lowerLine)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.color,strokeWidth:s.thickness,points:d,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.axes.lineColor,strokeWidth:1,points:[t.xEnd,t.yStart,t.xEnd,t.yEnd],perfectDrawEnabled:!1,listening:!1}}]},La=_p;var Tp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=o.map(u=>[a.x(u.i),l(u.values.k)]).filter(([u,h])=>h!==void 0&&_inRange2.default.call(void 0, u,t.xStart,t.xEnd)).flat(1),c=o.map(u=>[a.x(u.i),l(u.values.d)]).filter(([u,h])=>h!==void 0&&_inRange2.default.call(void 0, u,t.xStart,t.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Rect",attrs:{x:t.xStart,y:l(s.upperLine),width:t.xEnd-t.xStart,height:l(s.lowerLine)-l(s.upperLine),fill:n.theme.indicators.stochastic.bgColor}},{type:"Line",attrs:{stroke:n.theme.indicators.stochastic.upperLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(0),t.xEnd,l(0)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.stochastic.upperLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(s.upperLine),t.xEnd,l(s.upperLine)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.stochastic.middleLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(50),t.xEnd,l(50)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.stochastic.lowerLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(s.lowerLine),t.xEnd,l(s.lowerLine)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.kColor,strokeWidth:s.thickness,points:d,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.dColor,strokeWidth:s.thickness,points:c,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.axes.lineColor,strokeWidth:1,points:[t.xEnd,t.yStart,t.xEnd,t.yEnd],perfectDrawEnabled:!1,listening:!1}}]},Ea=Tp;function Ip(n,t){if(!n.series)return[];let s=new (0, _indicators.RSI)(Number(t.length));return _optionalChain([n, 'access', _39 => _39.series, 'optionalAccess', _40 => _40.map, 'call', _41 => _41(o=>({i:o.i,value:s.nextValue(o.close)}))])}function Pp(n,t){if(!n.series)return[];let s=new (0, _indicators.ATR)(Number(t.length),"SMA");return _optionalChain([n, 'access', _42 => _42.series, 'optionalAccess', _43 => _43.map, 'call', _44 => _44(o=>({i:o.i,value:s.nextValue(o.high,o.low,o.close)}))])}function zp(n,t){if(!n.series)return[];let s=Number(t.length);return n.series.map((o,a)=>{if(a<s)return null;let l=o.close,d=n.series[a-s].close,c=(l-d)/d*100;return{i:o.i,value:c}}).filter(Boolean)}function Rp(n,t){if(!n.series)return[];let s=new (0, _indicators.SMA)(Number(t.kSmoothing)),o=new (0, _indicators.SMA)(Number(t.kSmoothing)),a=new (0, _indicators.SMA)(Number(t.kSmoothing)),l=new (0, _indicators.Stochastic)(Number(t.kLength),Number(t.dSmoothing));return _optionalChain([n, 'access', _45 => _45.series, 'optionalAccess', _46 => _46.map, 'call', _47 => _47(d=>{let c=s.nextValue(d.high),u=o.nextValue(d.low),h=a.nextValue(d.close);if(h){let{k:y,d:g}=l.nextValue(c,u,h)||{};return{i:d.i,values:{k:y,d:g}}}}), 'access', _48 => _48.filter, 'call', _49 => _49(Boolean)])}function Hp(n,t){if(!n.series)return[];let s=t.type==="SMA"?_indicators.SMA:_indicators.EMA,o=new s(Number(t.fastLength)),a=new s(Number(t.slowLength)),l=new (0, _indicators.SMA)(Number(t.signalLineLength));return _optionalChain([n, 'access', _50 => _50.series, 'optionalAccess', _51 => _51.map, 'call', _52 => _52(d=>{let c=o.nextValue(d.close),u=a.nextValue(d.close);if(!u||!c)return;let h=c-u,y=h&&l.nextValue(h)||void 0,g=h-y||void 0;if(!Number.isNaN(h))return{i:d.i,values:{macd:h,emaFast:c,emaSlow:u,signal:y,histogram:g}}}), 'access', _53 => _53.filter, 'call', _54 => _54(Boolean)])}var Wa={[_.RSI]:Ip,[_.ATR]:Pp,[_.STO]:Rp,[_.MACD]:Hp,[_.ROC]:zp},Ia={[_.RSI]:La,[_.ATR]:$a,[_.STO]:Ea,[_.MACD]:Oa,[_.ROC]:Aa},Uo=(n,{config:t,frame:s,indicatorFrame:o})=>n.copy().nice().ticks().reverse().reduce((a,l,d)=>{let c=n(l);return d>0&&c>a.yEnd-t.theme.axes.minTickSpaceY||c>o.yEnd-t.theme.axes.fontSize/2||c<o.yStart+t.theme.axes.fontSize/2?a:{yEnd:c-t.theme.axes.fontSize,ticks:[...a.ticks,{value:l,y:c}]}},{yEnd:s.mainInner.yEnd,ticks:[]}).ticks,Pa={[_.RSI]:(n,{indicator:t})=>[{value:t.upperLine,y:n(t.upperLine)},{value:t.lowerLine,y:n(t.lowerLine)}],[_.STO]:(n,{indicator:t})=>[{value:t.upperLine,y:n(t.upperLine)},{value:t.lowerLine,y:n(t.lowerLine)}],[_.ATR]:Uo,[_.MACD]:Uo,[_.ROC]:Uo},za={[_.RSI]:()=>[100,0],[_.STO]:()=>[100,0],[_.ATR]:n=>[Math.ceil(Math.max(...n.map(t=>t.value||0))),0],[_.ROC]:n=>{let t=n.map(a=>a.value||0),s=Math.max(...t),o=Math.min(...t);return[Math.ceil(s),Math.floor(o)]},[_.MACD]:n=>[Math.ceil(Math.max(...n.flatMap(s=>[s.values.histogram&&Math.abs(s.values.histogram)!==1/0?s.values.histogram:0,s.values.macd||0]))),Math.floor(Math.min(...n.flatMap(s=>[s.values.histogram&&Math.abs(s.values.histogram)!==1/0?s.values.histogram:0,s.values.macd||0])))]},jo=de.default.createContext();function ut(){return _react.useContext.call(void 0, jo)}function Np({frame:n,config:t,value:s,y:o,showLine:a=!0}){return[t.theme.grid.showY&&a&&{type:"Line",attrs:{points:[n.mainChart.xStart,o,n.mainChart.xEnd,o],stroke:t.theme.grid.lineColor,strokeWidth:1,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{points:[n.yAxis.xStart,o,n.yAxis.xStart+t.theme.axes.tickSize,o],stroke:t.theme.axes.tickColor,strokeWidth:1,perfectDrawEnabled:!1,listening:!1}},{type:"Text",attrs:{fontFamily:t.theme.fontFamily,fontStyle:t.theme.fontStyle,fontSize:t.theme.axes.fontSize,text:t.formatters.axes.y(s),fill:t.theme.axes.color,x:n.yAxis.xStart+t.theme.axes.tickSize+t.theme.axes.tickMargin,y:o+1,offsetY:t.theme.axes.fontSize/2,perfectDrawEnabled:!1}}]}var xn=Np;function Go(){let{frame:n,config:t}=M(),{baseRenderer:s,key:o,yScale:a,indicator:l,indicatorFrame:d,series:c,scales:u}=ut();if(c.length&&u.loaded){let h=()=>{let y=Pa[l.indicator](a,{config:t,frame:n,indicator:l,indicatorFrame:d});_forEach2.default.call(void 0, y,g=>{s(xn,{key:`${o}.ticks.${g.value}`,value:t.formatters.axes.y(g.value),y:g.y,showLine:[_.ATR,_.MACD].includes(l.indicator)})})};s.destroyAllWith(`${o}.ticks`),h(),u.onChange(h,`${o}.ticks`)}return _react.useEffect.call(void 0, ()=>()=>{u.offChange(`${o}.ticks`)},[]),null}function Xo(){let{baseRenderer:n,key:t,yScale:s,indicator:o,indicatorFrame:a,series:l,scales:d}=ut(),c=`${t}.chart`;if(l.length&&d.loaded){let u=()=>{n.destroyAllWith(c),n(Ia[o.indicator],{key:c,indicatorFrame:a,indicator:o,series:l,scales:d,yScale:s})};u(),d.onChange(u,c)}return _react.useEffect.call(void 0, ()=>()=>{d.offChange(c)},[]),null}function Zo(){let{dispatch:n,config:t}=M(),{topRenderer:s,key:o,yScale:a,indicatorFrame:l,series:d}=ut();return d.length&&n.on(`mousemove.${o}`,c=>{let u=`${o}.yTick`;c&&_inRange2.default.call(void 0, c.offsetY,l.yStart,l.yEnd)?s(It,{key:u,x:c.offsetX,y:c.offsetY,fill:t.theme.crosshair.color,text:t.formatters.crosshair.y(_optionalChain([a, 'optionalAccess', _55 => _55.invert, 'call', _56 => _56(c.offsetY)]))}):s.destroy(u)}),null}var _round = require('lodash/round'); var _round2 = _interopRequireDefault(_round);var Xp={[_.RSI]:"RSI",[_.ATR]:"ATR",[_.MACD]:"MACD"},Zp={[_.RSI]:n=>n.length,[_.ATR]:n=>n.length,[_.STO]:n=>[n.kLength,n.kSmoothing,n.dSmoothing].join(" "),[_.ROC]:n=>n.length,[_.MACD]:n=>[n.fastLength,n.slowLength,n.signalLineLength].join(" ")};function qp({config:n,indicator:t,indicatorFrame:s,value:o}){let a={fontFamily:n.theme.fontFamily,fontStyle:n.theme.fontStyle,fontSize:n.theme.axes.fontSize,text:Xp[t.indicator]||t.indicator,fill:n.theme.indicatorWindow.color,x:s.xStart,y:s.yStart+16,offsetY:n.theme.axes.fontSize/2,perfectDrawEnabled:!1},l=new _konva2.default.Text(a).getTextWidth(),d={...a,text:Zp[t.indicator](t),fill:n.theme.indicatorWindow.settingsColor,x:a.x+l+8},c=new _konva2.default.Text(d).getTextWidth();return[{type:"Rect",attrs:{x:s.xStart,y:s.yStart+16-n.theme.fontSize/2,width:l+c+8,height:n.theme.fontSize,fill:_polished.transparentize.call(void 0, .25,n.theme.indicatorWindow.bgColor),cornerRadius:[0,8,8,0]}},{type:"Text",attrs:a},{type:"Text",attrs:d},{type:"Text",attrs:{...d,text:_round2.default.call(void 0, o,2),fill:t.color,x:d.x+c+8}}]}var Ha=qp;function qo(){let{dispatch:n,config:t}=M(),{topRenderer:s,key:o,indicator:a,indicatorFrame:l,series:d}=ut(),c=`${o}.infoWindow`;if(d.length){let u=h=>s(Ha,{key:c,indicatorFrame:l,indicator:a,value:h});u(_last2.default.call(void 0, d).value),n.on(`candle.${c}`,h=>{u(_optionalChain([d, 'access', _57 => _57.find, 'call', _58 => _58(y=>y.i===_optionalChain([h, 'optionalAccess', _59 => _59.i])), 'optionalAccess', _60 => _60.value])||_last2.default.call(void 0, d).value)})}return _react.useEffect.call(void 0, ()=>()=>{s.destroy(c),n.on(`candle.${c}`,null)},[]),null}function Ko({indicator:n,i:t,indicatorFrame:s,scales:o,baseRenderer:a,topRenderer:l}){let{data:d,config:c}=M(),u=n.indicator.replace(/\s/g,"")+t;if(n.active){let h=Wa[n.indicator],y=h(d,n),g=_d3scale.scaleLinear.call(void 0, ).domain(za[n.indicator](y)).range([s.yStart+c.theme.indicatorWindow.splitLineWidth,s.yEnd]),x={baseRenderer:a,topRenderer:l,yScale:g,scales:o,key:u,indicator:n,indicatorFrame:s,series:y};return de.default.createElement(jo.Provider,{value:x},de.default.createElement(Go,null),de.default.createElement(Xo,null),de.default.createElement(qo,null),de.default.createElement(Zo,null))}return a.destroyAllWith(u),l.destroyAllWith(u),null}function Jo(){let{config:n,frame:t}=M(),s=se("indicatorWindows"),o=_react.useRef.call(void 0, ),a=_react.useRef.call(void 0, ),l=ie(o.current),d=ie(a.current);return de.default.createElement(de.default.Fragment,null,de.default.createElement(j,{ref:o}),de.default.createElement(j,{ref:a}),n.indicators.windows.map((c,u)=>de.default.createElement(Ko,{key:u,i:u,indicator:c,indicatorFrame:t.indicatorWindows.find(h=>h.indicator===c.indicator),scales:s,baseRenderer:l,topRenderer:d})))}var Qo=window.devicePixelRatio>1?.5:0;function ei({stepWidth:n,x:t,open:s,high:o,low:a,close:l,color:d,minWidth:c=0}){let u=Qo,h=1;n>10?(h=2,u=3):n>5?(h=1.5,u=2):n>2.5&&(u=1);let y=Math.max(n-u,c),g=Math.min(s,l),x=Math.max(h,Math.abs(l-s));return[{type:"Line",attrs:{points:[t+u/2+y/2,o,t+u/2+y/2,a],stroke:d,strokeWidth:h,perfectDrawEnabled:!1,listening:!1}},{type:"Rect",attrs:{x:t+u/2,y:g,width:y,height:x,fill:d,perfectDrawEnabled:!1,listening:!1,visible:y>=1}}]}var r0=JSON.stringify;function ri({layerRef:n}){let t=ie(n.current),s=se("candles"),{frame:o,config:a,data:l}=M();return _react.useEffect.call(void 0, ()=>{if(s.loaded&&l.series){let d=()=>{let c=(_last2.default.call(void 0, s.x.range())-s.x.range()[0])/(_last2.default.call(void 0, s.x.domain())-s.x.domain()[0]),u=_last2.default.call(void 0, l.series).i;_forEach2.default.call(void 0, l.series,h=>{let y=s.x(h.i);t(ei,{key:`candle.${h.i}`,stepWidth:c,show:_inRange2.default.call(void 0, y,o.mainChart.xStart-c,o.mainChart.xEnd+c),x:y,open:s.y(h.open),high:s.y(h.high),low:s.y(h.low),close:s.y(h.close),color:h.close>=h.open?a.theme.candleUpColor:a.theme.candleDownColor,minWidth:h.i===u?1:0})})};d(),s.onChange(d)}return()=>{t.destroyAll()}},[l.seriesId,s.loaded,a.timeframe.id,r0(o.mainChart)]),null}var o0=({indicator:n,frame:t,series:s,scales:o})=>{let a=s.map(l=>[o.x(l.i),o.y(l.value)]).filter(([l,d])=>d!==void 0&&_inRange2.default.call(void 0, l,t.mainChart.xStart,t.mainChart.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.color,strokeWidth:n.thickness,points:a,perfectDrawEnabled:!1,listening:!1}}]},Ba=o0;var i0=({indicator:n,config:t,frame:s,series:o,scales:a})=>{let l=o.map(u=>[a.x(u.i),a.y(u.values.upper)]).filter(([u,h])=>h!==void 0&&_inRange2.default.call(void 0, u,s.mainChart.xStart,s.mainChart.xEnd)).flat(1),d=o.map(u=>[a.x(u.i),a.y(u.values.middle)]).filter(([u,h])=>h!==void 0&&_inRange2.default.call(void 0, u,s.mainChart.xStart,s.mainChart.xEnd)).flat(1),c=o.map(u=>[a.x(u.i),a.y(u.values.lower)]).filter(([u,h])=>h!==void 0&&_inRange2.default.call(void 0, u,s.mainChart.xStart,s.mainChart.xEnd));return[{type:"Line",attrs:{fill:t.theme.indicators.bb.bgColor,points:[l,c.reverse()].flat(2),perfectDrawEnabled:!1,listening:!1,closed:!0}},{type:"Line",attrs:{stroke:t.theme.indicators.bb.upperlineColor,strokeWidth:n.thickness,points:l,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:t.theme.indicators.bb.middlelineColor,strokeWidth:n.thickness,points:d,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:t.theme.indicators.bb.lowerlineColor,strokeWidth:n.thickness,points:c.flat(1),perfectDrawEnabled:!1,listening:!1}}]},Va=i0;var c0=JSON.stringify;function u0(n,t){if(!n.series)return[];let s=t.type==="SMA"?_indicators.SMA:_indicators.EMA,o=new s(Number(t.length));return _optionalChain([n, 'access', _61 => _61.series, 'optionalAccess', _62 => _62.map, 'call', _63 => _63(a=>({i:a.i,value:o.nextValue(a.close)}))])}function d0(n,t){if(!n.series)return[];let s=new (0, _indicators.BollingerBands)(Number(t.length),Number(t.stdDev));return _optionalChain([n, 'access', _64 => _64.series, 'optionalAccess', _65 => _65.map, 'call', _66 => _66(o=>({i:o.i,values:s.nextValue(o.close)})), 'access', _67 => _67.filter, 'call', _68 => _68(o=>o.values)])}var m0={[_.MA]:u0,[_.BB]:d0},h0={[_.MA]:Ba,[_.BB]:Va};function oi({layerRef:n}){let{config:t,setConfig:s,frame:o,data:a}=M(),l=ie(n.current),d=se("indicators");return d.loaded&&(l.destroyAll(),t.indicators.mainChart.forEach((c,u)=>{let y=`${c.indicator.replace(/\s/g,"")+u}.mainChart`;if(c.active){let x=(m0[c.indicator]||(()=>[]))(a,c);if(!x.length)return;let C=()=>{l(h0[c.indicator],{key:y,indicator:c,scales:d,series:x,frame:o,config:t})};C(),d.onChange(C,y)}else d.offChange(y),l.destroy(y)})),_react.useEffect.call(void 0, ()=>{t.indicators.mainChart.some(c=>c.shouldRemove)&&s({...t,indicators:{...t.indicators,mainChart:t.indicators.mainChart.filter(c=>!c.shouldRemove)}})},[c0(t.indicators.mainChart)]),null}var _maxBy = require('lodash/maxBy'); var _maxBy2 = _interopRequireDefault(_maxBy);var _filter = require('lodash/filter'); var _filter2 = _interopRequireDefault(_filter);var v0=JSON.stringify;function k0({frame:n,x:t,height:s,stepWidth:o,color:a}){let l=Qo;o>10?l=3:o>5?l=2:o>2.5&&(l=1);let d=Math.max(o-l,.5),c=n.mainChart.yEnd-s;return[{type:"Rect",attrs:{x:t+l/2,y:c,width:d,height:s,fill:_polished.transparentize.call(void 0, .75,a),transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1}}]}function ii({layerRef:n}){let{frame:t,data:s,config:o}=M(),a=ie(n.current),l=se("volumes");_react.useEffect.call(void 0, ()=>{if(_optionalChain([s, 'access', _69 => _69.series, 'optionalAccess', _70 => _70[0], 'access', _71 => _71.volume])){let d=()=>{if(!l.loaded)return;let c=t.mainChart.height*.2,u=_optionalChain([_maxBy2.default.call(void 0, _filter2.default.call(void 0, s.series,y=>_inRange2.default.call(void 0, y.i,...l.x.domain())),"volume"), 'optionalAccess', _72 => _72.volume])||0,h=(_last2.default.call(void 0, l.x.range())-l.x.range()[0])/(_last2.default.call(void 0, l.x.domain())-l.x.domain()[0]);_forEach2.default.call(void 0, s.series,({i:y,close:g,open:x,volume:C})=>{let k=l.x(y);a(k0,{key:y,show:_inRange2.default.call(void 0, k,t.mainChart.xStart-h,t.mainChart.xEnd+h),x:k,stepWidth:h,height:C/u*c,color:g>=x?o.theme.candleUpColor:o.theme.candleDownColor})})};d(),l.onChange(d)}return()=>{a.destroyAll()}},[s.seriesId,l.loaded,o.timeframe.id,v0(t.mainChart)])}function si(){let{frame:n}=M(),t=_react.useRef.call(void 0, );return de.default.createElement(j,{ref:t,clipX:n.mainChart.xStart,clipY:n.mainChart.yStart,clipWidth:n.mainChart.width,clipHeight:n.mainChart.height},de.default.createElement(oi,{layerRef:t}),de.default.createElement(ii,{layerRef:t}),de.default.createElement(ri,{layerRef:t}))}function M0({loading:n}){let{frame:t,config:s}=M();return n?de.default.createElement(j,null,de.default.createElement(_reactkonvautils.Html,{divProps:{style:{width:"100%"}}},de.default.createElement(ur,{$absolute:!0,$left:t.mainInner.xStart,$top:t.mainInner.yStart,$width:t.mainInner.width,$height:t.mainInner.height,$background:_polished.transparentize.call(void 0, .5,s.theme.bgColor)}))):null}var Ga=M0;function T0(){let{config:n,dispatch:t}=M(),[s,o]=_react.useState.call(void 0, null),[a,l]=_react.useState.call(void 0, null);return _react.useEffect.call(void 0, ()=>{t.on("contextmenu.menusOverlay",d=>{o({x:d.offsetX,y:d.offsetY})}),t.on("pointerdown.menusOverlay",()=>{o(null)}),t.on("hoverDrawing.menusOverlay",d=>{l(d)})},[t]),de.default.createElement(j,null,s&&de.default.createElement(_reactkonvautils.Html,{divProps:{style:{width:"100%"}}},de.default.createElement(_styledcomponents.ThemeProvider,{theme:Et.theme},de.default.createElement(He,{onOutsideClick:()=>o(null),$top:s.y,$left:s.x,$py:.75,$w:256,$color:n.theme.popoverMenu.color,showAngle:!1,$textAlign:"left",$maxH:192,$height:"auto",$overflowY:"scroll"},de.default.createElement(kt,{onClick:()=>{t.call("resetZoom"),t.call("rerender"),o(null)}},"Reset Chart"),de.default.createElement(Ct,{$my:.5}),de.default.createElement(kt,{disabled:!a,onClick:()=>{t.call("removeDrawing",null,a),o(null)}},"Remove Drawing"),de.default.createElement(kt,{onClick:()=>{t.call("removeDrawings"),o(null)}},"Remove Drawings")))))}var Za=T0;function Ka({config:n,frame:t,candle:s}){let o=n.theme.ohlcvOverlay,a=t.mainChart.yStart+o.overlayMarginTop,l=a+n.theme.fontSize+o.itemMarginBottom,d=l+n.theme.fontSize+o.itemMarginBottom,c={fontFamily:n.theme.fontFamily,fontStyle:n.theme.fontStyle,fontSize:o.fontSize,fill:o.keyColor},u={fontFamily:n.theme.fontFamily,fontStyle:n.theme.fontStyle,fontSize:o.fontSize,fill:o.valueColor},h=new _konva2.default.Text({text:"Volume",...c}).getTextWidth(),y=new _konva2.default.Text({text:"Close",...c}).getTextWidth(),g=t.mainChart.xStart+h+o.itemMarginRight,x=g+Math.ceil(Math.max(new _konva2.default.Text({text:n.formatters.axes.y(s.high),...c}).getTextWidth(),new _konva2.default.Text({text:n.formatters.axes.y(s.low),...c}).getTextWidth()))+o.colMarginRight,C=x+y+o.itemMarginRight,D=C+Math.ceil(Math.max(new _konva2.default.Text({text:n.formatters.axes.y(s.open),...c}).getTextWidth(),new _konva2.default.Text({text:n.formatters.axes.y(s.high),...c}).getTextWidth()))+o.overlayMarginRight-t.mainChart.xStart,$=d+n.theme.fontSize+o.overlayMarginBottom-t.mainChart.yStart;return[{type:"Rect",attrs:{x:t.mainChart.xStart,y:t.mainChart.yStart,width:D,height:$,fill:_polished.transparentize.call(void 0, .3,n.theme.bgColor),cornerRadius:[0,0,8,0]}},{type:"Text",attrs:{text:"High",x:t.mainChart.xStart,y:a,...c}},{type:"Text",attrs:{text:n.formatters.axes.y(s.high),x:g,y:a,...u}},{type:"Text",attrs:{text:"Low",x:t.mainChart.xStart,y:l,...c}},{type:"Text",attrs:{text:n.formatters.axes.y(s.low),x:g,y:l,...u}},{type:"Text",attrs:{text:"Volume",x:t.mainChart.xStart,y:d,...c}},{type:"Text",attrs:{text:_optionalChain([s, 'access', _73 => _73.volume, 'optionalAccess', _74 => _74.toLocaleString, 'call', _75 => _75("en-US")]),x:g,y:d,...u}},{type:"Text",attrs:{text:"Open",x,y:a,...c}},{type:"Text",attrs:{text:n.formatters.axes.y(s.open),x:C,y:a,...u}},{type:"Text",attrs:{text:"Close",x,y:l,...c}},{type:"Text",attrs:{text:n.formatters.axes.y(s.close),x:C,y:l,...u}}]}function E0(){let{config:n,data:t,dispatch:s}=M(),o=_react.useRef.call(void 0, ),a=ie(o.current);return _react.useEffect.call(void 0, ()=>{t.series&&n.width>=640?(a(Ka,{key:"ohlcvOverlay",candle:_last2.default.call(void 0, t.series)}),s.on("candle.ohlcvOverlay",d=>{a(Ka,{key:"ohlcvOverlay",candle:d||_last2.default.call(void 0, t.series)})})):(a.destroyAll(),s.on("candle.ohlcvOverlay",null))},[s,t.seriesId,n.width]),de.default.createElement(j,{ref:o})}var Ja=E0;var _useimage = require('use-image'); var _useimage2 = _interopRequireDefault(_useimage);function P0({loading:n}){let{frame:t,config:s}=M(),[o,a]=_useimage2.default.call(void 0, "/assets/logo-chart.svg","anonymous","origin"),l=4;return de.default.createElement(j,null,!(n||a!=="loaded"||s.width<=416)&&de.default.createElement(de.default.Fragment,null,de.default.createElement(Te,{x:t.mainChart.xStart,y:t.mainChart.yEnd-l*3-28,width:103+l,height:28+l*2,fill:_polished.transparentize.call(void 0, .25,s.theme.bgColor),cornerRadius:[0,8,8,0]}),de.default.createElement(cs,{x:t.mainChart.xStart,y:t.mainChart.yEnd-l*2-28,width:103,height:28,image:o})))}var Qa=P0;var N0=JSON.stringify;function F0({frame:n,config:t,value:s,x:o,emphasize:a}){return[{type:"Line",attrs:{points:[o,n.xAxis.yStart,o,n.xAxis.yStart+t.theme.axes.tickSize],stroke:t.theme.axes.tickColor,strokeWidth:1,perfectDrawEnabled:!1,listening:!1}},{type:"Text",attrs:{fontFamily:t.theme.fontFamily,fontStyle:a?600:t.theme.fontStyle,fontSize:t.theme.axes.fontSize,fill:a?t.theme.axes.emphasizeColor:t.theme.axes.color,x:o,y:n.xAxis.yStart+t.theme.axes.tickSize+t.theme.axes.tickMargin,text:s,listening:!1}}]}function B0(){let{dispatch:n,frame:t,config:s}=M(),o=_react.useRef.call(void 0, ),a=_react.useRef.call(void 0, []),l=ie(o.current),d=se("xAxis");return _react.useEffect.call(void 0, ()=>{d.onChange(()=>{let c={};_forEach2.default.call(void 0, d.xTicks,(u,h)=>{let y=u.i;h===0&&u.x+50>_optionalChain([d, 'access', _76 => _76.xTicks, 'optionalAccess', _77 => _77[1], 'optionalAccess', _78 => _78.x])||(l(F0,{key:y,show:_inRange2.default.call(void 0, u.x,t.mainChart.xStart,t.mainChart.xEnd),value:u.value,x:u.x,emphasize:u.emphasize}),c[y]=y)}),_forEach2.default.call(void 0, a.current,u=>{c[u]||l.destroy(u)}),a.current=Object.keys(c)})},[n,o.current,N0(t.xAxis)]),de.default.createElement(j,{ref:o})}var rl=B0;function V0(){let{config:n,data:t,frame:s}=M(),o=_react.useRef.call(void 0, []),a=_react.useRef.call(void 0, ),l=_react.useRef.call(void 0, ),d=ie(a.current),c=ie(l.current),u=se("yAxis");if(a.current&&u.loaded&&t.series){let h=()=>{let g={};_forEach2.default.call(void 0, u.yTicks,D=>{let $=D.value,I=D.y!==void 0&&!Number.isNaN(D.y)&&_inRange2.default.call(void 0, D.y,u.y.range()[0],_last2.default.call(void 0, u.y.range()))&&_inRange2.default.call(void 0, D.value,u.y.domain()[0],_last2.default.call(void 0, u.y.domain()));d(xn,{key:$,show:I,value:n.formatters.axes.y(D.value),y:D.y}),g[$]=$}),_forEach2.default.call(void 0, o.current,D=>{g[D]||d.destroy(D)}),o.current=Object.keys(g);let x=_last2.default.call(void 0, t.series),C=u.y(x.close),k=x.close>x.open?n.theme.candleUpColor:n.theme.candleDownColor;d.destroy("lastClose"),d(It,{key:"lastClose",y:C,show:_inRange2.default.call(void 0, C,s.yAxis.yStart,s.yAxis.yEnd),text:n.formatters.axes.y(x.close),fill:k})};h(),u.onChange(h),(()=>{c(({frame:g,config:x})=>[{type:"Line",attrs:{stroke:x.theme.axes.lineColor,strokeWidth:1,points:[g.xAxis.xStart,g.xAxis.yStart,g.xAxis.xEnd,g.xAxis.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:x.theme.axes.lineColor,strokeWidth:1,points:[g.yAxis.xStart,g.yAxis.yStart,g.yAxis.xStart,g.yAxis.yEnd],perfectDrawEnabled:!1,listening:!1}}],{key:"axeslines"})})()}return de.default.createElement(de.default.Fragment,null,de.default.createElement(j,{ref:a}),de.default.createElement(j,{ref:l}))}var ol=V0;var U0=n=>t=>{n.current.content.style.cursor=t},il=U0;function ui(...n){return t=>{n.filter(Boolean).forEach(s=>{s.current=t})}}var _deepmerge = require('deepmerge'); var _deepmerge2 = _interopRequireDefault(_deepmerge);var _friendlynumbers = require('friendly-numbers');var v={fontFamily:'-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif',colorMap:{0:"#0094FF",1:"#4db705",2:"#d6c103",3:"#e3482d",4:"#e21de7"},primary:"#0094FF",greenCandle:"#24C1B0",redCandle:"#FF5959",fill900:"#F5F7FB",fill800:"#E7EBFA",fill700:"#CAD3ED",fill600:"#ADB7D3",fill500:"#95A0BF",fill400:"#7D88AA",fill300:"#4A5169",fill200:"#3E4459",fill100:"#313747",border:"#3E4459",background:"#232936",backgroundDarker:"#1d222d",backgroundDarkest:"#181c25"},mt=Ss(v),di={title:"",xKey:"x",yKey:"y",formatters:{axes:{x:n=>_momenttimezone2.default.tz(n,"America/New_York").format("MMM \u2019YY"),y:n=>_friendlynumbers.format.call(void 0, n,{formattedDecimals:2})},crosshair:{x:n=>_momenttimezone2.default.tz(n,"America/New_York").format("D MMM \u2019YY HH:mm"),y:n=>_friendlynumbers.format.call(void 0, n,{formattedDecimals:2})}},tool:"crosshair",screenshotFileFormat:"{date} - Streamlined Finance.{fileType}",excludeWeekend:!0,session:"0400-2000",timezone:"America/New_York",fullscreen:!1,showFullscreenButton:!0,initialCandlesWindow:150,mobileThreshold:768,theme:{colors:Object.values(v.colorMap),bgColor:v.backgroundDarker,borderRadius:10,lineColor:v.primary,lineWidth:1.5,lineCircleSize:10,candleUpColor:v.greenCandle,candleDownColor:v.redCandle,fontFamily:v.fontFamily,fontSize:14,fontStyle:500,color:v.fill600,padding:[20,24,24,24],title:{fontSize:14,marginBottom:12,color:v.fill800,colorHover:v.fill900},subtitle:{fontSize:13,marginBottom:12,color:v.fill600,colorHover:v.fill700},header:{angleDownSize:10,angleDownColor:v.fill600,angleDownColorHover:v.fill800,toolbarBorderColor:v.fill200,buttonFontSize:13,buttonColor:v.fill500,buttonColorHover:v.fill800,buttonColorActive:v.fill800,buttonBgColorActive:v.fill100,buttonBorderColor:v.fill300,buttonBorderColorActive:v.primary,marginRight:20,background:v.backgroundDarker},legend:{fontSize:13,color:v.fill600,itemMarginRight:12,itemMarginBottom:8,marginBottom:12,circle:{positionTop:0,size:11,marginRight:6,lineWidth:1.5}},grid:{lineColor:v.fill100,showY:!0,showX:!1},axes:{fontSize:13,color:v.fill500,emphasizeColor:v.fill600,lineColor:v.fill300,tickColor:v.fill300,tickSize:8,tickMargin:4,lastValueTickBgSize:20,xEndShiftRatio:1.05,minTickWidthX:60,minTickSpaceY:8,hoverColor:_polished.transparentize.call(void 0, .95,v.fill400)},indicatorWindow:{splitLineColor:v.fill300,splitLineWidth:2,bgColor:v.background,color:v.fill500,settingsColor:v.fill600},crosshair:{color:v.fill800,tickColor:v.fill800,tickBgColor:v.fill200,lineColor:v.fill500,lineDash:[3,4]},ohlcvOverlay:{keyColor:v.fill500,valueColor:v.fill600,fontSize:13,overlayMarginTop:8,overlayMarginBottom:8,overlayMarginRight:8,itemMarginBottom:8,itemMarginRight:16,colMarginRight:24},menu:{bgColor:v.background,borderColor:v.fill300,borderWidth:1,borderRadius:6,padding:6,item:{padding:10,fontSize:13,color:v.fill700,colorHover:v.fill900,colorActive:v.fill800,bgColorHover:_polished.tint.call(void 0, .03,v.background),bgColorActive:v.backgroundDarkest,borderRadius:8}},input:{labelColor:v.fill500,labelBgColor:v.background,color:v.fill700,bgColor:_polished.tint.call(void 0, .02,v.background),bgColorHover:_polished.tint.call(void 0, .03,v.background),bgColorDarker:_polished.tint.call(void 0, .02,v.backgroundDarker),bgColorDarkerHover:_polished.tint.call(void 0, .03,v.backgroundDarker)},button:{borderColor:v.fill200,borderColorHover:v.fill300,borderColorActive:v.primary,color:v.fill700,colorHover:v.fill800,colorActive:v.primary},popoverMenu:{zIndex:9999,background:v.backgroundDarker,bgColor:v.backgroundDarker,borderColor:v.fill300,color:v.fill700,uppercaseColor:v.fill500},indicatorsMenu:{titleColor:v.fill800,subtitleColor:v.fill500,indicatorTextColor:v.fill700,borderColor:v.fill200,settingsColor:v.fill500,buttonBgColor:_polished.tint.call(void 0, .02,v.background),buttonBorderColor:v.fill700,buttonBorderColorActive:v.fill900,labelColor:v.fill600,addIconColor:v.fill500,addIconColorActive:v.fill800,settingsColorActive:v.primary,removeIconColor:v.fill400},drawingToolbar:{colors:[v.primary,v.greenCandle,v.redCandle,v.fill800,v.fill600],iconColor:v.fill800,bgColor:v.backgroundDarker,borderColor:v.fill300,closeColor:v.fill600,closeBgColor:v.fill100,textColor:v.fill500,textColorActive:v.fill800,textBgColor:v.fill100},switch:{activeBgColor:_polished.transparentize.call(void 0, .25,v.primary),inactiveBgColor:v.fill300,activeColor:v.fill800,inactiveColor:v.fill600},dragList:{topZIndex:9999,borderColor:v.fill200,bgColorHover:v.backgroundDarker,handleBgColorHover:v.backgroundDarkest,handleColor:v.fill300},close:{bgColorActive:v.backgroundDarkest,color:v.fill400,colorHover:v.fill900,colorActive:v.fill700},indicators:{bb:{bgColor:_polished.transparentize.call(void 0, .5,v.backgroundDarkest),upperlineColor:v.red,middlelineColor:v.primary,lowerlineColor:v.greenCandle},macd:{bgColor:_polished.transparentize.call(void 0, .5,v.backgroundDarkest),histogramColor:v.greenCandle,histogramBgColor:_polished.transparentize.call(void 0, .25,v.greenCandle),signalLineColor:v.primary,signalLineBgColor:_polished.transparentize.call(void 0, .25,v.primary),histogramBarColor:v.redCandle,histogramBarBgColor:_polished.transparentize.call(void 0, .25,v.redCandle)},roc:{zeroLineColor:v.fill300},rsi:{bgColor:v.backgroundDarkest,upperLineColor:v.fill400,lowerLineColor:v.fill400,middleLineColor:v.fill300},stochastic:{bgColor:v.backgroundDarkest,upperLineColor:v.fill400,lowerLineColor:v.fill400,middleLineColor:v.fill300}}},indicators:{showMenu:!1,currentScreen:"Indicators",currentScreenMeta:[],mainChart:[mt[_.BB],mt[_.MA]],windows:[mt[_.MACD],mt[_.RSI],mt[_.ATR],mt[_.STO],mt[_.ROC]],defaultConfig:mt}};var{stringify:Z0}=JSON;function ll(n){return{..._deepmerge2.default.call(void 0, di,gn(n)),indicators:n.indicators||di.indicators}}function mi(n){let[t,s]=_react.useState.call(void 0, ll(n));return _react.useEffect.call(void 0, ()=>{s(ll(n))},[Z0(n)]),[t,s]}var _map = require('lodash/map'); var _map2 = _interopRequireDefault(_map);var _reverse = require('lodash/reverse'); var _reverse2 = _interopRequireDefault(_reverse);function fl(n,t,s){return`${n}:${t}:${_optionalChain([s, 'optionalAccess', _79 => _79.length])?`${s[0].time}:${s[0].close}-${_last2.default.call(void 0, s).time}:${_last2.default.call(void 0, s).close}:${s.length}`:null}`}function tg(n,t,s){return`${n}:${t}:${_optionalChain([s, 'optionalAccess', _80 => _80.length])?`${s[0].time}-${_last2.default.call(void 0, s).time}:${s.length}`:null}`}function rg(n,t,s,o,a){let d=n[0].time<_last2.default.call(void 0, n).time?n:_reverse2.default.call(void 0, n);t.zeroIndex=Math.max(0,d.length-s),t.series=_map2.default.call(void 0, d,(c,u)=>({i:u-t.zeroIndex,...c})),t.seriesId=fl(o,a,t.series),t.timeSeriesId=tg(o,a,t.series),t.scaleId=`${o}:${a}`,t.timeframe=a}function hi(n,t,s,o,a){let l=_react.useRef.call(void 0, {}),[d,c]=_react.useState.call(void 0, {zeroIndex:void 0,series:null,seriesId:void 0,timeframe:void 0});return _react.useEffect.call(void 0, ()=>{if(_optionalChain([n, 'optionalAccess', _81 => _81.length])){let u=l.current;u[s]=u[s]||{},u[s][o.id]=u[s][o.id]||{},rg(n,u[s][o.id],t,s,o.id),c({...u[s][o.id]})}},[fl(s,o.id,n),o.id,a]),d}var _sum = require('lodash/sum'); var _sum2 = _interopRequireDefault(_sum);var{stringify:ag}=JSON;function bt(n){return n.width=n.xEnd-n.xStart,n.height=n.yEnd-n.yStart,n}function lg(n,t){let{theme:s}=n;if(!(n.width>0))return null;let o=bt({yStart:Array.isArray(s.padding)?s.padding[0]:s.padding,xEnd:n.width-(Array.isArray(s.padding)?s.padding[1]:s.padding),yEnd:n.height-(Array.isArray(s.padding)?s.padding[2]:s.padding),xStart:Array.isArray(s.padding)?s.padding[3]:s.padding}),l=bt({xStart:o.xStart,xEnd:o.xEnd,yStart:o.yStart,yEnd:o.yStart+48}),d=0;if(t.series){let D=_last2.default.call(void 0, t.series).close,$=String(D).length,I=new _konva2.default.Text({text:n.formatters.axes.y(Array($).fill("0").join("")),fontFamily:s.axes.fontFamily||s.fontFamily,fontSize:s.axes.fontSize}).getTextWidth();d=Math.ceil(I/5)*5}let c=s.axes.tickSize+s.axes.tickMargin+d+s.axes.tickMargin*2,u=s.axes.tickSize+s.axes.tickMargin+s.axes.fontSize,h=bt({xStart:o.xStart,xEnd:o.xEnd-c,yStart:l.yEnd,yEnd:o.yEnd}),y=_sortBy2.default.call(void 0, n.indicators.windows.filter(D=>D.active),"order"),g=y.reduce((D,$)=>{let I=_sum2.default.call(void 0, y.filter(W=>!D.some(H=>H.indicator===W.indicator)).map(W=>W.height||W.defaultHeight));return[...D,{indicator:$.indicator,xStart:h.xStart,xEnd:h.xEnd,yStart:h.yEnd-u-I,yEnd:h.yEnd-u-I+($.height||$.defaultHeight)}]},[]).map(bt),x=bt({xStart:h.xStart,xEnd:h.xEnd,yStart:l.yEnd,yEnd:g.length?g[0].yStart:h.yEnd-u}),C=bt({xStart:x.xStart,xEnd:x.xEnd,yStart:g.length?_last2.default.call(void 0, g).yEnd:x.yEnd,yEnd:o.yEnd});h.yEnd=C.yStart;let k=bt({xStart:x.xEnd,xEnd:o.xEnd,yStart:x.yStart,yEnd:x.yEnd});return{bodyInner:o,header:l,mainInner:h,mainChart:x,indicatorWindows:g,xAxis:C,yAxis:k}}function fg(n,t){return _react.useMemo.call(void 0, ()=>lg(n,t),[n.width,n.height,ag(n.indicators.windows),t.seriesId])}var ul=fg;var hg=JSON.stringify;function pg({fwdRef:n,data:t,config:s,loading:o,onLoadMore:a,onTimeframeChange:l,onSymbolClick:d,onDrawings:c,onFullscreen:u,onConfig:h}){let y=_react.useRef.call(void 0, ),g=_react.useMemo.call(void 0, ()=>_d3dispatch.dispatch.call(void 0, "mousemove","pointerdown","pointerup","zoom","zoomX","zoomY","resetZoom","rerender","dragX","dragY","scale","candle","hoverDrawing","removeDrawing","removeDrawings","contextmenu"),[]),[x,C]=mi(s),k=hi(t,x.initialCandlesWindow,x.symbol.code,x.timeframe,g),D=ul(x,k),$=il(y);_react.useEffect.call(void 0, ()=>{typeof u=="function"&&u(x.fullscreen)},[u,x.fullscreen]),_react.useEffect.call(void 0, ()=>{typeof h=="function"&&h(x)},[hg(x)]),_react.useEffect.call(void 0, ()=>{if(!document.getElementById("streamlined-container")){let W=document.createElement("div");W.id="streamlined-container",document.body.appendChild(W)}},[]);let I={stageRef:y,config:x,setConfig:C,data:k,frame:D,setCursor:$,dispatch:g};return D?de.default.createElement(ls,{ref:ui(n,y),width:x.width,height:x.height},de.default.createElement(Xn.Provider,{value:I},de.default.createElement(j,null,de.default.createElement(Te,{x:0,y:0,width:x.width,height:x.width,cornerRadius:x.theme.borderRadius,fill:x.theme.bgColor})),de.default.createElement(Da,{onTimeframeChange:l,onSymbolClick:d}),de.default.createElement(ol,null),de.default.createElement(rl,null),de.default.createElement(si,null),de.default.createElement(ro,{onDrawings:c}),de.default.createElement(Jo,null),de.default.createElement(Ds,null),de.default.createElement(Ja,null),de.default.createElement(Za,null),de.default.createElement(Qa,{loading:o}),de.default.createElement(Ps,{onLoadMore:a}),de.default.createElement(Ga,{loading:o}))):null}var Q2=_react.memo.call(void 0, pg,Zr);exports.default = Q2;
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.30.1 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)
*/
//# sourceMappingURL=Chart-GN6GR7JX.cjs.map