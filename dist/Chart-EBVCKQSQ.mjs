import{a as ps,b as yd,c as xd}from"./chunk-AHONOM5Y.mjs";var pa=yd((Do,Nt)=>{(function(n,t){typeof Do=="object"&&typeof Nt<"u"?Nt.exports=t():typeof define=="function"&&define.amd?define(t):n.moment=t()})(Do,(function(){"use strict";var n;function t(){return n.apply(null,arguments)}function s(e){n=e}function o(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function a(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function l(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function d(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var r;for(r in e)if(l(e,r))return!1;return!0}function c(e){return e===void 0}function u(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function h(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function y(e,r){var i=[],f,m=e.length;for(f=0;f<m;++f)i.push(r(e[f],f));return i}function g(e,r){for(var i in r)l(r,i)&&(e[i]=r[i]);return l(r,"toString")&&(e.toString=r.toString),l(r,"valueOf")&&(e.valueOf=r.valueOf),e}function x(e,r,i,f){return ji(e,r,i,f,!0).utc()}function C(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function k(e){return e._pf==null&&(e._pf=C()),e._pf}var D;Array.prototype.some?D=Array.prototype.some:D=function(e){var r=Object(this),i=r.length>>>0,f;for(f=0;f<i;f++)if(f in r&&e.call(this,r[f],f,r))return!0;return!1};function $(e){var r=null,i=!1,f=e._d&&!isNaN(e._d.getTime());if(f&&(r=k(e),i=D.call(r.parsedDateParts,function(m){return m!=null}),f=r.overflow<0&&!r.empty&&!r.invalidEra&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&i),e._strict&&(f=f&&r.charsLeftOver===0&&r.unusedTokens.length===0&&r.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=f;else return f;return e._isValid}function I(e){var r=x(NaN);return e!=null?g(k(r),e):k(r).userInvalidated=!0,r}var W=t.momentProperties=[],H=!1;function B(e,r){var i,f,m,p=W.length;if(c(r._isAMomentObject)||(e._isAMomentObject=r._isAMomentObject),c(r._i)||(e._i=r._i),c(r._f)||(e._f=r._f),c(r._l)||(e._l=r._l),c(r._strict)||(e._strict=r._strict),c(r._tzm)||(e._tzm=r._tzm),c(r._isUTC)||(e._isUTC=r._isUTC),c(r._offset)||(e._offset=r._offset),c(r._pf)||(e._pf=k(r)),c(r._locale)||(e._locale=r._locale),p>0)for(i=0;i<p;i++)f=W[i],m=r[f],c(m)||(e[f]=m);return e}function U(e){B(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),H===!1&&(H=!0,t.updateOffset(this),H=!1)}function S(e){return e instanceof U||e!=null&&e._isAMomentObject!=null}function Z(e){t.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function F(e,r){var i=!0;return g(function(){if(t.deprecationHandler!=null&&t.deprecationHandler(null,e),i){var f=[],m,p,w,T=arguments.length;for(p=0;p<T;p++){if(m="",typeof arguments[p]=="object"){m+=`
[`+p+"] ";for(w in arguments[0])l(arguments[0],w)&&(m+=w+": "+arguments[0][w]+", ");m=m.slice(0,-2)}else m=arguments[p];f.push(m)}Z(e+`
Arguments: `+Array.prototype.slice.call(f).join("")+`
`+new Error().stack),i=!1}return r.apply(this,arguments)},r)}var be={};function ne(e,r){t.deprecationHandler!=null&&t.deprecationHandler(e,r),be[e]||(Z(r),be[e]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function ce(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function L(e){var r,i;for(i in e)l(e,i)&&(r=e[i],ce(r)?this[i]=r:this["_"+i]=r);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function A(e,r){var i=g({},e),f;for(f in r)l(r,f)&&(a(e[f])&&a(r[f])?(i[f]={},g(i[f],e[f]),g(i[f],r[f])):r[f]!=null?i[f]=r[f]:delete i[f]);for(f in e)l(e,f)&&!l(r,f)&&a(e[f])&&(i[f]=g({},i[f]));return i}function te(e){e!=null&&this.set(e)}var re;Object.keys?re=Object.keys:re=function(e){var r,i=[];for(r in e)l(e,r)&&i.push(r);return i};var q={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Fe(e,r,i){var f=this._calendar[e]||this._calendar.sameElse;return ce(f)?f.call(r,i):f}function fe(e,r,i){var f=""+Math.abs(e),m=r-f.length,p=e>=0;return(p?i?"+":"":"-")+Math.pow(10,Math.max(0,m)).toString().substr(1)+f}var we=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,De=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Tn={},$t={};function Y(e,r,i,f){var m=f;typeof f=="string"&&(m=function(){return this[f]()}),e&&($t[e]=m),r&&($t[r[0]]=function(){return fe(m.apply(this,arguments),r[1],r[2])}),i&&($t[i]=function(){return this.localeData().ordinal(m.apply(this,arguments),e)})}function kl(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Cl(e){var r=e.match(we),i,f;for(i=0,f=r.length;i<f;i++)$t[r[i]]?r[i]=$t[r[i]]:r[i]=kl(r[i]);return function(m){var p="",w;for(w=0;w<f;w++)p+=ce(r[w])?r[w].call(m,e):r[w];return p}}function _r(e,r){return e.isValid()?(r=Si(r,e.localeData()),Tn[r]=Tn[r]||Cl(r),Tn[r](e)):e.localeData().invalidDate()}function Si(e,r){var i=5;function f(m){return r.longDateFormat(m)||m}for(De.lastIndex=0;i>=0&&De.test(e);)e=e.replace(De,f),De.lastIndex=0,i-=1;return e}var bl={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Sl(e){var r=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return r||!i?r:(this._longDateFormat[e]=i.match(we).map(function(f){return f==="MMMM"||f==="MM"||f==="DD"||f==="dddd"?f.slice(1):f}).join(""),this._longDateFormat[e])}var Ml="Invalid date";function Dl(){return this._invalidDate}var $l="%d",_l=/\d{1,2}/;function Tl(e){return this._ordinal.replace("%d",e)}var Ol={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ll(e,r,i,f){var m=this._relativeTime[i];return ce(m)?m(e,r,i,f):m.replace(/%d/i,e)}function Al(e,r){var i=this._relativeTime[e>0?"future":"past"];return ce(i)?i(r):i.replace(/%s/i,r)}var Mi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function $e(e){return typeof e=="string"?Mi[e]||Mi[e.toLowerCase()]:void 0}function On(e){var r={},i,f;for(f in e)l(e,f)&&(i=$e(f),i&&(r[i]=e[f]));return r}var Yl={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function El(e){var r=[],i;for(i in e)l(e,i)&&r.push({unit:i,priority:Yl[i]});return r.sort(function(f,m){return f.priority-m.priority}),r}var Di=/\d/,Se=/\d\d/,$i=/\d{3}/,Ln=/\d{4}/,Tr=/[+-]?\d{6}/,K=/\d\d?/,_i=/\d\d\d\d?/,Ti=/\d\d\d\d\d\d?/,Or=/\d{1,3}/,An=/\d{1,4}/,Lr=/[+-]?\d{1,6}/,_t=/\d+/,Ar=/[+-]?\d+/,Wl=/Z|[+-]\d\d:?\d\d/gi,Yr=/Z|[+-]\d\d(?::?\d\d)?/gi,Il=/[+-]?\d+(\.\d{1,3})?/,Xt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Tt=/^[1-9]\d?/,Yn=/^([1-9]\d|\d)/,Er;Er={};function O(e,r,i){Er[e]=ce(r)?r:function(f,m){return f&&i?i:r}}function zl(e,r){return l(Er,e)?Er[e](r._strict,r._locale):new RegExp(Pl(e))}function Pl(e){return Be(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(r,i,f,m,p){return i||f||m||p}))}function Be(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function _e(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function P(e){var r=+e,i=0;return r!==0&&isFinite(r)&&(i=_e(r)),i}var En={};function G(e,r){var i,f=r,m;for(typeof e=="string"&&(e=[e]),u(r)&&(f=function(p,w){w[r]=P(p)}),m=e.length,i=0;i<m;i++)En[e[i]]=f}function Zt(e,r){G(e,function(i,f,m,p){m._w=m._w||{},r(i,m._w,m,p)})}function Rl(e,r,i){r!=null&&l(En,e)&&En[e](r,i._a,i,e)}function Wr(e){return e%4===0&&e%100!==0||e%400===0}var he=0,Ve=1,ze=2,ue=3,Ye=4,Ue=5,pt=6,Hl=7,Nl=8;Y("Y",0,0,function(){var e=this.year();return e<=9999?fe(e,4):"+"+e}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),O("Y",Ar),O("YY",K,Se),O("YYYY",An,Ln),O("YYYYY",Lr,Tr),O("YYYYYY",Lr,Tr),G(["YYYYY","YYYYYY"],he),G("YYYY",function(e,r){r[he]=e.length===2?t.parseTwoDigitYear(e):P(e)}),G("YY",function(e,r){r[he]=t.parseTwoDigitYear(e)}),G("Y",function(e,r){r[he]=parseInt(e,10)});function qt(e){return Wr(e)?366:365}t.parseTwoDigitYear=function(e){return P(e)+(P(e)>68?1900:2e3)};var Oi=Ot("FullYear",!0);function Fl(){return Wr(this.year())}function Ot(e,r){return function(i){return i!=null?(Li(this,e,i),t.updateOffset(this,r),this):Kt(this,e)}}function Kt(e,r){if(!e.isValid())return NaN;var i=e._d,f=e._isUTC;switch(r){case"Milliseconds":return f?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return f?i.getUTCSeconds():i.getSeconds();case"Minutes":return f?i.getUTCMinutes():i.getMinutes();case"Hours":return f?i.getUTCHours():i.getHours();case"Date":return f?i.getUTCDate():i.getDate();case"Day":return f?i.getUTCDay():i.getDay();case"Month":return f?i.getUTCMonth():i.getMonth();case"FullYear":return f?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Li(e,r,i){var f,m,p,w,T;if(!(!e.isValid()||isNaN(i))){switch(f=e._d,m=e._isUTC,r){case"Milliseconds":return void(m?f.setUTCMilliseconds(i):f.setMilliseconds(i));case"Seconds":return void(m?f.setUTCSeconds(i):f.setSeconds(i));case"Minutes":return void(m?f.setUTCMinutes(i):f.setMinutes(i));case"Hours":return void(m?f.setUTCHours(i):f.setHours(i));case"Date":return void(m?f.setUTCDate(i):f.setDate(i));case"FullYear":break;default:return}p=i,w=e.month(),T=e.date(),T=T===29&&w===1&&!Wr(p)?28:T,m?f.setUTCFullYear(p,w,T):f.setFullYear(p,w,T)}}function Bl(e){return e=$e(e),ce(this[e])?this[e]():this}function Vl(e,r){if(typeof e=="object"){e=On(e);var i=El(e),f,m=i.length;for(f=0;f<m;f++)this[i[f].unit](e[i[f].unit])}else if(e=$e(e),ce(this[e]))return this[e](r);return this}function Ul(e,r){return(e%r+r)%r}var oe;Array.prototype.indexOf?oe=Array.prototype.indexOf:oe=function(e){var r;for(r=0;r<this.length;++r)if(this[r]===e)return r;return-1};function Wn(e,r){if(isNaN(e)||isNaN(r))return NaN;var i=Ul(r,12);return e+=(r-i)/12,i===1?Wr(e)?29:28:31-i%7%2}Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),Y("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("M",K,Tt),O("MM",K,Se),O("MMM",function(e,r){return r.monthsShortRegex(e)}),O("MMMM",function(e,r){return r.monthsRegex(e)}),G(["M","MM"],function(e,r){r[Ve]=P(e)-1}),G(["MMM","MMMM"],function(e,r,i,f){var m=i._locale.monthsParse(e,f,i._strict);m!=null?r[Ve]=m:k(i).invalidMonth=e});var jl="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ai="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Yi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gl=Xt,Xl=Xt;function Zl(e,r){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Yi).test(r)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone}function ql(e,r){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Yi.test(r)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Kl(e,r,i){var f,m,p,w=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],f=0;f<12;++f)p=x([2e3,f]),this._shortMonthsParse[f]=this.monthsShort(p,"").toLocaleLowerCase(),this._longMonthsParse[f]=this.months(p,"").toLocaleLowerCase();return i?r==="MMM"?(m=oe.call(this._shortMonthsParse,w),m!==-1?m:null):(m=oe.call(this._longMonthsParse,w),m!==-1?m:null):r==="MMM"?(m=oe.call(this._shortMonthsParse,w),m!==-1?m:(m=oe.call(this._longMonthsParse,w),m!==-1?m:null)):(m=oe.call(this._longMonthsParse,w),m!==-1?m:(m=oe.call(this._shortMonthsParse,w),m!==-1?m:null))}function Jl(e,r,i){var f,m,p;if(this._monthsParseExact)return Kl.call(this,e,r,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),f=0;f<12;f++){if(m=x([2e3,f]),i&&!this._longMonthsParse[f]&&(this._longMonthsParse[f]=new RegExp("^"+this.months(m,"").replace(".","")+"$","i"),this._shortMonthsParse[f]=new RegExp("^"+this.monthsShort(m,"").replace(".","")+"$","i")),!i&&!this._monthsParse[f]&&(p="^"+this.months(m,"")+"|^"+this.monthsShort(m,""),this._monthsParse[f]=new RegExp(p.replace(".",""),"i")),i&&r==="MMMM"&&this._longMonthsParse[f].test(e))return f;if(i&&r==="MMM"&&this._shortMonthsParse[f].test(e))return f;if(!i&&this._monthsParse[f].test(e))return f}}function Ei(e,r){if(!e.isValid())return e;if(typeof r=="string"){if(/^\d+$/.test(r))r=P(r);else if(r=e.localeData().monthsParse(r),!u(r))return e}var i=r,f=e.date();return f=f<29?f:Math.min(f,Wn(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,f):e._d.setMonth(i,f),e}function Wi(e){return e!=null?(Ei(this,e),t.updateOffset(this,!0),this):Kt(this,"Month")}function Ql(){return Wn(this.year(),this.month())}function ef(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Ii.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Gl),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function tf(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Ii.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Xl),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Ii(){function e(E,R){return R.length-E.length}var r=[],i=[],f=[],m,p,w,T;for(m=0;m<12;m++)p=x([2e3,m]),w=Be(this.monthsShort(p,"")),T=Be(this.months(p,"")),r.push(w),i.push(T),f.push(T),f.push(w);r.sort(e),i.sort(e),f.sort(e),this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function rf(e,r,i,f,m,p,w){var T;return e<100&&e>=0?(T=new Date(e+400,r,i,f,m,p,w),isFinite(T.getFullYear())&&T.setFullYear(e)):T=new Date(e,r,i,f,m,p,w),T}function Jt(e){var r,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,r=new Date(Date.UTC.apply(null,i)),isFinite(r.getUTCFullYear())&&r.setUTCFullYear(e)):r=new Date(Date.UTC.apply(null,arguments)),r}function Ir(e,r,i){var f=7+r-i,m=(7+Jt(e,0,f).getUTCDay()-r)%7;return-m+f-1}function zi(e,r,i,f,m){var p=(7+i-f)%7,w=Ir(e,f,m),T=1+7*(r-1)+p+w,E,R;return T<=0?(E=e-1,R=qt(E)+T):T>qt(e)?(E=e+1,R=T-qt(e)):(E=e,R=T),{year:E,dayOfYear:R}}function Qt(e,r,i){var f=Ir(e.year(),r,i),m=Math.floor((e.dayOfYear()-f-1)/7)+1,p,w;return m<1?(w=e.year()-1,p=m+je(w,r,i)):m>je(e.year(),r,i)?(p=m-je(e.year(),r,i),w=e.year()+1):(w=e.year(),p=m),{week:p,year:w}}function je(e,r,i){var f=Ir(e,r,i),m=Ir(e+1,r,i);return(qt(e)-f+m)/7}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),O("w",K,Tt),O("ww",K,Se),O("W",K,Tt),O("WW",K,Se),Zt(["w","ww","W","WW"],function(e,r,i,f){r[f.substr(0,1)]=P(e)});function nf(e){return Qt(e,this._week.dow,this._week.doy).week}var of={dow:0,doy:6};function sf(){return this._week.dow}function af(){return this._week.doy}function lf(e){var r=this.localeData().week(this);return e==null?r:this.add((e-r)*7,"d")}function ff(e){var r=Qt(this,1,4).week;return e==null?r:this.add((e-r)*7,"d")}Y("d",0,"do","day"),Y("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),Y("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),Y("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),O("d",K),O("e",K),O("E",K),O("dd",function(e,r){return r.weekdaysMinRegex(e)}),O("ddd",function(e,r){return r.weekdaysShortRegex(e)}),O("dddd",function(e,r){return r.weekdaysRegex(e)}),Zt(["dd","ddd","dddd"],function(e,r,i,f){var m=i._locale.weekdaysParse(e,f,i._strict);m!=null?r.d=m:k(i).invalidWeekday=e}),Zt(["d","e","E"],function(e,r,i,f){r[f]=P(e)});function cf(e,r){return typeof e!="string"?e:isNaN(e)?(e=r.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function uf(e,r){return typeof e=="string"?r.weekdaysParse(e)%7||7:isNaN(e)?null:e}function In(e,r){return e.slice(r,7).concat(e.slice(0,r))}var df="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),mf="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),hf=Xt,pf=Xt,gf=Xt;function yf(e,r){var i=o(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(r)?"format":"standalone"];return e===!0?In(i,this._week.dow):e?i[e.day()]:i}function xf(e){return e===!0?In(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function wf(e){return e===!0?In(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function vf(e,r,i){var f,m,p,w=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],f=0;f<7;++f)p=x([2e3,1]).day(f),this._minWeekdaysParse[f]=this.weekdaysMin(p,"").toLocaleLowerCase(),this._shortWeekdaysParse[f]=this.weekdaysShort(p,"").toLocaleLowerCase(),this._weekdaysParse[f]=this.weekdays(p,"").toLocaleLowerCase();return i?r==="dddd"?(m=oe.call(this._weekdaysParse,w),m!==-1?m:null):r==="ddd"?(m=oe.call(this._shortWeekdaysParse,w),m!==-1?m:null):(m=oe.call(this._minWeekdaysParse,w),m!==-1?m:null):r==="dddd"?(m=oe.call(this._weekdaysParse,w),m!==-1||(m=oe.call(this._shortWeekdaysParse,w),m!==-1)?m:(m=oe.call(this._minWeekdaysParse,w),m!==-1?m:null)):r==="ddd"?(m=oe.call(this._shortWeekdaysParse,w),m!==-1||(m=oe.call(this._weekdaysParse,w),m!==-1)?m:(m=oe.call(this._minWeekdaysParse,w),m!==-1?m:null)):(m=oe.call(this._minWeekdaysParse,w),m!==-1||(m=oe.call(this._weekdaysParse,w),m!==-1)?m:(m=oe.call(this._shortWeekdaysParse,w),m!==-1?m:null))}function kf(e,r,i){var f,m,p;if(this._weekdaysParseExact)return vf.call(this,e,r,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),f=0;f<7;f++){if(m=x([2e3,1]).day(f),i&&!this._fullWeekdaysParse[f]&&(this._fullWeekdaysParse[f]=new RegExp("^"+this.weekdays(m,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[f]=new RegExp("^"+this.weekdaysShort(m,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[f]=new RegExp("^"+this.weekdaysMin(m,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[f]||(p="^"+this.weekdays(m,"")+"|^"+this.weekdaysShort(m,"")+"|^"+this.weekdaysMin(m,""),this._weekdaysParse[f]=new RegExp(p.replace(".",""),"i")),i&&r==="dddd"&&this._fullWeekdaysParse[f].test(e))return f;if(i&&r==="ddd"&&this._shortWeekdaysParse[f].test(e))return f;if(i&&r==="dd"&&this._minWeekdaysParse[f].test(e))return f;if(!i&&this._weekdaysParse[f].test(e))return f}}function Cf(e){if(!this.isValid())return e!=null?this:NaN;var r=Kt(this,"Day");return e!=null?(e=cf(e,this.localeData()),this.add(e-r,"d")):r}function bf(e){if(!this.isValid())return e!=null?this:NaN;var r=(this.day()+7-this.localeData()._week.dow)%7;return e==null?r:this.add(e-r,"d")}function Sf(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var r=uf(e,this.localeData());return this.day(this.day()%7?r:r-7)}else return this.day()||7}function Mf(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||zn.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=hf),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Df(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||zn.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=pf),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $f(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||zn.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=gf),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function zn(){function e(pe,Ke){return Ke.length-pe.length}var r=[],i=[],f=[],m=[],p,w,T,E,R;for(p=0;p<7;p++)w=x([2e3,1]).day(p),T=Be(this.weekdaysMin(w,"")),E=Be(this.weekdaysShort(w,"")),R=Be(this.weekdays(w,"")),r.push(T),i.push(E),f.push(R),m.push(T),m.push(E),m.push(R);r.sort(e),i.sort(e),f.sort(e),m.sort(e),this._weekdaysRegex=new RegExp("^("+m.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+f.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Pn(){return this.hours()%12||12}function _f(){return this.hours()||24}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,Pn),Y("k",["kk",2],0,_f),Y("hmm",0,0,function(){return""+Pn.apply(this)+fe(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+Pn.apply(this)+fe(this.minutes(),2)+fe(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+fe(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+fe(this.minutes(),2)+fe(this.seconds(),2)});function Ri(e,r){Y(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),r)})}Ri("a",!0),Ri("A",!1);function Hi(e,r){return r._meridiemParse}O("a",Hi),O("A",Hi),O("H",K,Yn),O("h",K,Tt),O("k",K,Tt),O("HH",K,Se),O("hh",K,Se),O("kk",K,Se),O("hmm",_i),O("hmmss",Ti),O("Hmm",_i),O("Hmmss",Ti),G(["H","HH"],ue),G(["k","kk"],function(e,r,i){var f=P(e);r[ue]=f===24?0:f}),G(["a","A"],function(e,r,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),G(["h","hh"],function(e,r,i){r[ue]=P(e),k(i).bigHour=!0}),G("hmm",function(e,r,i){var f=e.length-2;r[ue]=P(e.substr(0,f)),r[Ye]=P(e.substr(f)),k(i).bigHour=!0}),G("hmmss",function(e,r,i){var f=e.length-4,m=e.length-2;r[ue]=P(e.substr(0,f)),r[Ye]=P(e.substr(f,2)),r[Ue]=P(e.substr(m)),k(i).bigHour=!0}),G("Hmm",function(e,r,i){var f=e.length-2;r[ue]=P(e.substr(0,f)),r[Ye]=P(e.substr(f))}),G("Hmmss",function(e,r,i){var f=e.length-4,m=e.length-2;r[ue]=P(e.substr(0,f)),r[Ye]=P(e.substr(f,2)),r[Ue]=P(e.substr(m))});function Tf(e){return(e+"").toLowerCase().charAt(0)==="p"}var Of=/[ap]\.?m?\.?/i,Lf=Ot("Hours",!0);function Af(e,r,i){return e>11?i?"pm":"PM":i?"am":"AM"}var Ni={calendar:q,longDateFormat:bl,invalidDate:Ml,ordinal:$l,dayOfMonthOrdinalParse:_l,relativeTime:Ol,months:jl,monthsShort:Ai,week:of,weekdays:df,weekdaysMin:mf,weekdaysShort:Pi,meridiemParse:Of},Q={},er={},tr;function Yf(e,r){var i,f=Math.min(e.length,r.length);for(i=0;i<f;i+=1)if(e[i]!==r[i])return i;return f}function Fi(e){return e&&e.toLowerCase().replace("_","-")}function Ef(e){for(var r=0,i,f,m,p;r<e.length;){for(p=Fi(e[r]).split("-"),i=p.length,f=Fi(e[r+1]),f=f?f.split("-"):null;i>0;){if(m=zr(p.slice(0,i).join("-")),m)return m;if(f&&f.length>=i&&Yf(p,f)>=i-1)break;i--}r++}return tr}function Wf(e){return!!(e&&e.match("^[^/\\\\]*$"))}function zr(e){var r=null,i;if(Q[e]===void 0&&typeof Nt<"u"&&Nt&&Nt.exports&&Wf(e))try{r=tr._abbr,i=ps,i("./locale/"+e),it(r)}catch{Q[e]=null}return Q[e]}function it(e,r){var i;return e&&(c(r)?i=Ge(e):i=Rn(e,r),i?tr=i:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),tr._abbr}function Rn(e,r){if(r!==null){var i,f=Ni;if(r.abbr=e,Q[e]!=null)ne("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),f=Q[e]._config;else if(r.parentLocale!=null)if(Q[r.parentLocale]!=null)f=Q[r.parentLocale]._config;else if(i=zr(r.parentLocale),i!=null)f=i._config;else return er[r.parentLocale]||(er[r.parentLocale]=[]),er[r.parentLocale].push({name:e,config:r}),null;return Q[e]=new te(A(f,r)),er[e]&&er[e].forEach(function(m){Rn(m.name,m.config)}),it(e),Q[e]}else return delete Q[e],null}function If(e,r){if(r!=null){var i,f,m=Ni;Q[e]!=null&&Q[e].parentLocale!=null?Q[e].set(A(Q[e]._config,r)):(f=zr(e),f!=null&&(m=f._config),r=A(m,r),f==null&&(r.abbr=e),i=new te(r),i.parentLocale=Q[e],Q[e]=i),it(e)}else Q[e]!=null&&(Q[e].parentLocale!=null?(Q[e]=Q[e].parentLocale,e===it()&&it(e)):Q[e]!=null&&delete Q[e]);return Q[e]}function Ge(e){var r;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return tr;if(!o(e)){if(r=zr(e),r)return r;e=[e]}return Ef(e)}function zf(){return re(Q)}function Hn(e){var r,i=e._a;return i&&k(e).overflow===-2&&(r=i[Ve]<0||i[Ve]>11?Ve:i[ze]<1||i[ze]>Wn(i[he],i[Ve])?ze:i[ue]<0||i[ue]>24||i[ue]===24&&(i[Ye]!==0||i[Ue]!==0||i[pt]!==0)?ue:i[Ye]<0||i[Ye]>59?Ye:i[Ue]<0||i[Ue]>59?Ue:i[pt]<0||i[pt]>999?pt:-1,k(e)._overflowDayOfYear&&(r<he||r>ze)&&(r=ze),k(e)._overflowWeeks&&r===-1&&(r=Hl),k(e)._overflowWeekday&&r===-1&&(r=Nl),k(e).overflow=r),e}var Pf=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Rf=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Hf=/Z|[+-]\d\d(?::?\d\d)?/,Pr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Nn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Nf=/^\/?Date\((-?\d+)/i,Ff=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Bf={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Bi(e){var r,i,f=e._i,m=Pf.exec(f)||Rf.exec(f),p,w,T,E,R=Pr.length,pe=Nn.length;if(m){for(k(e).iso=!0,r=0,i=R;r<i;r++)if(Pr[r][1].exec(m[1])){w=Pr[r][0],p=Pr[r][2]!==!1;break}if(w==null){e._isValid=!1;return}if(m[3]){for(r=0,i=pe;r<i;r++)if(Nn[r][1].exec(m[3])){T=(m[2]||" ")+Nn[r][0];break}if(T==null){e._isValid=!1;return}}if(!p&&T!=null){e._isValid=!1;return}if(m[4])if(Hf.exec(m[4]))E="Z";else{e._isValid=!1;return}e._f=w+(T||"")+(E||""),Bn(e)}else e._isValid=!1}function Vf(e,r,i,f,m,p){var w=[Uf(e),Ai.indexOf(r),parseInt(i,10),parseInt(f,10),parseInt(m,10)];return p&&w.push(parseInt(p,10)),w}function Uf(e){var r=parseInt(e,10);return r<=49?2e3+r:r<=999?1900+r:r}function jf(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Gf(e,r,i){if(e){var f=Pi.indexOf(e),m=new Date(r[0],r[1],r[2]).getDay();if(f!==m)return k(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function Xf(e,r,i){if(e)return Bf[e];if(r)return 0;var f=parseInt(i,10),m=f%100,p=(f-m)/100;return p*60+m}function Vi(e){var r=Ff.exec(jf(e._i)),i;if(r){if(i=Vf(r[4],r[3],r[2],r[5],r[6],r[7]),!Gf(r[1],i,e))return;e._a=i,e._tzm=Xf(r[8],r[9],r[10]),e._d=Jt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),k(e).rfc2822=!0}else e._isValid=!1}function Zf(e){var r=Nf.exec(e._i);if(r!==null){e._d=new Date(+r[1]);return}if(Bi(e),e._isValid===!1)delete e._isValid;else return;if(Vi(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:t.createFromInputFallback(e)}t.createFromInputFallback=F("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Lt(e,r,i){return e??r??i}function qf(e){var r=new Date(t.now());return e._useUTC?[r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()]:[r.getFullYear(),r.getMonth(),r.getDate()]}function Fn(e){var r,i,f=[],m,p,w;if(!e._d){for(m=qf(e),e._w&&e._a[ze]==null&&e._a[Ve]==null&&Kf(e),e._dayOfYear!=null&&(w=Lt(e._a[he],m[he]),(e._dayOfYear>qt(w)||e._dayOfYear===0)&&(k(e)._overflowDayOfYear=!0),i=Jt(w,0,e._dayOfYear),e._a[Ve]=i.getUTCMonth(),e._a[ze]=i.getUTCDate()),r=0;r<3&&e._a[r]==null;++r)e._a[r]=f[r]=m[r];for(;r<7;r++)e._a[r]=f[r]=e._a[r]==null?r===2?1:0:e._a[r];e._a[ue]===24&&e._a[Ye]===0&&e._a[Ue]===0&&e._a[pt]===0&&(e._nextDay=!0,e._a[ue]=0),e._d=(e._useUTC?Jt:rf).apply(null,f),p=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ue]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==p&&(k(e).weekdayMismatch=!0)}}function Kf(e){var r,i,f,m,p,w,T,E,R;r=e._w,r.GG!=null||r.W!=null||r.E!=null?(p=1,w=4,i=Lt(r.GG,e._a[he],Qt(J(),1,4).year),f=Lt(r.W,1),m=Lt(r.E,1),(m<1||m>7)&&(E=!0)):(p=e._locale._week.dow,w=e._locale._week.doy,R=Qt(J(),p,w),i=Lt(r.gg,e._a[he],R.year),f=Lt(r.w,R.week),r.d!=null?(m=r.d,(m<0||m>6)&&(E=!0)):r.e!=null?(m=r.e+p,(r.e<0||r.e>6)&&(E=!0)):m=p),f<1||f>je(i,p,w)?k(e)._overflowWeeks=!0:E!=null?k(e)._overflowWeekday=!0:(T=zi(i,f,m,p,w),e._a[he]=T.year,e._dayOfYear=T.dayOfYear)}t.ISO_8601=function(){},t.RFC_2822=function(){};function Bn(e){if(e._f===t.ISO_8601){Bi(e);return}if(e._f===t.RFC_2822){Vi(e);return}e._a=[],k(e).empty=!0;var r=""+e._i,i,f,m,p,w,T=r.length,E=0,R,pe;for(m=Si(e._f,e._locale).match(we)||[],pe=m.length,i=0;i<pe;i++)p=m[i],f=(r.match(zl(p,e))||[])[0],f&&(w=r.substr(0,r.indexOf(f)),w.length>0&&k(e).unusedInput.push(w),r=r.slice(r.indexOf(f)+f.length),E+=f.length),$t[p]?(f?k(e).empty=!1:k(e).unusedTokens.push(p),Rl(p,f,e)):e._strict&&!f&&k(e).unusedTokens.push(p);k(e).charsLeftOver=T-E,r.length>0&&k(e).unusedInput.push(r),e._a[ue]<=12&&k(e).bigHour===!0&&e._a[ue]>0&&(k(e).bigHour=void 0),k(e).parsedDateParts=e._a.slice(0),k(e).meridiem=e._meridiem,e._a[ue]=Jf(e._locale,e._a[ue],e._meridiem),R=k(e).era,R!==null&&(e._a[he]=e._locale.erasConvertYear(R,e._a[he])),Fn(e),Hn(e)}function Jf(e,r,i){var f;return i==null?r:e.meridiemHour!=null?e.meridiemHour(r,i):(e.isPM!=null&&(f=e.isPM(i),f&&r<12&&(r+=12),!f&&r===12&&(r=0)),r)}function Qf(e){var r,i,f,m,p,w,T=!1,E=e._f.length;if(E===0){k(e).invalidFormat=!0,e._d=new Date(NaN);return}for(m=0;m<E;m++)p=0,w=!1,r=B({},e),e._useUTC!=null&&(r._useUTC=e._useUTC),r._f=e._f[m],Bn(r),$(r)&&(w=!0),p+=k(r).charsLeftOver,p+=k(r).unusedTokens.length*10,k(r).score=p,T?p<f&&(f=p,i=r):(f==null||p<f||w)&&(f=p,i=r,w&&(T=!0));g(e,i||r)}function ec(e){if(!e._d){var r=On(e._i),i=r.day===void 0?r.date:r.day;e._a=y([r.year,r.month,i,r.hour,r.minute,r.second,r.millisecond],function(f){return f&&parseInt(f,10)}),Fn(e)}}function tc(e){var r=new U(Hn(Ui(e)));return r._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Ui(e){var r=e._i,i=e._f;return e._locale=e._locale||Ge(e._l),r===null||i===void 0&&r===""?I({nullInput:!0}):(typeof r=="string"&&(e._i=r=e._locale.preparse(r)),S(r)?new U(Hn(r)):(h(r)?e._d=r:o(i)?Qf(e):i?Bn(e):rc(e),$(e)||(e._d=null),e))}function rc(e){var r=e._i;c(r)?e._d=new Date(t.now()):h(r)?e._d=new Date(r.valueOf()):typeof r=="string"?Zf(e):o(r)?(e._a=y(r.slice(0),function(i){return parseInt(i,10)}),Fn(e)):a(r)?ec(e):u(r)?e._d=new Date(r):t.createFromInputFallback(e)}function ji(e,r,i,f,m){var p={};return(r===!0||r===!1)&&(f=r,r=void 0),(i===!0||i===!1)&&(f=i,i=void 0),(a(e)&&d(e)||o(e)&&e.length===0)&&(e=void 0),p._isAMomentObject=!0,p._useUTC=p._isUTC=m,p._l=i,p._i=e,p._f=r,p._strict=f,tc(p)}function J(e,r,i,f){return ji(e,r,i,f,!1)}var nc=F("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=J.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:I()}),oc=F("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=J.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:I()});function Gi(e,r){var i,f;if(r.length===1&&o(r[0])&&(r=r[0]),!r.length)return J();for(i=r[0],f=1;f<r.length;++f)(!r[f].isValid()||r[f][e](i))&&(i=r[f]);return i}function ic(){var e=[].slice.call(arguments,0);return Gi("isBefore",e)}function sc(){var e=[].slice.call(arguments,0);return Gi("isAfter",e)}var ac=function(){return Date.now?Date.now():+new Date},rr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function lc(e){var r,i=!1,f,m=rr.length;for(r in e)if(l(e,r)&&!(oe.call(rr,r)!==-1&&(e[r]==null||!isNaN(e[r]))))return!1;for(f=0;f<m;++f)if(e[rr[f]]){if(i)return!1;parseFloat(e[rr[f]])!==P(e[rr[f]])&&(i=!0)}return!0}function fc(){return this._isValid}function cc(){return Ee(NaN)}function Rr(e){var r=On(e),i=r.year||0,f=r.quarter||0,m=r.month||0,p=r.week||r.isoWeek||0,w=r.day||0,T=r.hour||0,E=r.minute||0,R=r.second||0,pe=r.millisecond||0;this._isValid=lc(r),this._milliseconds=+pe+R*1e3+E*6e4+T*1e3*60*60,this._days=+w+p*7,this._months=+m+f*3+i*12,this._data={},this._locale=Ge(),this._bubble()}function Hr(e){return e instanceof Rr}function Vn(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function uc(e,r,i){var f=Math.min(e.length,r.length),m=Math.abs(e.length-r.length),p=0,w;for(w=0;w<f;w++)(i&&e[w]!==r[w]||!i&&P(e[w])!==P(r[w]))&&p++;return p+m}function Xi(e,r){Y(e,0,0,function(){var i=this.utcOffset(),f="+";return i<0&&(i=-i,f="-"),f+fe(~~(i/60),2)+r+fe(~~i%60,2)})}Xi("Z",":"),Xi("ZZ",""),O("Z",Yr),O("ZZ",Yr),G(["Z","ZZ"],function(e,r,i){i._useUTC=!0,i._tzm=Un(Yr,e)});var dc=/([\+\-]|\d\d)/gi;function Un(e,r){var i=(r||"").match(e),f,m,p;return i===null?null:(f=i[i.length-1]||[],m=(f+"").match(dc)||["-",0,0],p=+(m[1]*60)+P(m[2]),p===0?0:m[0]==="+"?p:-p)}function jn(e,r){var i,f;return r._isUTC?(i=r.clone(),f=(S(e)||h(e)?e.valueOf():J(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+f),t.updateOffset(i,!1),i):J(e).local()}function Gn(e){return-Math.round(e._d.getTimezoneOffset())}t.updateOffset=function(){};function mc(e,r,i){var f=this._offset||0,m;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Un(Yr,e),e===null)return this}else Math.abs(e)<16&&!i&&(e=e*60);return!this._isUTC&&r&&(m=Gn(this)),this._offset=e,this._isUTC=!0,m!=null&&this.add(m,"m"),f!==e&&(!r||this._changeInProgress?Ji(this,Ee(e-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?f:Gn(this)}function hc(e,r){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,r),this):-this.utcOffset()}function pc(e){return this.utcOffset(0,e)}function gc(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Gn(this),"m")),this}function yc(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Un(Wl,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function xc(e){return this.isValid()?(e=e?J(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function wc(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function vc(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e={},r;return B(e,this),e=Ui(e),e._a?(r=e._isUTC?x(e._a):J(e._a),this._isDSTShifted=this.isValid()&&uc(e._a,r.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kc(){return this.isValid()?!this._isUTC:!1}function Cc(){return this.isValid()?this._isUTC:!1}function Zi(){return this.isValid()?this._isUTC&&this._offset===0:!1}var bc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Sc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ee(e,r){var i=e,f=null,m,p,w;return Hr(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(i={},r?i[r]=+e:i.milliseconds=+e):(f=bc.exec(e))?(m=f[1]==="-"?-1:1,i={y:0,d:P(f[ze])*m,h:P(f[ue])*m,m:P(f[Ye])*m,s:P(f[Ue])*m,ms:P(Vn(f[pt]*1e3))*m}):(f=Sc.exec(e))?(m=f[1]==="-"?-1:1,i={y:gt(f[2],m),M:gt(f[3],m),w:gt(f[4],m),d:gt(f[5],m),h:gt(f[6],m),m:gt(f[7],m),s:gt(f[8],m)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(w=Mc(J(i.from),J(i.to)),i={},i.ms=w.milliseconds,i.M=w.months),p=new Rr(i),Hr(e)&&l(e,"_locale")&&(p._locale=e._locale),Hr(e)&&l(e,"_isValid")&&(p._isValid=e._isValid),p}Ee.fn=Rr.prototype,Ee.invalid=cc;function gt(e,r){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*r}function qi(e,r){var i={};return i.months=r.month()-e.month()+(r.year()-e.year())*12,e.clone().add(i.months,"M").isAfter(r)&&--i.months,i.milliseconds=+r-+e.clone().add(i.months,"M"),i}function Mc(e,r){var i;return e.isValid()&&r.isValid()?(r=jn(r,e),e.isBefore(r)?i=qi(e,r):(i=qi(r,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Ki(e,r){return function(i,f){var m,p;return f!==null&&!isNaN(+f)&&(ne(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),p=i,i=f,f=p),m=Ee(i,f),Ji(this,m,e),this}}function Ji(e,r,i,f){var m=r._milliseconds,p=Vn(r._days),w=Vn(r._months);e.isValid()&&(f=f??!0,w&&Ei(e,Kt(e,"Month")+w*i),p&&Li(e,"Date",Kt(e,"Date")+p*i),m&&e._d.setTime(e._d.valueOf()+m*i),f&&t.updateOffset(e,p||w))}var Dc=Ki(1,"add"),$c=Ki(-1,"subtract");function Qi(e){return typeof e=="string"||e instanceof String}function _c(e){return S(e)||h(e)||Qi(e)||u(e)||Oc(e)||Tc(e)||e===null||e===void 0}function Tc(e){var r=a(e)&&!d(e),i=!1,f=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],m,p,w=f.length;for(m=0;m<w;m+=1)p=f[m],i=i||l(e,p);return r&&i}function Oc(e){var r=o(e),i=!1;return r&&(i=e.filter(function(f){return!u(f)&&Qi(e)}).length===0),r&&i}function Lc(e){var r=a(e)&&!d(e),i=!1,f=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],m,p;for(m=0;m<f.length;m+=1)p=f[m],i=i||l(e,p);return r&&i}function Ac(e,r){var i=e.diff(r,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Yc(e,r){arguments.length===1&&(arguments[0]?_c(arguments[0])?(e=arguments[0],r=void 0):Lc(arguments[0])&&(r=arguments[0],e=void 0):(e=void 0,r=void 0));var i=e||J(),f=jn(i,this).startOf("day"),m=t.calendarFormat(this,f)||"sameElse",p=r&&(ce(r[m])?r[m].call(this,i):r[m]);return this.format(p||this.localeData().calendar(m,this,J(i)))}function Ec(){return new U(this)}function Wc(e,r){var i=S(e)?e:J(e);return this.isValid()&&i.isValid()?(r=$e(r)||"millisecond",r==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(r).valueOf()):!1}function Ic(e,r){var i=S(e)?e:J(e);return this.isValid()&&i.isValid()?(r=$e(r)||"millisecond",r==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(r).valueOf()<i.valueOf()):!1}function zc(e,r,i,f){var m=S(e)?e:J(e),p=S(r)?r:J(r);return this.isValid()&&m.isValid()&&p.isValid()?(f=f||"()",(f[0]==="("?this.isAfter(m,i):!this.isBefore(m,i))&&(f[1]===")"?this.isBefore(p,i):!this.isAfter(p,i))):!1}function Pc(e,r){var i=S(e)?e:J(e),f;return this.isValid()&&i.isValid()?(r=$e(r)||"millisecond",r==="millisecond"?this.valueOf()===i.valueOf():(f=i.valueOf(),this.clone().startOf(r).valueOf()<=f&&f<=this.clone().endOf(r).valueOf())):!1}function Rc(e,r){return this.isSame(e,r)||this.isAfter(e,r)}function Hc(e,r){return this.isSame(e,r)||this.isBefore(e,r)}function Nc(e,r,i){var f,m,p;if(!this.isValid())return NaN;if(f=jn(e,this),!f.isValid())return NaN;switch(m=(f.utcOffset()-this.utcOffset())*6e4,r=$e(r),r){case"year":p=Nr(this,f)/12;break;case"month":p=Nr(this,f);break;case"quarter":p=Nr(this,f)/3;break;case"second":p=(this-f)/1e3;break;case"minute":p=(this-f)/6e4;break;case"hour":p=(this-f)/36e5;break;case"day":p=(this-f-m)/864e5;break;case"week":p=(this-f-m)/6048e5;break;default:p=this-f}return i?p:_e(p)}function Nr(e,r){if(e.date()<r.date())return-Nr(r,e);var i=(r.year()-e.year())*12+(r.month()-e.month()),f=e.clone().add(i,"months"),m,p;return r-f<0?(m=e.clone().add(i-1,"months"),p=(r-f)/(f-m)):(m=e.clone().add(i+1,"months"),p=(r-f)/(m-f)),-(i+p)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Fc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Bc(e){if(!this.isValid())return null;var r=e!==!0,i=r?this.clone().utc():this;return i.year()<0||i.year()>9999?_r(i,r?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ce(Date.prototype.toISOString)?r?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",_r(i,"Z")):_r(i,r?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Vc(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",r="",i,f,m,p;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),i="["+e+'("]',f=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",m="-MM-DD[T]HH:mm:ss.SSS",p=r+'[")]',this.format(i+f+m+p)}function Uc(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var r=_r(this,e);return this.localeData().postformat(r)}function jc(e,r){return this.isValid()&&(S(e)&&e.isValid()||J(e).isValid())?Ee({to:this,from:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function Gc(e){return this.from(J(),e)}function Xc(e,r){return this.isValid()&&(S(e)&&e.isValid()||J(e).isValid())?Ee({from:this,to:e}).locale(this.locale()).humanize(!r):this.localeData().invalidDate()}function Zc(e){return this.to(J(),e)}function es(e){var r;return e===void 0?this._locale._abbr:(r=Ge(e),r!=null&&(this._locale=r),this)}var ts=F("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function rs(){return this._locale}var Fr=1e3,At=60*Fr,Br=60*At,ns=(365*400+97)*24*Br;function Yt(e,r){return(e%r+r)%r}function os(e,r,i){return e<100&&e>=0?new Date(e+400,r,i)-ns:new Date(e,r,i).valueOf()}function is(e,r,i){return e<100&&e>=0?Date.UTC(e+400,r,i)-ns:Date.UTC(e,r,i)}function qc(e){var r,i;if(e=$e(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?is:os,e){case"year":r=i(this.year(),0,1);break;case"quarter":r=i(this.year(),this.month()-this.month()%3,1);break;case"month":r=i(this.year(),this.month(),1);break;case"week":r=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":r=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":r=i(this.year(),this.month(),this.date());break;case"hour":r=this._d.valueOf(),r-=Yt(r+(this._isUTC?0:this.utcOffset()*At),Br);break;case"minute":r=this._d.valueOf(),r-=Yt(r,At);break;case"second":r=this._d.valueOf(),r-=Yt(r,Fr);break}return this._d.setTime(r),t.updateOffset(this,!0),this}function Kc(e){var r,i;if(e=$e(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?is:os,e){case"year":r=i(this.year()+1,0,1)-1;break;case"quarter":r=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":r=i(this.year(),this.month()+1,1)-1;break;case"week":r=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":r=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":r=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":r=this._d.valueOf(),r+=Br-Yt(r+(this._isUTC?0:this.utcOffset()*At),Br)-1;break;case"minute":r=this._d.valueOf(),r+=At-Yt(r,At)-1;break;case"second":r=this._d.valueOf(),r+=Fr-Yt(r,Fr)-1;break}return this._d.setTime(r),t.updateOffset(this,!0),this}function Jc(){return this._d.valueOf()-(this._offset||0)*6e4}function Qc(){return Math.floor(this.valueOf()/1e3)}function eu(){return new Date(this.valueOf())}function tu(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ru(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function nu(){return this.isValid()?this.toISOString():null}function ou(){return $(this)}function iu(){return g({},k(this))}function su(){return k(this).overflow}function au(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Y("N",0,0,"eraAbbr"),Y("NN",0,0,"eraAbbr"),Y("NNN",0,0,"eraAbbr"),Y("NNNN",0,0,"eraName"),Y("NNNNN",0,0,"eraNarrow"),Y("y",["y",1],"yo","eraYear"),Y("y",["yy",2],0,"eraYear"),Y("y",["yyy",3],0,"eraYear"),Y("y",["yyyy",4],0,"eraYear"),O("N",Xn),O("NN",Xn),O("NNN",Xn),O("NNNN",xu),O("NNNNN",wu),G(["N","NN","NNN","NNNN","NNNNN"],function(e,r,i,f){var m=i._locale.erasParse(e,f,i._strict);m?k(i).era=m:k(i).invalidEra=e}),O("y",_t),O("yy",_t),O("yyy",_t),O("yyyy",_t),O("yo",vu),G(["y","yy","yyy","yyyy"],he),G(["yo"],function(e,r,i,f){var m;i._locale._eraYearOrdinalRegex&&(m=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?r[he]=i._locale.eraYearOrdinalParse(e,m):r[he]=parseInt(e,10)});function lu(e,r){var i,f,m,p=this._eras||Ge("en")._eras;for(i=0,f=p.length;i<f;++i){switch(typeof p[i].since){case"string":m=t(p[i].since).startOf("day"),p[i].since=m.valueOf();break}switch(typeof p[i].until){case"undefined":p[i].until=1/0;break;case"string":m=t(p[i].until).startOf("day").valueOf(),p[i].until=m.valueOf();break}}return p}function fu(e,r,i){var f,m,p=this.eras(),w,T,E;for(e=e.toUpperCase(),f=0,m=p.length;f<m;++f)if(w=p[f].name.toUpperCase(),T=p[f].abbr.toUpperCase(),E=p[f].narrow.toUpperCase(),i)switch(r){case"N":case"NN":case"NNN":if(T===e)return p[f];break;case"NNNN":if(w===e)return p[f];break;case"NNNNN":if(E===e)return p[f];break}else if([w,T,E].indexOf(e)>=0)return p[f]}function cu(e,r){var i=e.since<=e.until?1:-1;return r===void 0?t(e.since).year():t(e.since).year()+(r-e.offset)*i}function uu(){var e,r,i,f=this.localeData().eras();for(e=0,r=f.length;e<r;++e)if(i=this.clone().startOf("day").valueOf(),f[e].since<=i&&i<=f[e].until||f[e].until<=i&&i<=f[e].since)return f[e].name;return""}function du(){var e,r,i,f=this.localeData().eras();for(e=0,r=f.length;e<r;++e)if(i=this.clone().startOf("day").valueOf(),f[e].since<=i&&i<=f[e].until||f[e].until<=i&&i<=f[e].since)return f[e].narrow;return""}function mu(){var e,r,i,f=this.localeData().eras();for(e=0,r=f.length;e<r;++e)if(i=this.clone().startOf("day").valueOf(),f[e].since<=i&&i<=f[e].until||f[e].until<=i&&i<=f[e].since)return f[e].abbr;return""}function hu(){var e,r,i,f,m=this.localeData().eras();for(e=0,r=m.length;e<r;++e)if(i=m[e].since<=m[e].until?1:-1,f=this.clone().startOf("day").valueOf(),m[e].since<=f&&f<=m[e].until||m[e].until<=f&&f<=m[e].since)return(this.year()-t(m[e].since).year())*i+m[e].offset;return this.year()}function pu(e){return l(this,"_erasNameRegex")||Zn.call(this),e?this._erasNameRegex:this._erasRegex}function gu(e){return l(this,"_erasAbbrRegex")||Zn.call(this),e?this._erasAbbrRegex:this._erasRegex}function yu(e){return l(this,"_erasNarrowRegex")||Zn.call(this),e?this._erasNarrowRegex:this._erasRegex}function Xn(e,r){return r.erasAbbrRegex(e)}function xu(e,r){return r.erasNameRegex(e)}function wu(e,r){return r.erasNarrowRegex(e)}function vu(e,r){return r._eraYearOrdinalRegex||_t}function Zn(){var e=[],r=[],i=[],f=[],m,p,w,T,E,R=this.eras();for(m=0,p=R.length;m<p;++m)w=Be(R[m].name),T=Be(R[m].abbr),E=Be(R[m].narrow),r.push(w),e.push(T),i.push(E),f.push(w),f.push(T),f.push(E);this._erasRegex=new RegExp("^("+f.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Vr(e,r){Y(0,[e,e.length],0,r)}Vr("gggg","weekYear"),Vr("ggggg","weekYear"),Vr("GGGG","isoWeekYear"),Vr("GGGGG","isoWeekYear"),O("G",Ar),O("g",Ar),O("GG",K,Se),O("gg",K,Se),O("GGGG",An,Ln),O("gggg",An,Ln),O("GGGGG",Lr,Tr),O("ggggg",Lr,Tr),Zt(["gggg","ggggg","GGGG","GGGGG"],function(e,r,i,f){r[f.substr(0,2)]=P(e)}),Zt(["gg","GG"],function(e,r,i,f){r[f]=t.parseTwoDigitYear(e)});function ku(e){return ss.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Cu(e){return ss.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function bu(){return je(this.year(),1,4)}function Su(){return je(this.isoWeekYear(),1,4)}function Mu(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)}function Du(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)}function ss(e,r,i,f,m){var p;return e==null?Qt(this,f,m).year:(p=je(e,f,m),r>p&&(r=p),$u.call(this,e,r,i,f,m))}function $u(e,r,i,f,m){var p=zi(e,r,i,f,m),w=Jt(p.year,0,p.dayOfYear);return this.year(w.getUTCFullYear()),this.month(w.getUTCMonth()),this.date(w.getUTCDate()),this}Y("Q",0,"Qo","quarter"),O("Q",Di),G("Q",function(e,r){r[Ve]=(P(e)-1)*3});function _u(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Y("D",["DD",2],"Do","date"),O("D",K,Tt),O("DD",K,Se),O("Do",function(e,r){return e?r._dayOfMonthOrdinalParse||r._ordinalParse:r._dayOfMonthOrdinalParseLenient}),G(["D","DD"],ze),G("Do",function(e,r){r[ze]=P(e.match(K)[0])});var as=Ot("Date",!0);Y("DDD",["DDDD",3],"DDDo","dayOfYear"),O("DDD",Or),O("DDDD",$i),G(["DDD","DDDD"],function(e,r,i){i._dayOfYear=P(e)});function Tu(e){var r=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?r:this.add(e-r,"d")}Y("m",["mm",2],0,"minute"),O("m",K,Yn),O("mm",K,Se),G(["m","mm"],Ye);var Ou=Ot("Minutes",!1);Y("s",["ss",2],0,"second"),O("s",K,Yn),O("ss",K,Se),G(["s","ss"],Ue);var Lu=Ot("Seconds",!1);Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return this.millisecond()*10}),Y(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Y(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Y(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Y(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Y(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),O("S",Or,Di),O("SS",Or,Se),O("SSS",Or,$i);var st,ls;for(st="SSSS";st.length<=9;st+="S")O(st,_t);function Au(e,r){r[pt]=P(("0."+e)*1e3)}for(st="S";st.length<=9;st+="S")G(st,Au);ls=Ot("Milliseconds",!1),Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");function Yu(){return this._isUTC?"UTC":""}function Eu(){return this._isUTC?"Coordinated Universal Time":""}var b=U.prototype;b.add=Dc,b.calendar=Yc,b.clone=Ec,b.diff=Nc,b.endOf=Kc,b.format=Uc,b.from=jc,b.fromNow=Gc,b.to=Xc,b.toNow=Zc,b.get=Bl,b.invalidAt=su,b.isAfter=Wc,b.isBefore=Ic,b.isBetween=zc,b.isSame=Pc,b.isSameOrAfter=Rc,b.isSameOrBefore=Hc,b.isValid=ou,b.lang=ts,b.locale=es,b.localeData=rs,b.max=oc,b.min=nc,b.parsingFlags=iu,b.set=Vl,b.startOf=qc,b.subtract=$c,b.toArray=tu,b.toObject=ru,b.toDate=eu,b.toISOString=Bc,b.inspect=Vc,typeof Symbol<"u"&&Symbol.for!=null&&(b[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),b.toJSON=nu,b.toString=Fc,b.unix=Qc,b.valueOf=Jc,b.creationData=au,b.eraName=uu,b.eraNarrow=du,b.eraAbbr=mu,b.eraYear=hu,b.year=Oi,b.isLeapYear=Fl,b.weekYear=ku,b.isoWeekYear=Cu,b.quarter=b.quarters=_u,b.month=Wi,b.daysInMonth=Ql,b.week=b.weeks=lf,b.isoWeek=b.isoWeeks=ff,b.weeksInYear=Mu,b.weeksInWeekYear=Du,b.isoWeeksInYear=bu,b.isoWeeksInISOWeekYear=Su,b.date=as,b.day=b.days=Cf,b.weekday=bf,b.isoWeekday=Sf,b.dayOfYear=Tu,b.hour=b.hours=Lf,b.minute=b.minutes=Ou,b.second=b.seconds=Lu,b.millisecond=b.milliseconds=ls,b.utcOffset=mc,b.utc=pc,b.local=gc,b.parseZone=yc,b.hasAlignedHourOffset=xc,b.isDST=wc,b.isLocal=kc,b.isUtcOffset=Cc,b.isUtc=Zi,b.isUTC=Zi,b.zoneAbbr=Yu,b.zoneName=Eu,b.dates=F("dates accessor is deprecated. Use date instead.",as),b.months=F("months accessor is deprecated. Use month instead",Wi),b.years=F("years accessor is deprecated. Use year instead",Oi),b.zone=F("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",hc),b.isDSTShifted=F("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",vc);function Wu(e){return J(e*1e3)}function Iu(){return J.apply(null,arguments).parseZone()}function fs(e){return e}var V=te.prototype;V.calendar=Fe,V.longDateFormat=Sl,V.invalidDate=Dl,V.ordinal=Tl,V.preparse=fs,V.postformat=fs,V.relativeTime=Ll,V.pastFuture=Al,V.set=L,V.eras=lu,V.erasParse=fu,V.erasConvertYear=cu,V.erasAbbrRegex=gu,V.erasNameRegex=pu,V.erasNarrowRegex=yu,V.months=Zl,V.monthsShort=ql,V.monthsParse=Jl,V.monthsRegex=tf,V.monthsShortRegex=ef,V.week=nf,V.firstDayOfYear=af,V.firstDayOfWeek=sf,V.weekdays=yf,V.weekdaysMin=wf,V.weekdaysShort=xf,V.weekdaysParse=kf,V.weekdaysRegex=Mf,V.weekdaysShortRegex=Df,V.weekdaysMinRegex=$f,V.isPM=Tf,V.meridiem=Af;function Ur(e,r,i,f){var m=Ge(),p=x().set(f,r);return m[i](p,e)}function cs(e,r,i){if(u(e)&&(r=e,e=void 0),e=e||"",r!=null)return Ur(e,r,i,"month");var f,m=[];for(f=0;f<12;f++)m[f]=Ur(e,f,i,"month");return m}function qn(e,r,i,f){typeof e=="boolean"?(u(r)&&(i=r,r=void 0),r=r||""):(r=e,i=r,e=!1,u(r)&&(i=r,r=void 0),r=r||"");var m=Ge(),p=e?m._week.dow:0,w,T=[];if(i!=null)return Ur(r,(i+p)%7,f,"day");for(w=0;w<7;w++)T[w]=Ur(r,(w+p)%7,f,"day");return T}function zu(e,r){return cs(e,r,"months")}function Pu(e,r){return cs(e,r,"monthsShort")}function Ru(e,r,i){return qn(e,r,i,"weekdays")}function Hu(e,r,i){return qn(e,r,i,"weekdaysShort")}function Nu(e,r,i){return qn(e,r,i,"weekdaysMin")}it("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var r=e%10,i=P(e%100/10)===1?"th":r===1?"st":r===2?"nd":r===3?"rd":"th";return e+i}}),t.lang=F("moment.lang is deprecated. Use moment.locale instead.",it),t.langData=F("moment.langData is deprecated. Use moment.localeData instead.",Ge);var Xe=Math.abs;function Fu(){var e=this._data;return this._milliseconds=Xe(this._milliseconds),this._days=Xe(this._days),this._months=Xe(this._months),e.milliseconds=Xe(e.milliseconds),e.seconds=Xe(e.seconds),e.minutes=Xe(e.minutes),e.hours=Xe(e.hours),e.months=Xe(e.months),e.years=Xe(e.years),this}function us(e,r,i,f){var m=Ee(r,i);return e._milliseconds+=f*m._milliseconds,e._days+=f*m._days,e._months+=f*m._months,e._bubble()}function Bu(e,r){return us(this,e,r,1)}function Vu(e,r){return us(this,e,r,-1)}function ds(e){return e<0?Math.floor(e):Math.ceil(e)}function Uu(){var e=this._milliseconds,r=this._days,i=this._months,f=this._data,m,p,w,T,E;return e>=0&&r>=0&&i>=0||e<=0&&r<=0&&i<=0||(e+=ds(Kn(i)+r)*864e5,r=0,i=0),f.milliseconds=e%1e3,m=_e(e/1e3),f.seconds=m%60,p=_e(m/60),f.minutes=p%60,w=_e(p/60),f.hours=w%24,r+=_e(w/24),E=_e(ms(r)),i+=E,r-=ds(Kn(E)),T=_e(i/12),i%=12,f.days=r,f.months=i,f.years=T,this}function ms(e){return e*4800/146097}function Kn(e){return e*146097/4800}function ju(e){if(!this.isValid())return NaN;var r,i,f=this._milliseconds;if(e=$e(e),e==="month"||e==="quarter"||e==="year")switch(r=this._days+f/864e5,i=this._months+ms(r),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(r=this._days+Math.round(Kn(this._months)),e){case"week":return r/7+f/6048e5;case"day":return r+f/864e5;case"hour":return r*24+f/36e5;case"minute":return r*1440+f/6e4;case"second":return r*86400+f/1e3;case"millisecond":return Math.floor(r*864e5)+f;default:throw new Error("Unknown unit "+e)}}function Ze(e){return function(){return this.as(e)}}var hs=Ze("ms"),Gu=Ze("s"),Xu=Ze("m"),Zu=Ze("h"),qu=Ze("d"),Ku=Ze("w"),Ju=Ze("M"),Qu=Ze("Q"),ed=Ze("y"),td=hs;function rd(){return Ee(this)}function nd(e){return e=$e(e),this.isValid()?this[e+"s"]():NaN}function yt(e){return function(){return this.isValid()?this._data[e]:NaN}}var od=yt("milliseconds"),id=yt("seconds"),sd=yt("minutes"),ad=yt("hours"),ld=yt("days"),fd=yt("months"),cd=yt("years");function ud(){return _e(this.days()/7)}var qe=Math.round,Et={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function dd(e,r,i,f,m){return m.relativeTime(r||1,!!i,e,f)}function md(e,r,i,f){var m=Ee(e).abs(),p=qe(m.as("s")),w=qe(m.as("m")),T=qe(m.as("h")),E=qe(m.as("d")),R=qe(m.as("M")),pe=qe(m.as("w")),Ke=qe(m.as("y")),at=p<=i.ss&&["s",p]||p<i.s&&["ss",p]||w<=1&&["m"]||w<i.m&&["mm",w]||T<=1&&["h"]||T<i.h&&["hh",T]||E<=1&&["d"]||E<i.d&&["dd",E];return i.w!=null&&(at=at||pe<=1&&["w"]||pe<i.w&&["ww",pe]),at=at||R<=1&&["M"]||R<i.M&&["MM",R]||Ke<=1&&["y"]||["yy",Ke],at[2]=r,at[3]=+e>0,at[4]=f,dd.apply(null,at)}function hd(e){return e===void 0?qe:typeof e=="function"?(qe=e,!0):!1}function pd(e,r){return Et[e]===void 0?!1:r===void 0?Et[e]:(Et[e]=r,e==="s"&&(Et.ss=r-1),!0)}function gd(e,r){if(!this.isValid())return this.localeData().invalidDate();var i=!1,f=Et,m,p;return typeof e=="object"&&(r=e,e=!1),typeof e=="boolean"&&(i=e),typeof r=="object"&&(f=Object.assign({},Et,r),r.s!=null&&r.ss==null&&(f.ss=r.s-1)),m=this.localeData(),p=md(this,!i,f,m),i&&(p=m.pastFuture(+this,p)),m.postformat(p)}var Jn=Math.abs;function Wt(e){return(e>0)-(e<0)||+e}function jr(){if(!this.isValid())return this.localeData().invalidDate();var e=Jn(this._milliseconds)/1e3,r=Jn(this._days),i=Jn(this._months),f,m,p,w,T=this.asSeconds(),E,R,pe,Ke;return T?(f=_e(e/60),m=_e(f/60),e%=60,f%=60,p=_e(i/12),i%=12,w=e?e.toFixed(3).replace(/\.?0+$/,""):"",E=T<0?"-":"",R=Wt(this._months)!==Wt(T)?"-":"",pe=Wt(this._days)!==Wt(T)?"-":"",Ke=Wt(this._milliseconds)!==Wt(T)?"-":"",E+"P"+(p?R+p+"Y":"")+(i?R+i+"M":"")+(r?pe+r+"D":"")+(m||f||e?"T":"")+(m?Ke+m+"H":"")+(f?Ke+f+"M":"")+(e?Ke+w+"S":"")):"P0D"}var N=Rr.prototype;N.isValid=fc,N.abs=Fu,N.add=Bu,N.subtract=Vu,N.as=ju,N.asMilliseconds=hs,N.asSeconds=Gu,N.asMinutes=Xu,N.asHours=Zu,N.asDays=qu,N.asWeeks=Ku,N.asMonths=Ju,N.asQuarters=Qu,N.asYears=ed,N.valueOf=td,N._bubble=Uu,N.clone=rd,N.get=nd,N.milliseconds=od,N.seconds=id,N.minutes=sd,N.hours=ad,N.days=ld,N.weeks=ud,N.months=fd,N.years=cd,N.humanize=gd,N.toISOString=jr,N.toString=jr,N.toJSON=jr,N.locale=es,N.localeData=rs,N.toIsoString=F("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",jr),N.lang=ts,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),O("x",Ar),O("X",Il),G("X",function(e,r,i){i._d=new Date(parseFloat(e)*1e3)}),G("x",function(e,r,i){i._d=new Date(P(e))});return t.version="2.30.1",s(J),t.fn=b,t.min=ic,t.max=sc,t.now=ac,t.utc=x,t.unix=Wu,t.months=zu,t.isDate=h,t.locale=it,t.invalid=I,t.duration=Ee,t.isMoment=S,t.weekdays=Ru,t.parseZone=Iu,t.localeData=Ge,t.isDuration=Hr,t.monthsShort=Pu,t.weekdaysMin=Nu,t.defineLocale=Rn,t.updateLocale=If,t.locales=zf,t.weekdaysShort=Hu,t.normalizeUnits=$e,t.relativeTimeRounding=hd,t.relativeTimeThreshold=pd,t.calendarFormat=Ac,t.prototype=b,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t}))});import{dispatch as vg}from"d3-dispatch";import me,{memo as kg,useEffect as bi,useMemo as Cg,useRef as bg}from"react";import ao,{useRef as sr,useEffect as lo,useCallback as ut,useState as _s}from"react";import Ts from"lodash/inRange";import sm from"lodash/chunk";import am from"lodash/last";import lt,{forwardRef as ft}from"react";import{Circle as wd,Group as vd,Image as kd,Layer as Cd,Line as bd,Rect as Sd,Stage as Md,Text as Dd}from"react-konva";var gs=ft((n,t)=>lt.createElement(Md,{ref:t,...n,preventDefault:!1})),j=ft((n,t)=>lt.createElement(Cd,{ref:t,...n,preventDefault:!1})),Qn=ft((n,t)=>lt.createElement(vd,{ref:t,...n,preventDefault:!1})),Te=ft((n,t)=>lt.createElement(Sd,{ref:t,...n,preventDefault:!1})),_g=ft((n,t)=>lt.createElement(wd,{ref:t,...n,preventDefault:!1})),ys=ft((n,t)=>lt.createElement(Dd,{ref:t,...n,preventDefault:!1})),eo=ft((n,t)=>lt.createElement(bd,{ref:t,...n,preventDefault:!1})),xs=ft((n,t)=>lt.createElement(kd,{ref:t,...n,preventDefault:!1}));import $d,{useContext as _d}from"react";var to=$d.createContext();function M(){return _d(to)}import{useEffect as ws,useRef as vs,useCallback as Td,useState as Od}from"react";import ks from"konva";var{keys:Ld,values:Ad}=Object,ro=n=>!Number.isNaN(n)&&![0,null,void 0].includes(n),Yd=(n,t)=>!(n==="Rect"&&![t.x,t.y,t.width,t.height].every(ro)||n==="Line"&&!t.points.every(ro)||(n==="Circle"||n==="Text")&&![t.x,t.y].every(ro));function ie(n){let{config:t,frame:s}=M(),o=vs({}),a=vs({}),[l,d]=Od();ws(()=>(d(!0),()=>d(!1)),[]);let c=Td((h,y)=>{if(!y||!Yd(y.type,y))return null;let{key:g,show:x=!0}=y;if(g==null)throw new Error(`renderer(fn, props) props has no key ${JSON.stringify(y,null,2)} ${h}`);let C=a.current[g];if(!x)return C&&(C.destroy(),delete a.current[g]),null;let k=h({config:t,frame:s,node:C,...y}).filter(Boolean);if(!k||!k.length)return C&&(C.destroy(),delete a.current[g]),null;if(C)return k.forEach(($,I)=>{try{C.children[I].setAttrs($.attrs)}catch{}}),C;let D=new ks.Group({key:g});return k.forEach($=>{try{let I=new ks[$.type]($.attrs);D.add(I)}catch(I){console.error(I.stack),console.error($)}}),n.add(D),a.current[g]=D,D},[n?._id,JSON.stringify(s)]);ws(()=>{l&&n?._id&&Ad(o.current).forEach(([h,y])=>{c(h,y),delete o.current[y.key]})},[l,n?._id]);function u(h,y){return!l||!n?.add?(o.current[y.key]=[h,y],null):c(h,y)}return u.queue=o.current,u.nodes=a.current,u.destroy=h=>{a.current[h]&&(a.current[h].destroy(),delete a.current[h])},u.destroyAllWith=h=>{Ld(a.current).filter(y=>y.startsWith(h)).forEach(y=>{a.current[y].destroy(),delete a.current[y],n.draw()})},u.destroyAll=()=>{Object.keys(a.current).forEach(h=>{a.current[h]?.destroy(),delete a.current[h]})},u}import{useRef as Cs,useEffect as Ed,useState as Wd}from"react";var{values:Id}=Object;function se(n){let{dispatch:t}=M(),s=Cs({}),o=Cs({loaded:!1,onChange:(d,c)=>{s.current[c||n]=d},offChange:d=>{delete s.current[d||n]}}),[a,l]=Wd(!1);return Ed(()=>{t.on(`scale.${n}`,d=>{d.x&&(o.current.x=d.x,o.current.xBand=d.xBand,o.current.xTicks=d.xTicks),d.y&&(o.current.y=d.y,o.current.yTicks=d.yTicks),o.current.x&&o.current.y&&(a||(o.current.loaded=!0,l(!0)),Id(s.current).forEach(c=>{c(o.current)}))})},[t]),o.current}import{transparentize as bs}from"polished";function zd({config:n,key:t,points:s,color:o,isHovering:a,isSelected:l}){let d=!!a||!!l;return[{type:"Line",attrs:{key:t,stroke:o,strokeWidth:n.theme.lineWidth,hitStrokeWidth:n.theme.lineWidth+5,points:s,anchor:{points:s,selection:[0,1,2,3]}}},{type:"Circle",attrs:{x:s[0],y:s[1],radius:n.theme.lineCircleSize/2,fill:n.theme.bgColor,stroke:o,strokeWidth:n.theme.lineWidth,visible:!!d,listening:!1}},{type:"Circle",attrs:{x:s[2],y:s[3],radius:n.theme.lineCircleSize/2,fill:n.theme.bgColor,stroke:o,strokeWidth:n.theme.lineWidth,visible:!!d,listening:!1}}]}function Pd({frame:n,config:t,key:s,points:o,color:a,isHovering:l,isSelected:d}){let c=!!l||!!d;return[{type:"Line",attrs:{key:s,stroke:a,strokeWidth:t.theme.lineWidth,hitStrokeWidth:t.theme.lineWidth+5,points:[n.mainChart.xStart,o[1],n.mainChart.xEnd,o[1]],anchor:{points:o,selection:[0,1]}}},{type:"Circle",attrs:{x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}}]}function Rd({frame:n,config:t,key:s,points:o,color:a,isHovering:l,isSelected:d}){let c=!!l||!!d;return[{type:"Line",attrs:{key:s,stroke:a,strokeWidth:t.theme.lineWidth,points:[o[0],n.mainChart.yStart,o[0],n.mainChart.yEnd],anchor:{points:o,selection:[0,1]}}},{type:"Circle",attrs:{key:s,x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}}]}function Hd({frame:n,config:t,key:s,points:o,color:a,isHovering:l,isSelected:d}){let c=!!l||!!d;return[{type:"Rect",attrs:{x:Math.min(o[0],o[2]),y:Math.min(o[1],o[3]),width:Math.abs(o[2]-o[0]),height:Math.abs(o[3]-o[1]),fill:bs(.85,a),listening:!1}},{type:"Line",attrs:{key:s,stroke:a,strokeWidth:1,hitStrokeWidth:t.theme.lineWidth+5,points:[[o[0],o[1]],[o[2],o[1]],[o[2],o[3]],[o[0],o[3]],[o[0],o[1]]].flat(1),anchor:{points:o,selection:[0,1,2,3]}}},{type:"Circle",attrs:{x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}},{type:"Circle",attrs:{x:o[2],y:o[3],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}}]}function Nd({frame:n,config:t,key:s,points:o,color:a,isHovering:l,isSelected:d}){let c=!!l||!!d;return[{type:"Rect",attrs:{x:n.mainChart.xStart,y:o[1],width:n.mainChart.width,height:o[3]-o[1],fill:bs(.85,a),listening:!1}},{type:"Line",attrs:{key:s,stroke:a,strokeWidth:1,hitStrokeWidth:t.theme.lineWidth+5,points:[n.mainChart.xStart,o[1],n.mainChart.xEnd,o[1]],anchor:{points:o,selection:[0,1]}}},{type:"Circle",attrs:{x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}},{type:"Line",attrs:{key:s,stroke:a,strokeWidth:1,dash:[3,4],points:[n.mainChart.xStart,o[1]+(o[3]-o[1])/2,n.mainChart.xEnd,o[1]+(o[3]-o[1])/2],listening:!1}},{type:"Line",attrs:{key:s,stroke:a,strokeWidth:1,hitStrokeWidth:t.theme.lineWidth+5,points:[n.mainChart.xStart,o[3],n.mainChart.xEnd,o[3]],anchor:{points:o,selection:[2,3]}}},{type:"Circle",attrs:{x:o[2],y:o[3],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:a,strokeWidth:t.theme.lineWidth,visible:!!c,listening:!1}}]}var no={small:12,medium:15,large:22};function Fd({frame:n,config:t,key:s,points:o,color:a,text:l,textSize:d,isHovering:c,isSelected:u,isMoving:h}){let y=!!c||!!u;return[{type:"Text",attrs:{key:s,text:l,x:Math.min(o[0],o[2])+4,y:Math.min(o[1],o[3])+4,width:Math.abs(o[2]-o[0])-8,height:Math.abs(o[3]-o[1])-8,fontFamily:t.theme.fontFamily,fontStyle:t.theme.fontStyle,fontSize:no[d],lineHeight:1.4,textDecoration:c&&!u?"underline":"none",fill:a,points:[[o[0],o[1]],[o[2],o[1]],[o[2],o[3]],[o[0],o[3]],[o[0],o[1]]].flat(1),anchor:{points:o,selection:[0,1,2,3]},visible:!u||h}},{type:"Line",attrs:{key:s,text:!0,stroke:t.theme.lineColor,strokeWidth:1,hitStrokeWidth:t.theme.lineWidth+5,points:[[o[0],o[1]],[o[2],o[1]],[o[2],o[3]],[o[0],o[3]],[o[0],o[1]]].flat(1),opacity:y?1:0,anchor:{points:o,selection:[0,1,2,3]}}},{type:"Circle",attrs:{x:o[0],y:o[1],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:t.theme.lineColor,strokeWidth:t.theme.lineWidth,visible:!!y,listening:!1}},{type:"Circle",attrs:{x:o[2],y:o[3],radius:t.theme.lineCircleSize/2,fill:t.theme.bgColor,stroke:t.theme.lineColor,strokeWidth:t.theme.lineWidth,visible:!!y,listening:!1}}]}var Bd={line:zd,hline:Pd,vline:Rd,rect:Hd,harea:Nd,text:Fd};function ve(n){return n.points?Bd[n.type](n):null}import It from"@streamlinedfi/div";import{transparentize as Qd}from"polished";import Pe from"react";import{Html as em}from"react-konva-utils";import{ThemeProvider as tm}from"styled-components";import*as Gr from"react";var Vd=n=>Gr.createElement("svg",{width:20,height:12,viewBox:"0 0 20 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},Gr.createElement("path",{d:"M11.9836 11.7951H7.13934V11.2131C7.56557 11.1858 7.91803 11.1311 8.19672 11.0492C8.48087 10.9672 8.62295 10.8661 8.62295 10.7459C8.62295 10.6967 8.61749 10.6366 8.60656 10.5656C8.59563 10.4945 8.57924 10.4317 8.55738 10.377L7.59016 7.77049H3.51639C3.36339 8.15301 3.23771 8.48634 3.13934 8.77049C3.04645 9.05464 2.96175 9.31694 2.88525 9.55738C2.81421 9.79235 2.76503 9.98361 2.73771 10.1311C2.71038 10.2787 2.69672 10.3989 2.69672 10.4918C2.69672 10.7104 2.86885 10.8798 3.21311 11C3.55738 11.1202 3.94536 11.1913 4.37705 11.2131V11.7951H0V11.2131C0.142077 11.2022 0.319672 11.1721 0.532787 11.123C0.745902 11.0683 0.920765 10.9973 1.05738 10.9098C1.27596 10.7623 1.44536 10.6093 1.56557 10.4508C1.68579 10.2869 1.80328 10.0628 1.91803 9.77869C2.50273 8.31967 3.14754 6.68033 3.85246 4.86066C4.55738 3.04098 5.18579 1.42076 5.73771 0H6.39344L10.2705 10.0328C10.3525 10.2459 10.4454 10.418 10.5492 10.5492C10.653 10.6803 10.7978 10.8087 10.9836 10.9344C11.1093 11.0109 11.2732 11.0765 11.4754 11.1311C11.6776 11.1803 11.847 11.2076 11.9836 11.2131V11.7951ZM7.29508 7.04098L5.53279 2.53279L3.80328 7.04098H7.29508Z",fill:"currentColor"}),Gr.createElement("path",{d:"M19.8443 11.6475C19.5874 11.7404 19.3607 11.8142 19.1639 11.8689C18.9727 11.929 18.7541 11.959 18.5082 11.959C18.082 11.959 17.7404 11.8607 17.4836 11.6639C17.2322 11.4617 17.071 11.1694 17 10.7869H16.9508C16.5956 11.1803 16.2131 11.4809 15.8033 11.6885C15.3989 11.8962 14.9098 12 14.3361 12C13.7295 12 13.2295 11.8142 12.8361 11.4426C12.4481 11.071 12.2541 10.5847 12.2541 9.98361C12.2541 9.67213 12.2978 9.39344 12.3852 9.14754C12.4727 8.90164 12.6038 8.68033 12.7787 8.48361C12.9153 8.31967 13.0956 8.17486 13.3197 8.04918C13.5437 7.91803 13.7541 7.81421 13.9508 7.7377C14.1967 7.64481 14.694 7.47268 15.4426 7.22131C16.1967 6.96994 16.7049 6.77322 16.9672 6.63115V5.81967C16.9672 5.74863 16.9508 5.61202 16.918 5.40984C16.8907 5.20765 16.8279 5.01639 16.7295 4.83607C16.6202 4.63388 16.4645 4.45902 16.2623 4.31148C16.0656 4.15847 15.7842 4.08197 15.418 4.08197C15.1667 4.08197 14.9317 4.12568 14.7131 4.21311C14.5 4.29508 14.3497 4.38251 14.2623 4.47541C14.2623 4.5847 14.2869 4.7459 14.3361 4.95902C14.3907 5.17213 14.418 5.36885 14.418 5.54918C14.418 5.74044 14.3306 5.9153 14.1557 6.07377C13.9863 6.23224 13.7486 6.31148 13.4426 6.31148C13.1694 6.31148 12.9672 6.21585 12.8361 6.02459C12.7104 5.82787 12.6475 5.60929 12.6475 5.36885C12.6475 5.11749 12.735 4.87705 12.9098 4.64754C13.0902 4.41803 13.3224 4.21311 13.6066 4.03279C13.8525 3.87978 14.1503 3.75137 14.5 3.64754C14.8497 3.53825 15.1913 3.48361 15.5246 3.48361C15.9836 3.48361 16.3825 3.51639 16.7213 3.58197C17.0656 3.64208 17.3771 3.77596 17.6557 3.98361C17.9344 4.18579 18.1448 4.46175 18.2869 4.81148C18.4344 5.15574 18.5082 5.60109 18.5082 6.14754C18.5082 6.92896 18.5 7.62295 18.4836 8.22951C18.4672 8.8306 18.459 9.48907 18.459 10.2049C18.459 10.418 18.4945 10.5874 18.5656 10.7131C18.6421 10.8388 18.7568 10.9454 18.9098 11.0328C18.9918 11.082 19.1202 11.1093 19.2951 11.1148C19.4754 11.1202 19.6585 11.123 19.8443 11.123V11.6475ZM16.9836 7.31967C16.5191 7.45628 16.112 7.59016 15.7623 7.72131C15.4126 7.85246 15.0874 8.01639 14.7869 8.21311C14.5137 8.39891 14.2978 8.62022 14.1393 8.87705C13.9809 9.12841 13.9016 9.42896 13.9016 9.77869C13.9016 10.2322 14.0191 10.5656 14.2541 10.7787C14.4945 10.9918 14.7978 11.0984 15.1639 11.0984C15.5519 11.0984 15.8934 11.0055 16.1885 10.8197C16.4836 10.6284 16.7322 10.4044 16.9344 10.1475L16.9836 7.31967Z",fill:"currentColor"})),Ss=Vd;import*as xt from"react";var Ud=n=>xt.createElement("svg",{width:16,height:10,viewBox:"0 0 16 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},xt.createElement("rect",{y:2,width:16,height:6,fill:"currentColor",opacity:.3}),xt.createElement("line",{x1:.5,y1:2,x2:15.5,y2:2,stroke:"currentColor",strokeLinecap:"round"}),xt.createElement("circle",{cx:8,cy:2,r:1.5,fill:"#1D222D",stroke:"currentColor"}),xt.createElement("line",{x1:.5,y1:8,x2:15.5,y2:8,stroke:"currentColor",strokeLinecap:"round"}),xt.createElement("circle",{cx:8,cy:8,r:1.5,fill:"#1D222D",stroke:"currentColor"})),Xr=Ud;import*as Zr from"react";var jd=n=>Zr.createElement("svg",{width:16,height:5,viewBox:"0 0 16 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},Zr.createElement("line",{x1:.75,y1:2.5,x2:15.25,y2:2.5,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"}),Zr.createElement("circle",{cx:8,cy:2.5,r:2,fill:"#1D222D",stroke:"currentColor"})),qr=jd;import*as nr from"react";var Gd=n=>nr.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},nr.createElement("line",{x1:.96967,y1:12.9697,x2:12.9697,y2:.96967,stroke:"currentColor",strokeWidth:1.5}),nr.createElement("circle",{cx:2,cy:12,r:1.5,fill:"#1D222D",stroke:"currentColor"}),nr.createElement("circle",{cx:12,cy:2,r:1.5,fill:"#1D222D",stroke:"currentColor"})),Kr=Gd;import*as or from"react";var Xd=n=>or.createElement("svg",{width:14,height:11,viewBox:"0 0 14 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},or.createElement("rect",{x:2,y:2,width:10.1176,height:6.94118,stroke:"currentColor"}),or.createElement("circle",{cx:2,cy:2,r:1.5,fill:"#1D222D",stroke:"currentColor"}),or.createElement("circle",{cx:12,cy:9,r:1.5,fill:"#1D222D",stroke:"currentColor"})),Jr=Xd;import*as oo from"react";var Zd=n=>oo.createElement("svg",{width:11,height:12,viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},oo.createElement("path",{d:"M11 3.25581H10.3859C10.3325 3.05285 10.2346 2.81325 10.0922 2.537C9.95577 2.25511 9.80151 1.99013 9.62945 1.74207C9.45146 1.48273 9.25566 1.25722 9.04207 1.06554C8.83441 0.868217 8.63269 0.755462 8.43689 0.727273C8.25297 0.704722 8.02157 0.687808 7.74272 0.676533C7.46386 0.665257 7.20577 0.659619 6.96845 0.659619H6.45227V10.2579C6.45227 10.444 6.4938 10.6159 6.57686 10.7738C6.65992 10.926 6.80529 11.0444 7.01294 11.129C7.11974 11.1684 7.34223 11.222 7.68042 11.2896C8.02454 11.3573 8.29153 11.3939 8.48139 11.3996V12H2.51861V11.3996C2.68474 11.3883 2.93689 11.3658 3.27508 11.3319C3.6192 11.2981 3.85653 11.2558 3.98705 11.2051C4.18285 11.1318 4.32524 11.0275 4.41424 10.8922C4.50917 10.7512 4.55663 10.5652 4.55663 10.334V0.659619H4.04045C3.85653 0.659619 3.6281 0.665257 3.35518 0.676533C3.08225 0.682171 2.8212 0.699084 2.57201 0.727273C2.37621 0.749824 2.17152 0.862579 1.95793 1.06554C1.75027 1.26286 1.55744 1.48837 1.37945 1.74207C1.20146 1.99577 1.04423 2.26638 0.907767 2.55391C0.771305 2.8358 0.676375 3.06977 0.622977 3.25581H0V0H11V3.25581Z",fill:"currentColor"})),Qr=Zd;import*as en from"react";var qd=n=>en.createElement("svg",{width:6,height:16,viewBox:"0 0 6 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},en.createElement("line",{x1:3,y1:15.25,x2:3,y2:.75,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"}),en.createElement("circle",{cx:3,cy:8,r:2,fill:"#1D222D",stroke:"currentColor"})),tn=qd;import{createUISystem as Kd}from"@streamlinedfi/div";var ct=Kd({theme:{},breakpoints:{},spacingUnit:16});import Ms from"@streamlinedfi/div";import{Plus as Jd}from"@styled-icons/feather/Plus";import Ds from"react";function ir({onClick:n,size:t=38,...s}){let{config:o}=M();return Ds.createElement(Ms,{as:"button",$absolute:!0,$z:2,$flex:!0,$innerCenter:!0,$radius:"50%",$top:8,$right:8,$w:t,$h:t,$p:0,$border:"0",$background:"none",$background$active:o.theme.close.bgColorActive,$color:s.$color||o.theme.close.color,$color$hover:o.theme.close.colorHover,$color$active:o.theme.close.colorActive,onClick:n,...s},Ds.createElement(Ms,{as:Jd,$w:t*.75,$transform:"rotate(45deg)"}))}var rm={small:.85,medium:1,large:1.15},nm={line:Kr,rect:Jr,harea:Xr,hline:qr,vline:tn,text:Qr};function io({currentDrawing:n,onColorChange:t,onTextSizeChange:s,onRemove:o}){let{frame:a,config:l}=M(),{color:d,textSize:c}=n||{},u=t,h=s,y=l.theme.drawingToolbar.colors;if(!n)return null;let g=nm[n.type];return Pe.createElement(em,{divProps:{style:{width:"100%"},className:"streamlined-chart-html"}},Pe.createElement(tm,{theme:ct.theme},Pe.createElement(It,{$flex:!0,$innerCenter:!0,$w:"auto",$absolute:!0,$top:a.header.yEnd,$left:"50%",$transform:"translateX(-50%)",$border:l.theme.drawingToolbar.borderColor,$background:l.theme.drawingToolbar.bgColor,$h:34,$radius:17,$px:.5},Pe.createElement(It,{$flex:!0,$shrink:"0",$innerCenter:!0,$w:32,$h:32,$color:l.theme.drawingToolbar.iconColor},Pe.createElement(g,null)),y.map(x=>Pe.createElement(It,{as:"button",key:x,$shrink:"0",$w:16,$h:16,$mr:.5,$radius:8,$background:d===x?d:"none",$background$hover:d===x?"none":Qd(.5,x),$border:`1.5px solid ${x}`,onClick:()=>u(x)})),n.type==="text"&&Pe.createElement(It,{$flex:!0,$w:"auto",$shrink:"0",$mr:.5},["small","medium","large"].map(x=>Pe.createElement(It,{key:x,$flex:!0,as:"button",$shrink:"0",$innerCenter:!0,$w:32,$h:32,$radius:16,$color:c===x?l.theme.drawingToolbar.textColorActive:l.theme.drawingToolbar.textColor,$background:c===x?l.theme.drawingToolbar.textBgColor:"none",$border:"0",onClick:()=>h(x)},Pe.createElement(It,{as:Ss,$transform:`scale(${rm[x]})`})))),Pe.createElement(ir,{size:24,$position:"static",$background:l.theme.drawingToolbar.closeBgColor,$color:l.theme.drawingToolbar.closeColor,onClick:()=>o(n)}))))}import om from"@streamlinedfi/div";import $s from"react";import{Html as im}from"react-konva-utils";function so({currentDrawing:n,isMovingText:t,onTextFocus:s,onTextChange:o,textSizeMapping:a}){let{frame:l,config:d}=M();if(!n||n.type!=="text"||t)return null;let{text:c,textSize:u,points:h,color:y}=n;return $s.createElement(im,{divProps:{style:{width:"100%"},className:"streamlined-chart-html"}},$s.createElement(om,{as:"textarea",$flex:!0,$innerCenter:!0,$w:"auto",$absolute:!0,$left:Math.min(h[0],h[2])+4,$top:Math.min(h[1],h[3])+3,$width:Math.abs(h[2]-h[0])-8,$height:Math.abs(h[3]-h[1])-8,$fontSize:a[u],$lineHeight:a[u]*1.4,$p:"0",$color:y,$background:"none",$border:"none",onFocus:s,onChange:g=>o(g.target.value),value:c}))}var{stringify:Os}=JSON,{keys:lm,values:fo,fromEntries:fm,entries:Yy}=Object;function cm(n,t){let s=n.anchor.selection.map(l=>[n.anchor.points[l],l]),a=sm(s,2).find(([[l],[d]])=>Ts(t.offsetX,l-5,l+5)&&Ts(t.offsetY,d-5,d+5));return fo(fm(a||s))}function um(n){return lm(n).length}function co({onDrawings:n}){let{frame:t,config:s,setConfig:o,setCursor:a,dispatch:l}=M(),d=sr(),c=ie(d.current),u=se("drawings"),h=sr({}),[y,g]=_s(null),[x,C]=_s(!1),k=sr(null),D=sr(null),$=sr(null),I=()=>h.current[k.current],W=L=>{let A=d.current?.getAllIntersections({x:L.offsetX,y:L.offsetY});return am(A)},H=()=>{typeof n=="function"&&n(h.current)};lo(()=>{c.destroyAll(),h.current={},k.current=null,D.current=null,$.current=null,g(null)},[s.timeframe]);let B=ut(L=>{let A=um(h.current),te=u.x.invert(L.offsetX),re=u.y.invert(L.offsetY),q={key:A,type:s.tool,domainPoints:[te,re],points:[L.offsetX,L.offsetY],isSelected:!0,color:s.theme.lineColor};if(h.current[A]=q,k.current=A,q.type==="text"){let Fe=L.offsetX+120,fe=L.offsetY+80,we=u.x.invert(Fe),De=u.y.invert(fe);q.domainPoints=[...q.domainPoints,we,De],q.points=[...q.points,Fe,fe],q.color=s.theme.title.color,q.text="Text",q.textSize="medium"}return["hline","vline","text"].includes(q.type)&&(o({...s,tool:"crosshair"}),g(q)),H(),q},[s.tool]),U=ut(L=>{let A=I();if(["line","rect","harea"].includes(A.type)){let te=u.x.invert(L.offsetX),re=u.y.invert(L.offsetY),q=[A.domainPoints[0],A.domainPoints[1],te,re],Fe={...A,domainPoints:q,points:A.domainPoints.map((fe,we)=>(we+1)%2===1?u.x(fe):u.y(fe))};return L.type!=="mousemove"&&(o({...s,tool:"crosshair"}),g(A)),h.current[A.key]=Fe,H(),Fe}},[Os(s)]),S=ut(L=>{let A=h.current[$.current.key],te=L.offsetX-$.current.initX,re=L.offsetY-$.current.initY,q=A.points.map((we,De)=>{if($.current.moveablePoints.includes(De)){if(["line","rect","text"].includes(A.type))return(De+1)%2===1?we+te:we+re;if(["hline","vline","harea"].includes(A.type))return(De+1)%2===1?L.offsetX:L.offsetY}return we}),Fe=A.points.map((we,De)=>(De+1)%2===1?u.x.invert(we):u.y.invert(we)),fe={...A,domainPoints:Fe,points:q};return h.current[A.key]=fe,A.type==="text"&&g({...fe}),$.current.initX=L.offsetX,$.current.initY=L.offsetY,H(),fe},[]),Z=ut(L=>{let A={...L,points:L.domainPoints.map((te,re)=>(re+1)%2===1?u.x(te):u.y(te))};return h.current[L.key]=A,H(),A},[]),F=ut(L=>{let A=h.current[L?L.attrs.key:D.current];if(!A)return null;L?(D.current=L.attrs.key,$.current||a("move")):(D.current=null,a("crosshair"));let te={...A,isHovering:!!L};return h.current[A.key]=te,H(),te},[]),be=ut((L,A)=>{let te=h.current[L?L.attrs.key:k.current];if(L&&A){let q=cm(L.attrs,A);k.current=L.attrs.key,g(te),$.current={key:L.attrs.key,initX:A.offsetX,initY:A.offsetY,moveablePoints:q},L.attrs.text&&C(!0)}else k.current=null,D.current=null,g(null),C(!1);let re={...te,isSelected:!!L,isHovering:!1,isMoving:!!L};return h.current[te.key]=re,H(),re},[l]),ne=ut((L,A)=>(h.current[y.key][L]=A,g({...h.current[y.key]}),H(),h.current[y.key]),[Os(y)]),ce=ut(L=>{let A=L.key??y.key;h.current[A]=null,k.current=null,g(null),c.destroy(A),H()},[y]);return lo(()=>{s.tool!=="crosshair"&&I()&&be(null,null)},[s.tool]),lo(()=>{let L=["line","hline","vline","rect","harea","text"].includes(s.tool);l.on("scale.chartDrawings",()=>{fo(h.current).filter(Boolean).forEach(A=>c(ve,Z(A)))}),l.on("pointerdown.chartDrawings",A=>{let te=I();if(L)if(!te)c(ve,B(A));else{let re=U(A);re&&c(ve,re)}else{te&&c(ve,be(null,null));let re=W(A);re&&c(ve,be(re,A))}}),l.on("mousemove.chartDrawings",A=>{if(A){if(I()){if(L){let q=U(A);if(q){c(ve,q);return}}else if($.current){c(ve,S(A));return}}D.current!==null&&c(ve,F(null));let re=W(A);if(re){let q=F(re);c(ve,q),l.call("hoverDrawing",null,q)}else l.call("hoverDrawing",null,null)}}),l.on("pointerup.chartDrawings",A=>{$.current&&(h.current[$.current.key].isMoving=!1,$.current=null,C(!1))}),l.on("removeDrawing",A=>{ce(A)}),l.on("removeDrawings",()=>{fo(h.current).filter(Boolean).forEach(A=>{ce(A)})})},[l,s.tool,d.current]),ao.createElement(j,{ref:d,clipX:t.mainChart.xStart,clipY:t.mainChart.yStart,clipWidth:t.mainChart.width,clipHeight:t.mainChart.height},y&&ao.createElement(io,{currentDrawing:y,onColorChange:L=>{let A=ne("color",L);c(ve,A)},onTextSizeChange:L=>{c(ve,ne("textSize",L))},onRemove:ce}),ao.createElement(so,{currentDrawing:y,textSizeMapping:no,isMovingText:x,onTextFocus:()=>{$.current=null},onTextChange:L=>{c(ve,ne("text",L))}}))}import hm from"konva";import pm from"lodash/inRange";import gm from"moment-timezone";import ym,{useEffect as xm,useRef as Ls}from"react";import{mix as dm}from"polished";function mm({config:n,frame:t,y:s,text:o,fill:a}){let l=n.theme.axes.lastValueTickBgSize;return[{type:"Line",attrs:{fill:dm(.2,a,n.theme.bgColor),points:[t.yAxis.xStart,s,t.yAxis.xStart+l/2,s-l/2,t.yAxis.xStart+t.yAxis.width,s-l/2,t.yAxis.xStart+t.yAxis.width,s+l/2,t.yAxis.xStart+l/2,s+l/2,t.yAxis.xStart,s],closed:!0}},{type:"Line",attrs:{stroke:a,strokeWidth:1,points:[t.yAxis.xStart,s,t.yAxis.xStart+n.theme.axes.tickSize,s]}},{type:"Text",attrs:{fontFamily:n.theme.fontFamily,fontStyle:n.theme.fontStyle,fontSize:n.theme.axes.fontSize,text:o,x:t.yAxis.xStart+n.theme.axes.tickSize+n.theme.axes.tickMargin,y:s+1,offsetY:n.theme.axes.fontSize/2,fill:a}}]}var zt=mm;var As=JSON.stringify,{values:jy}=Object;function wm({config:n,frame:t,x:s,y:o,candle:a}){let l={fontFamily:n.theme.fontFamily,fontWeight:n.theme.fontWeight,fontSize:n.theme.axes.fontSize,text:gm.tz(a?.time,n.timezone).format(n.timeframe.id==="D1"?"ddd D MMM \u2019YY":"H:mm ddd D MMM \u2019YY"),x:s,y:t.xAxis.yStart+n.theme.axes.tickSize+n.theme.axes.tickMargin,fill:n.theme.crosshair.color},d=new hm.Text(l).getTextWidth();return[{type:"Line",attrs:{stroke:n.theme.crosshair.lineColor,strokeWidth:1,dash:n.theme.crosshair.lineDash,points:[s,t.mainInner.yStart,s,t.mainInner.yEnd],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.crosshair.lineColor,strokeWidth:1,dash:n.theme.crosshair.lineDash,points:[t.mainInner.xStart,o,t.mainInner.xEnd,o],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.crosshair.tickColor,strokeWidth:1,points:[s,t.xAxis.yStart,s,t.xAxis.yStart+n.theme.axes.tickSize],transformsEnabled:"none",perfectDrawEnabled:!1,listening:!1}},{type:"Rect",attrs:{x:s-1,y:t.xAxis.yStart+n.theme.axes.tickSize-1,width:d+2,height:n.theme.axes.fontSize+2,fill:n.theme.bgColor,perfectDrawEnabled:!1,listening:!1}},{type:"Text",attrs:{...l}}]}function vm(){let{config:n,frame:t,data:s,dispatch:o}=M(),a=Ls(),l=Ls(),d=ie(a.current),c=se("crosshair"),u="crosshair",h=`${u}:ytick`;return xm(()=>{if(s.series&&c.loaded){let y=function(g){g.sourceEvent?.type!=="wheel"&&(d.destroy(u),d.destroy(h))};o.on("zoomX.crosshair",y),o.on("zoomY.crosshair",y),o.on("mousemove.crosshair",g=>{g?(d(wm,{key:u,x:g.offsetX,y:g.offsetY,candle:l.current}),pm(g.offsetY,t.mainChart.yStart,t.mainChart.yEnd)?d(zt,{key:h,x:g.offsetX,y:g.offsetY,fill:n.theme.crosshair.color,text:n.formatters.crosshair.y(c.y?.invert(g.offsetY))}):d.destroy(h)):(d.destroy(u),d.destroy(h))}),o.on("candle.crosshair",g=>{l.current=g})}},[o,c.loaded,s.seriesId,As(t.mainChart),As(t.indicatorWindows)]),ym.createElement(j,{ref:a})}var Ys=vm;import th from"@streamlinedfi/div";import Re,{memo as rh,useRef as Bs,useState as Fs}from"react";import{Html as nh}from"react-konva-utils";import km from"lodash/isArray";import rn from"lodash/isEqualWith";import Cm from"lodash/isFunction";import bm from"lodash/isObject";var Sm=(n,t,s=9)=>{let o=l=>(d,c)=>typeof d!=typeof c?!1:Cm(d)?d.toString()===c.toString():km(d)?d.length===c.length&&d.every((u,h)=>rn(u,c[h],o(l-1))):d!==null&&bm(d)?l===0?!0:d.$$typeof===Symbol.for("react.element")?d.key===c.key&&rn(d.props,c.props,o(l-1)):Object.entries(d).every(([u,h])=>{try{let y=c[u];return rn(h,y,o(l-1))}catch{return!1}}):d===c;return rn(n,t,o(s))},nn=Sm;import{scaleLinear as mo}from"d3-scale";import{zoomIdentity as Es}from"d3-zoom";import Hm from"lodash/debounce";import Nm from"lodash/flatMap";import Fm from"lodash/last";import Bm from"lodash/reduce";import Vm from"lodash/throttle";import{useEffect as ar,useMemo as Ws,useRef as Is}from"react";import ge from"moment-timezone";import ke from"milliseconds";import on from"lodash/last";import ye from"lodash/forEach";function Mm(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("YYYY");a[u]||(a[u]=u,o.push({i:l,value:c.format("YYYY"),x:t(l)}))}),o}function Dm(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("YYYY"),h=c.format("Q"),y=c.format("MMM");h!=="1"&&h!=="3"||(a[u]||(a[u]={},a[u][h]=h,o.push({i:l,value:h==="1"?c.format("YYYY"):y,x:t(l),emphasize:!0})),a[u]&&!a[u][h]&&(a[u][h]=h,o.push({i:l,value:y,x:t(l)})))}),o}function $m(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("YYYY"),h=c.format("Q"),y=c.format("MMM");a[u]||(a[u]={},a[u][h]=h,o.push({i:l,value:h==="1"?c.format("YYYY"):y,x:t(l),emphasize:!0})),a[u]&&!a[u][h]&&(a[u][h]=h,o.push({i:l,value:y,x:t(l)}))}),o}function _m(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("YYYY"),h=c.format("MMM");a[u]||(a[u]={},a[u][h]=h,o.push({i:l,value:h==="Jan"?c.format("YYYY"):h,x:t(l),emphasize:h==="Jan"})),a[u]&&!a[u][h]&&(a[u][h]=h,o.push({i:l,value:h==="Jan"?c.format("YYYY"):h,x:t(l)}))}),o}function Tm(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("M"),h=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/2),"days");a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),!a[u][1]&&c.valueOf()>=h.valueOf()&&(a[u][1]=c,o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function Om(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("M"),h=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/3),"days"),y=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/3*2),"days");a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),!a[u][1]&&c.valueOf()>=h.valueOf()&&(a[u][1]=c,o.push({i:l,value:c.format("D"),x:t(l)})),!a[u][2]&&c.valueOf()>=y.valueOf()&&(a[u][2]=c,o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function Lm(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("M"),h=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/4),"days"),y=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/4*2),"days"),g=c.clone().startOf("month").add(Math.floor(c.daysInMonth()/4*3),"days");a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),!a[u][1]&&c.valueOf()>=h.valueOf()&&(a[u][1]=c,o.push({i:l,value:c.format("D"),x:t(l)})),!a[u][2]&&c.valueOf()>=y.valueOf()&&(a[u][2]=c,o.push({i:l,value:c.format("D"),x:t(l)})),!a[u][3]&&c.valueOf()>=g.valueOf()&&(a[u][3]=c,o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function Am(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("M"),h=c.format("D");a[u]||(a[u]={},a[u][h]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),a[u]&&!a[u][h]&&(a[u][h]=c,Object.keys(a[u]).length%2===1&&o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function Ym(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("M"),h=c.format("D");a[u]||(a[u]={},a[u][h]=c,o.push({i:l,value:u==="1"?c.format("YYYY"):c.format("MMM"),x:t(l),emphasize:!0})),a[u]&&!a[u][h]&&(a[u][h]=c,o.push({i:l,value:c.format("D"),x:t(l)}))}),o}function Em(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("D"),h=c.clone().startOf("day").add(12,"hours");a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0})),!a[u][1]&&c.valueOf()>=h.valueOf()&&(a[u][1]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)}))}),o}function Wm(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("D");if(a[u]||(a[u]=[],a[u][0]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0})),a[u]&&(c.format("HH")==="12"||c.format("HH")==="14")&&c.format("HH")>on(a[u]).format("HH")){let h=Object.keys(a[u]).length;a[u][h]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)})}}),o}function Im(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("D");if(!a[u])a[u]=[],a[u][0]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0});else if(a[u]&&c.format("HH")%2===0&&c.format("HH")>on(a[u]).format("HH")){let h=Object.keys(a[u]).length;a[u][h]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)})}}),o}function zm(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("D");if(!a[u])a[u]=[],a[u][0]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0});else if(a[u]&&c.format("HH")>on(a[u]).format("HH")){let h=Object.keys(a[u]).length;a[u][h]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)})}}),o}function Pm(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("D"),h=c.format("HH"),y=c.format("mm")<30?0:30,g=h+":"+y;a[u]||(a[u]={},a[u][g]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0})),a[u]&&!a[u][g]&&(a[u][g]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)}))}),o}function Rm(n,t,s){let o=[],a={};return ye(n,({i:l,time:d})=>{let c=ge(d).tz(s),u=c.format("D"),h=c.format("HH"),y=Math.floor(c.format("mm")/15),g=h+":"+y;a[u]||(a[u]={},a[u][g]=c,o.push({i:l,value:c.format("D"),x:t(l),emphasize:!0})),a[u]&&!a[u][g]&&(a[u][g]=c,o.push({i:l,value:c.format("H:mm"),x:t(l)}))}),o}function uo(n,t,s,o){if(!t.series)return[];let l=o.invert(o.range()[0]+80)-o.invert(o.range()[0]),d=s.domain()[1]-s.domain()[0],c=s.domain()[1]-on(t.series).i,u=t.series.slice(-Math.ceil(d-c));return l>=ke.days(180)?Mm(u,s,n.timezone):l>=ke.days(124)?Dm(u,s,n.timezone):l>=ke.days(53)?$m(u,s,n.timezone):l>=ke.days(22)?_m(u,s,n.timezone):l>=ke.days(14)?Tm(u,s,n.timezone):l>=ke.days(10)?Om(u,s,n.timezone):l>=ke.days(7)?Lm(u,s,n.timezone):l>=ke.days(3)?Am(u,s,n.timezone):l>=ke.hours(20)||/D/.test(n.timeframe.id)?Ym(u,s,n.timezone):l>=ke.hours(12)?Em(u,s,n.timezone):l>=ke.hours(8)?Wm(u,s,n.timezone):l>=ke.hours(6)?Im(u,s,n.timezone):l>=ke.hours(1)||/H/.test(n.timeframe.id)?zm(u,s,n.timezone):l>=ke.minutes(30)?Pm(u,s,n.timezone):Rm(u,s,n.timezone)}var ho=JSON.stringify;function Um(n,t,s){if(!t.series)return;let o=mo().domain([0,(t.series.length-t.zeroIndex)*n.theme.axes.xEndShiftRatio]).range([s.xAxis.xStart,s.xAxis.xEnd]),a=mo().domain(t.series?.length?[t.series[t.zeroIndex].time,Fm(t.series).time]:[]).range([s.xAxis.xStart,s.xAxis.xEnd]),l=d=>{let c=d.rescaleX(o),u=d.rescaleX(a),h=uo(n,t,c,u);return{x:c,xTime:u,xTicks:h}};return{key:[s.xAxis.xEnd,s.xAxis.xStart,t.timeSeriesId].join(":"),transformer:l}}function jm(n,t,s){if(!t.series)return;let o=Nm(t.series.slice(t.zeroIndex),({open:d,high:c,low:u,close:h})=>[d,c,u,h]),a=mo().domain([Math.min(...o),Math.max(...o)]).range([s.yAxis.yEnd,s.yAxis.yStart]).nice(),l=d=>{let c=d.rescaleY(a),u=Bm(c.copy().nice().ticks(),(h,y,g)=>{let x=c(y);return g>0&&x>h.yEnd-n.theme.axes.minTickSpaceY?h:{yEnd:x-n.theme.axes.fontSize,ticks:[...h.ticks,{value:y,y:x}]}},{yEnd:s.mainChart.yEnd,ticks:[]}).ticks;return{y:c,yTicks:u}};return{key:[s.yAxis.yEnd,s.yAxis.yStart,t.scaleId].join(":"),transformer:l}}function zs(){let{frame:n,config:t,data:s,dispatch:o}=M(),a=Is(Es),l=Ws(()=>Um(t,s,n),[s.timeSeriesId,ho(n.xAxis)]),{key:d,transformer:c}=l||{};ar(()=>{s.seriesId&&(o.call("scale",null,c(a.current)),o.on("zoomX.xAxis",u=>{a.current=u,o.call("scale",null,c(a.current))}))},[o,d]),ar(()=>{d&&o.call("scale",null,c(a.current))},[d,c])}function Ps(){let{frame:n,config:t,data:s,dispatch:o}=M(),a=Is(Es),l=Ws(()=>jm(t,s,n),[s.scaleId,ho(n)]),{key:d,transformer:c}=l||{};ar(()=>{s.series&&(o.call("scale",null,c(a.current)),o.on("zoomY.yAxis",Vm(u=>{a.current=u,o.call("scale",null,c(a.current))},50)))},[o,d]),ar(()=>{d&&o.call("scale",null,c(a.current))},[d,c])}function Rs(n){let{frame:t,config:s,data:o,dispatch:a}=M();ar(()=>{if(o.series&&typeof n=="function"){let l=0;[...s.indicators.windows,...s.indicators.mainChart].filter(c=>c.active).forEach(c=>{c.indicator==="MACD"&&(l=Math.max(l,Number(c.slowLength)+Number(c.signalLineLength))),["Moving Average","Bollinger Bands","Relative Strength Index"].includes(c.indicator)&&(l=Math.max(l,Number(c.length)))});let d=Hm(c=>{let u=c.invert(t.mainChart.xStart),h=Math.abs(u)+l,y=Math.abs(o.series[0].i),g=Math.ceil(h-y);g>0&&n(g)},500);a.on("scale.onLoadMore",c=>{c.x&&d(c.x)})}},[a,n,o.seriesId,ho(s.indicators)])}import{useEffect as Gm}from"react";function po(){let{config:n,data:t,dispatch:s}=M(),o=se("candleDispatcher");Gm(()=>{if(t.series){let a=Object.fromEntries(t.series.map(l=>[l.i,l]));o.onChange(()=>{s.on("mousemove.candleDispatcher",l=>{if(l?.offsetX){let d=Math.floor(o.x.invert(l.offsetX)),c=d<t.series[0].i?t.series[0]:a[d];s.call("candle",null,c)}else s.call("candle",null,null)})})}},[s,t.seriesId])}function lr(n,t){let s=0,o=0;if(t===void 0)for(let a of n)a!=null&&(a=+a)>=a&&(++s,o+=a);else{let a=-1;for(let l of n)(l=t(l,++a,n))!=null&&(l=+l)>=l&&(++s,o+=l)}if(s)return o/s}import{create as qm,pointers as Km,select as Jm}from"d3-selection";import{zoom as yo,zoomIdentity as xo,zoomTransform as Hs}from"d3-zoom";import Ns from"lodash/inRange";import{useEffect as Qm,useRef as wo}from"react";import{useRef as Zm}from"react";var Xm=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get(){Xm=!0}}))}catch{}var Cx="onwheel"in document.createElement("div")?"wheel":"mousewheel";function go(){return Zm()}var eh=JSON.stringify;function vo(n){let{config:t,data:s,frame:o,dispatch:a}=M(),l=wo(),d=wo(),c=wo(xo),u=se("zoomDispatch"),h=go();l.current=t.tool;let y=n.current?.getCanvas();Qm(()=>{if(y&&s.seriesId&&u.loaded){let H=function(S){if(S.sourceEvent){let Z=Km(S,S.sourceEvent.target);return[lr(Z,F=>F[0]),lr(Z,F=>F[1])]}return[o.mainInner.width/2,o.mainInner.height/2]},g=Jm(y._canvas);g.interrupt=()=>g;let x=qm("svg").attr("viewBox",[o.mainInner.xStart,o.mainInner.yStart,o.mainInner.width,o.mainInner.height]),C=x.append("g"),k=x.append("g");C.interrupt=()=>C,k.interrupt=()=>k;let D=yo().scaleExtent([.1,10]).on("zoom",S=>{a.call("zoomX",null,S.transform)}),$=yo().scaleExtent([.2,5]).on("zoom",S=>{a.call("zoomY",null,S.transform)}),I=()=>Hs(C.node()),W=()=>Hs(k.node()),B=yo().filter(S=>l.current==="crosshair"&&!d.current&&(S.type!=="wheel"||h.current?.metaKey)&&Ns(S.offsetX,o.mainInner.xStart,o.mainInner.xEnd)&&Ns(S.offsetY,o.mainInner.yStart,o.mainInner.yEnd)).on("zoom",S=>{let Z=c.current,F=S.transform,be=F.k/Z.k,ne=H(S,this),ce=["mousemove","dragX","dblclick","wheel"].includes(S.sourceEvent?.type),L=["mousemove","dragY"].includes(S.sourceEvent?.type);be===1?(ce&&C.call(D.translateBy,(F.x-Z.x)/I().k,0),L&&k.call($.translateBy,0,(F.y-Z.y)/W().k)):(ce&&C.call(D.scaleBy,be,ne),L&&k.call($.scaleBy,be,ne)),c.current=F}),U=S=>{g.call(B.transform,S),C.call(D.transform,S),k.call($.transform,S)};return U(xo),g.call(B),a.on("dragX.zoom",({evt:S,dx:Z})=>{let F=1-Z/(o.xAxis.width/2);g.call(B.scaleBy,F,null,{sourceEvent:S,type:"dragX"})}),a.on("dragY.zoom",({evt:S,dy:Z})=>{let F=1-Z/o.yAxis.height;g.call(B.scaleBy,F,null,{sourceEvent:S,type:"dragY"})}),a.on("hoverDrawing.zoom",S=>{d.current=S}),a.on("resetZoom.zoom",()=>U(xo)),()=>{B.on("zoom",null)}}},[!!y,eh(o.mainInner),s.scaleId,u.loaded,!!c.current])}var ko=JSON.stringify;function oh({onLoadMore:n}){let{config:t}=M(),s=Bs();return po(),vo(s),zs(),Ps(),Rs(n),(typeof window<"u"&&typeof document<"u"?document.body.clientWidth<t.mobileThreshold:!1)?Re.createElement(j,null,Re.createElement(nh,{divProps:{style:{zIndex:1,width:"100%"}}},Re.createElement(th,{$absolute:!0,$left:0,$top:0,$width:t.width,$height:t.height}))):Re.createElement(j,{ref:s,x:0,y:0,width:t.width,height:t.height},Re.createElement(ih,null))}function ih(){let{config:n,frame:t,dispatch:s,setCursor:o}=M(),a=Bs(),[l,d]=Fs(),[c,u]=Fs(),h=({evt:x})=>{s.call("pointerdown",null,x),n.tool==="crosshair"&&(o("grabbing"),document.body.addEventListener("pointerup",()=>o("crosshair"),{once:!0}))},y=({evt:x})=>{s.call("pointerup",null,x)},g=({evt:x})=>{s.call("mousemove",null,x)};return Re.createElement(Re.Fragment,null,Re.createElement(Te,{key:ko(t.mainInner),x:t.mainInner.xStart,y:t.mainInner.yStart,width:t.mainInner.width,height:t.mainInner.height,onMouseEnter:()=>o("crosshair"),onPointerDown:h,onPointerUp:y,onMouseLeave:()=>{o("default"),s.call("mousemove",null,null)},onMouseMove:g,onContextMenu:({evt:x})=>{x.preventDefault(),s.call("contextmenu",null,x)},transformsEnabled:"position",perfectDrawEnabled:!1}),Re.createElement(Te,{key:ko(t.yAxis),x:t.yAxis.xStart,y:t.yAxis.yStart,width:t.yAxis.width,height:t.yAxis.height,fill:c?n.theme.axes.hoverColor:void 0,onMouseEnter:()=>{o("ns-resize"),u(!0)},onMouseLeave:()=>{o("default"),u(!1)},onPointerDown:({evt:x})=>{a.current={},a.current.initY=x.offsetY,document.body.addEventListener("pointerup",()=>{a.current=null},{once:!0})},onMouseMove:({evt:x})=>{a.current&&(a.current.deltaY=x.offsetY-a.current.initY,s.call("dragY",null,{evt:x,dy:a.current.deltaY}),a.current.initY=x.offsetY)},transformsEnabled:"position",perfectDrawEnabled:!1}),Re.createElement(Te,{key:ko(t.xAxis),x:t.xAxis.xStart,y:t.xAxis.yStart,width:t.xAxis.width,height:t.xAxis.height+8,fill:l?n.theme.axes.hoverColor:void 0,onMouseEnter:()=>{o("ew-resize"),d(!0)},onMouseLeave:()=>{o("default"),d(!1)},onPointerDown:({evt:x})=>{a.current={},a.current.initX=x.offsetX,document.body.addEventListener("pointerup",()=>{a.current=null},{once:!0})},onMouseMove:({evt:x})=>{a.current&&(a.current.deltaX=x.offsetX-a.current.initX,s.call("dragX",null,{evt:x,dx:a.current.deltaX}),a.current.initX=x.offsetX)},transformsEnabled:"position",perfectDrawEnabled:!1}))}var Vs=rh(oh,nn);import qo from"konva";import Ne,{useState as _p}from"react";import sn from"react";function Co({x:n,y:t,size:s=10,color:o}){return sn.createElement(sn.Fragment,null,sn.createElement(eo,{stroke:o,strokeWidth:1.5,points:[n,t,n+s/2,t+s/2],lineCap:"round"}),sn.createElement(eo,{stroke:o,strokeWidth:1.5,points:[n+s/2,t+s/2,n+s,t],lineCap:"round"}))}var an=Math.min,wt=Math.max,fr=Math.round;var Je=n=>({x:n,y:n});function bo(n){return n.split("-")[0]}function Us(n){return n.split("-")[1]}function js(n){return n==="x"?"y":"x"}function Gs(n){return n==="y"?"height":"width"}function So(n){return["top","bottom"].includes(bo(n))?"y":"x"}function Xs(n){return js(So(n))}function cr(n){let{x:t,y:s,width:o,height:a}=n;return{width:o,height:a,top:s,left:t,right:t+o,bottom:s+a,x:t,y:s}}function Zs(n,t,s){let{reference:o,floating:a}=n,l=So(t),d=Xs(t),c=Gs(d),u=bo(t),h=l==="y",y=o.x+o.width/2-a.width/2,g=o.y+o.height/2-a.height/2,x=o[c]/2-a[c]/2,C;switch(u){case"top":C={x:y,y:o.y-a.height};break;case"bottom":C={x:y,y:o.y+o.height};break;case"right":C={x:o.x+o.width,y:g};break;case"left":C={x:o.x-a.width,y:g};break;default:C={x:o.x,y:o.y}}switch(Us(t)){case"start":C[d]-=x*(s&&h?-1:1);break;case"end":C[d]+=x*(s&&h?-1:1);break}return C}var qs=async(n,t,s)=>{let{placement:o="bottom",strategy:a="absolute",middleware:l=[],platform:d}=s,c=l.filter(Boolean),u=await(d.isRTL==null?void 0:d.isRTL(t)),h=await d.getElementRects({reference:n,floating:t,strategy:a}),{x:y,y:g}=Zs(h,o,u),x=o,C={},k=0;for(let D=0;D<c.length;D++){let{name:$,fn:I}=c[D],{x:W,y:H,data:B,reset:U}=await I({x:y,y:g,initialPlacement:o,placement:x,strategy:a,middlewareData:C,rects:h,platform:d,elements:{reference:n,floating:t}});y=W??y,g=H??g,C={...C,[$]:{...C[$],...B}},U&&k<=50&&(k++,typeof U=="object"&&(U.placement&&(x=U.placement),U.rects&&(h=U.rects===!0?await d.getElementRects({reference:n,floating:t,strategy:a}):U.rects),{x:y,y:g}=Zs(h,x,u)),D=-1)}return{x:y,y:g,placement:x,strategy:a,middlewareData:C}};function vt(n){return Js(n)?(n.nodeName||"").toLowerCase():"#document"}function Ce(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function et(n){var t;return(t=(Js(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function Js(n){return n instanceof Node||n instanceof Ce(n).Node}function Oe(n){return n instanceof Element||n instanceof Ce(n).Element}function We(n){return n instanceof HTMLElement||n instanceof Ce(n).HTMLElement}function Ks(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ce(n).ShadowRoot}function Pt(n){let{overflow:t,overflowX:s,overflowY:o,display:a}=Le(n);return/auto|scroll|overlay|hidden|clip/.test(t+o+s)&&!["inline","contents"].includes(a)}function Qs(n){return["table","td","th"].includes(vt(n))}function ur(n){return[":popover-open",":modal"].some(t=>{try{return n.matches(t)}catch{return!1}})}function fn(n){let t=cn(),s=Oe(n)?Le(n):n;return s.transform!=="none"||s.perspective!=="none"||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(s.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(s.contain||"").includes(o))}function ea(n){let t=Qe(n);for(;We(t)&&!kt(t);){if(fn(t))return t;if(ur(t))return null;t=Qe(t)}return null}function cn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function kt(n){return["html","body","#document"].includes(vt(n))}function Le(n){return Ce(n).getComputedStyle(n)}function dr(n){return Oe(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Qe(n){if(vt(n)==="html")return n;let t=n.assignedSlot||n.parentNode||Ks(n)&&n.host||et(n);return Ks(t)?t.host:t}function ta(n){let t=Qe(n);return kt(t)?n.ownerDocument?n.ownerDocument.body:n.body:We(t)&&Pt(t)?t:ta(t)}function ln(n,t,s){var o;t===void 0&&(t=[]),s===void 0&&(s=!0);let a=ta(n),l=a===((o=n.ownerDocument)==null?void 0:o.body),d=Ce(a);if(l){let c=un(d);return t.concat(d,d.visualViewport||[],Pt(a)?a:[],c&&s?ln(c):[])}return t.concat(a,ln(a,[],s))}function un(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function oa(n){let t=Le(n),s=parseFloat(t.width)||0,o=parseFloat(t.height)||0,a=We(n),l=a?n.offsetWidth:s,d=a?n.offsetHeight:o,c=fr(s)!==l||fr(o)!==d;return c&&(s=l,o=d),{width:s,height:o,$:c}}function ia(n){return Oe(n)?n:n.contextElement}function Rt(n){let t=ia(n);if(!We(t))return Je(1);let s=t.getBoundingClientRect(),{width:o,height:a,$:l}=oa(t),d=(l?fr(s.width):s.width)/o,c=(l?fr(s.height):s.height)/a;return(!d||!Number.isFinite(d))&&(d=1),(!c||!Number.isFinite(c))&&(c=1),{x:d,y:c}}var sh=Je(0);function sa(n){let t=Ce(n);return!cn()||!t.visualViewport?sh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ah(n,t,s){return t===void 0&&(t=!1),!s||t&&s!==Ce(n)?!1:t}function mr(n,t,s,o){t===void 0&&(t=!1),s===void 0&&(s=!1);let a=n.getBoundingClientRect(),l=ia(n),d=Je(1);t&&(o?Oe(o)&&(d=Rt(o)):d=Rt(n));let c=ah(l,s,o)?sa(l):Je(0),u=(a.left+c.x)/d.x,h=(a.top+c.y)/d.y,y=a.width/d.x,g=a.height/d.y;if(l){let x=Ce(l),C=o&&Oe(o)?Ce(o):o,k=x,D=un(k);for(;D&&o&&C!==k;){let $=Rt(D),I=D.getBoundingClientRect(),W=Le(D),H=I.left+(D.clientLeft+parseFloat(W.paddingLeft))*$.x,B=I.top+(D.clientTop+parseFloat(W.paddingTop))*$.y;u*=$.x,h*=$.y,y*=$.x,g*=$.y,u+=H,h+=B,k=Ce(D),D=un(k)}}return cr({width:y,height:g,x:u,y:h})}function lh(n){let{elements:t,rect:s,offsetParent:o,strategy:a}=n,l=a==="fixed",d=et(o),c=t?ur(t.floating):!1;if(o===d||c&&l)return s;let u={scrollLeft:0,scrollTop:0},h=Je(1),y=Je(0),g=We(o);if((g||!g&&!l)&&((vt(o)!=="body"||Pt(d))&&(u=dr(o)),We(o))){let x=mr(o);h=Rt(o),y.x=x.x+o.clientLeft,y.y=x.y+o.clientTop}return{width:s.width*h.x,height:s.height*h.y,x:s.x*h.x-u.scrollLeft*h.x+y.x,y:s.y*h.y-u.scrollTop*h.y+y.y}}function fh(n){return Array.from(n.getClientRects())}function aa(n){return mr(et(n)).left+dr(n).scrollLeft}function ch(n){let t=et(n),s=dr(n),o=n.ownerDocument.body,a=wt(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),l=wt(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),d=-s.scrollLeft+aa(n),c=-s.scrollTop;return Le(o).direction==="rtl"&&(d+=wt(t.clientWidth,o.clientWidth)-a),{width:a,height:l,x:d,y:c}}function uh(n,t){let s=Ce(n),o=et(n),a=s.visualViewport,l=o.clientWidth,d=o.clientHeight,c=0,u=0;if(a){l=a.width,d=a.height;let h=cn();(!h||h&&t==="fixed")&&(c=a.offsetLeft,u=a.offsetTop)}return{width:l,height:d,x:c,y:u}}function dh(n,t){let s=mr(n,!0,t==="fixed"),o=s.top+n.clientTop,a=s.left+n.clientLeft,l=We(n)?Rt(n):Je(1),d=n.clientWidth*l.x,c=n.clientHeight*l.y,u=a*l.x,h=o*l.y;return{width:d,height:c,x:u,y:h}}function ra(n,t,s){let o;if(t==="viewport")o=uh(n,s);else if(t==="document")o=ch(et(n));else if(Oe(t))o=dh(t,s);else{let a=sa(n);o={...t,x:t.x-a.x,y:t.y-a.y}}return cr(o)}function la(n,t){let s=Qe(n);return s===t||!Oe(s)||kt(s)?!1:Le(s).position==="fixed"||la(s,t)}function mh(n,t){let s=t.get(n);if(s)return s;let o=ln(n,[],!1).filter(c=>Oe(c)&&vt(c)!=="body"),a=null,l=Le(n).position==="fixed",d=l?Qe(n):n;for(;Oe(d)&&!kt(d);){let c=Le(d),u=fn(d);!u&&c.position==="fixed"&&(a=null),(l?!u&&!a:!u&&c.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Pt(d)&&!u&&la(n,d))?o=o.filter(y=>y!==d):a=c,d=Qe(d)}return t.set(n,o),o}function hh(n){let{element:t,boundary:s,rootBoundary:o,strategy:a}=n,d=[...s==="clippingAncestors"?ur(t)?[]:mh(t,this._c):[].concat(s),o],c=d[0],u=d.reduce((h,y)=>{let g=ra(t,y,a);return h.top=wt(g.top,h.top),h.right=an(g.right,h.right),h.bottom=an(g.bottom,h.bottom),h.left=wt(g.left,h.left),h},ra(t,c,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function ph(n){let{width:t,height:s}=oa(n);return{width:t,height:s}}function gh(n,t,s){let o=We(t),a=et(t),l=s==="fixed",d=mr(n,!0,l,t),c={scrollLeft:0,scrollTop:0},u=Je(0);if(o||!o&&!l)if((vt(t)!=="body"||Pt(a))&&(c=dr(t)),o){let g=mr(t,!0,l,t);u.x=g.x+t.clientLeft,u.y=g.y+t.clientTop}else a&&(u.x=aa(a));let h=d.left+c.scrollLeft-u.x,y=d.top+c.scrollTop-u.y;return{x:h,y,width:d.width,height:d.height}}function Mo(n){return Le(n).position==="static"}function na(n,t){return!We(n)||Le(n).position==="fixed"?null:t?t(n):n.offsetParent}function fa(n,t){let s=Ce(n);if(ur(n))return s;if(!We(n)){let a=Qe(n);for(;a&&!kt(a);){if(Oe(a)&&!Mo(a))return a;a=Qe(a)}return s}let o=na(n,t);for(;o&&Qs(o)&&Mo(o);)o=na(o,t);return o&&kt(o)&&Mo(o)&&!fn(o)?s:o||ea(n)||s}var yh=async function(n){let t=this.getOffsetParent||fa,s=this.getDimensions,o=await s(n.floating);return{reference:gh(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function xh(n){return Le(n).direction==="rtl"}var wh={convertOffsetParentRelativeRectToViewportRelativeRect:lh,getDocumentElement:et,getClippingRect:hh,getOffsetParent:fa,getElementRects:yh,getClientRects:fh,getDimensions:ph,getScale:Rt,isElement:Oe,isRTL:xh};var ca=(n,t,s)=>{let o=new Map,a={platform:wh,...s},l={...a.platform,_c:o};return qs(n,t,{...a,platform:l})};import*as de from"react";import{useLayoutEffect as vh,useEffect as kh}from"react";import*as da from"react-dom";var dn=typeof document<"u"?vh:kh;function mn(n,t){if(n===t)return!0;if(typeof n!=typeof t)return!1;if(typeof n=="function"&&n.toString()===t.toString())return!0;let s,o,a;if(n&&t&&typeof n=="object"){if(Array.isArray(n)){if(s=n.length,s!=t.length)return!1;for(o=s;o--!==0;)if(!mn(n[o],t[o]))return!1;return!0}if(a=Object.keys(n),s=a.length,s!==Object.keys(t).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=s;o--!==0;){let l=a[o];if(!(l==="_owner"&&n.$$typeof)&&!mn(n[l],t[l]))return!1}return!0}return n!==n&&t!==t}function ua(n){let t=de.useRef(n);return dn(()=>{t.current=n}),t}function ma(n){n===void 0&&(n={});let{placement:t="bottom",strategy:s="absolute",middleware:o=[],platform:a,whileElementsMounted:l,open:d}=n,[c,u]=de.useState({x:null,y:null,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[h,y]=de.useState(o);mn(h,o)||y(o);let g=de.useRef(null),x=de.useRef(null),C=de.useRef(c),k=ua(l),D=ua(a),[$,I]=de.useState(null),[W,H]=de.useState(null),B=de.useCallback(ne=>{g.current!==ne&&(g.current=ne,I(ne))},[]),U=de.useCallback(ne=>{x.current!==ne&&(x.current=ne,H(ne))},[]),S=de.useCallback(()=>{if(!g.current||!x.current)return;let ne={placement:t,strategy:s,middleware:h};D.current&&(ne.platform=D.current),ca(g.current,x.current,ne).then(ce=>{let L={...ce,isPositioned:!0};Z.current&&!mn(C.current,L)&&(C.current=L,da.flushSync(()=>{u(L)}))})},[h,t,s,D]);dn(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,u(ne=>({...ne,isPositioned:!1})))},[d]);let Z=de.useRef(!1);dn(()=>(Z.current=!0,()=>{Z.current=!1}),[]),dn(()=>{if($&&W){if(k.current)return k.current($,W,S);S()}},[$,W,S,k]);let F=de.useMemo(()=>({reference:g,floating:x,setReference:B,setFloating:U}),[B,U]),be=de.useMemo(()=>({reference:$,floating:W}),[$,W]);return de.useMemo(()=>({...c,update:S,refs:F,elements:be,reference:B,floating:U}),[c,S,F,be,B,U])}import{Div as le,Text as Cn}from"@streamlinedfi/div";import{Fullscreen as wp}from"@styled-icons/boxicons-regular/Fullscreen";import{AngleDown as Oa}from"@styled-icons/fa-solid/AngleDown";import{transparentize as La}from"polished";import z,{useState as Aa}from"react";import{Html as vp}from"react-konva-utils";import kp,{ThemeProvider as Cp}from"styled-components";import*as Ht from"react";var Ch=n=>Ht.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n},Ht.createElement("rect",{x:7.25,width:1.5,height:6,rx:.75,fill:"currentColor"}),Ht.createElement("rect",{x:7.25,y:10,width:1.5,height:6,rx:.75,fill:"currentColor"}),Ht.createElement("rect",{x:10,y:7.25,width:6,height:1.5,rx:.75,fill:"currentColor"}),Ht.createElement("rect",{y:7.25,width:6,height:1.5,rx:.75,fill:"currentColor"})),ha=Ch;var ga=xd(pa(),1);function bh(n,t){let s={};s.link=document.createElement("a"),s.link.download=t,s.link.href=n,document.body.appendChild(s.link),s.link.click(),document.body.removeChild(s.link),delete s.link}function Sh(n,t){let s=n.current.toDataURL({mimeType:"image/png",pixelRatio:window.devicePixelRatio}),o=t.replace(/{date}/,(0,ga.default)().format("YYYY-MM-DD HH:mm")).replace(/{fileType}/,"png");bh(s,o)}function $o(){let{stageRef:n,config:t}=M();return()=>Sh(n,t.screenshotFileFormat)}import Ta from"@streamlinedfi/div";import Cr from"react";import{createPortal as gp}from"react-dom";import{ThemeProvider as yp}from"styled-components";var _={MA:"Moving Average",BB:"Bollinger Bands",RSI:"Relative Strength Index",STO:"Stochastic",ATR:"Average True Range",MACD:"MACD",ROC:"Rate of Change"},Ae={Datawindow:"Datawindow",Indicators:"Indicators",..._},ya=n=>({[_.MA]:{indicator:_.MA,active:!0,length:21,colorOptions:[0,1,2,3,4].map(t=>n.colorMap[t]),color:n.colorMap[0],type:"SMA",thickness:1.5},[_.BB]:{indicator:_.BB,active:!1,length:20,stdDev:2,thickness:1},[_.MACD]:{indicator:_.MACD,active:!1,order:1,type:"EMA",fastLength:12,slowLength:26,macdLineColor:n.primary,signalLineLength:8,signalLineColor:n.red,thickness:1,defaultHeight:72},[_.RSI]:{indicator:_.RSI,active:!1,order:2,length:14,colorOptions:[0,1,2,3,4].map(t=>n.colorMap[t]),color:n.colorMap[0],thickness:1.5,upperLine:70,lowerLine:30,defaultHeight:72},[_.ATR]:{indicator:_.ATR,active:!1,order:3,length:7,colorOptions:[0,1,2,3,4].map(t=>n.colorMap[t]),color:n.colorMap[0],thickness:1.5,defaultHeight:72},[_.STO]:{indicator:_.STO,active:!1,order:4,kLength:4,kSmoothing:3,dSmoothing:3,kColor:n.colorMap[0],dColor:n.colorMap[3],upperLine:80,lowerLine:20,thickness:1.5,defaultHeight:72},[_.ROC]:{indicator:_.ROC,active:!1,order:5,length:14,colorOptions:[0,1,2,3,4].map(t=>n.colorMap[t]),color:n.colorMap[0],thickness:1.5,defaultHeight:72}});import hr from"@streamlinedfi/div";import tt,{useEffect as $h,useRef as _h,useState as Th}from"react";import{createPortal as Oh}from"react-dom";import Lh from"react-outside-click-handler";import xa from"lodash/get";import{useEffect as Mh,useState as Dh}from"react";function hn(n,t=[],s=typeof window<"u"&&document.body){let[o,a]=Dh({});return Mh(()=>{let l,d=n?.current||s;return d&&(a({width:d.clientWidth,height:d.clientHeight}),t.length||(l=new ResizeObserver(c=>{requestAnimationFrame(()=>{a({width:xa(c,"0.target.clientWidth",0),height:xa(c,"0.target.clientHeight",0)})})}),l.observe(d))),()=>{l&&(l.disconnect(),l=null)}},[n?.current,...t]),[o.width,o.height,o.breakpoints||{}]}function He({children:n,x:t,xOffset:s=0,y:o,yOffset:a=0,onOutsideClick:l=()=>{},hideCloseIcon:d,showAngle:c=!0,$display:u="block",zIndex:h=3,...y}){let{config:g}=M(),x=_h(),[,C]=hn(),[,k]=hn(x),[D,$]=Th();$h(()=>{$(typeof window<"u"&&typeof document<"u"?document.body.clientWidth<g.mobileThreshold:!1)},[g.mobileThreshold]);let I={left:{$right:0+s},right:{$left:0+s},center:{$left:"50%",$transform:s?`translateX(calc(-50% + ${s}px))`:"translateX(-50%)"}},W={top:{$bottom:`calc(100% + 4px + ${a}px)`},bottom:{$top:`calc(100% + 4px + ${a}px)`}},H={left:{$right:"21px",$transform:"rotate(45deg)"},center:{$left:"50%",$transform:"translateX(-50%) rotate(45deg)"},right:{$left:"21px",$transform:"rotate(45deg)"}},B={left:{$right:"20px",$transform:"rotate(45deg)"},center:{$left:"50%",$transform:"translateX(-50%) rotate(45deg)"},right:{$left:"20px",$transform:"rotate(45deg)"}},U={top:{$bottom:-8},bottom:{$top:-8}},S={top:{$bottom:-6},bottom:{$top:-6}},Z=tt.createElement(Lh,{onOutsideClick:l},D&&["block","flex"].includes(u)&&tt.createElement(hr,{$cover:!0,$fixed:!0,$z:g.theme.popoverMenu.zIndex-1,$background:"rgba(0, 0, 0, 0.7)",onClick:l}),tt.createElement(hr,{$display:u,$minW:256,$background:g.theme.popoverMenu.background,$border:g.theme.popoverMenu.borderColor,$mobile$borderBottom:"none",$boxShadow:"0 0 2px 1px rgba(0, 0, 0, .3)",onClick:F=>F.stopPropagation(),...y,...D?{$fixed:!0,$z:g.theme.popoverMenu.zIndex,$left:8,$right:8,$bottom:0,$w:"auto",$h:k?`${Math.min(k+24,C/2)}px`:"auto",$radius:[10,10,0,0]}:{$absolute:!0,$z:h,$radius:10,...I[t],...W[o],...y.$left&&{$left:y.$left},...y.$top&&{$top:y.$top}}},D&&!d&&tt.createElement(ir,{onClick:l}),!D&&c&&tt.createElement(tt.Fragment,null,tt.createElement(hr,{$absolute:!0,$zIndex:2,$w:16,$h:16,$background:g.theme.popoverMenu.background,...B[t],...S[o]}),tt.createElement(hr,{$absolute:!0,$zIndex:1,$w:14,$h:14,$background:g.theme.popoverMenu.borderColor,$boxShadow:"0 0 2px 1px rgba(0, 0, 0, .3)",...H[t],...U[o]})),tt.createElement(hr,{ref:x,$display:u,$h:"auto",className:"popover-inner"},n)));return D===void 0?null:D?Oh(Z,document.getElementById("streamlined-container")):Z}import xn from"react";function ae(n,t,s){if(!n||!Array.isArray(n))return[];let o=typeof t=="number"?t:n.findIndex(t);if(o===-1)return n;let a=[...n];return typeof s=="function"?a[o]=s(n[o]):a[o]=s,a}import{Div as _o,Text as Ah}from"@streamlinedfi/div";import Yh from"lodash/uniq";import pn from"react";function rt({label:n="Color",options:t,value:s,setValue:o}){let{config:a}=M();return pn.createElement(_o,{$px:1.25,$py:1,$borderTop:a.theme.indicatorsMenu.borderColor},pn.createElement(Ah,{$size:13,$color:a.theme.indicatorsMenu.labelColor,$mt:0,$mb:.5},n),pn.createElement(_o,{$flex:!0},Yh(t).map(l=>pn.createElement(_o,{as:"button",key:l,$shrink:0,$w:24,$h:24,$radius:"50%",$border:`1.5px solid ${l}`,$background:s===l?l:"none",$mr:.5,onClick:()=>o(l)}))))}import{Div as Nh,Text as Fh}from"@streamlinedfi/div";import To from"react";import{Div as wa,divMixin as Eh}from"@streamlinedfi/div";import{transparentize as Wh}from"polished";import gn,{useEffect as Ih,useState as zh}from"react";import Ph,{css as va}from"styled-components";var Rh=Ph.input`
  width: 100%;
  border-radius: 8px;
  border: 1px solid ${n=>n.$bgColor};
  background-color: ${n=>n.$bgColor};
  box-shadow: inset 0 0 0 1px transparent;
  padding: 12px 16px;
  outline: 0;
  line-height: 20px;
  font-weight: 500;
  transition: all 0.2s;
  color: ${n=>n.$color};

  ${n=>n.value?va`
          border-color: ${n.$bgColor};
          background-color: ${n.$bgColor};
        `:va`
          &:not([readonly]):not(:focus):hover {
            border-color: ${n.$bgColorHover};
            background-color: ${n.$bgColorHover};
          }
        `}

  &.is-focused,
  &:not([readonly]):focus {
    border-color: ${n=>n.$primary};
    box-shadow: inset 0 0 0 1px ${n=>Wh(.5,n.$primary)};
    background-color: ${n=>n.$bgColor};
  }

  &[readonly] {
    color: rgba(51, 51, 51, 0.6);
    cursor: not-allowed;
  }

  ${n=>n.css};
  ${n=>Eh(n)};
`,Hh=gn.forwardRef((n,t)=>{let{config:s}=M(),{id:o,name:a,placeholder:l,as:d="input",css:c,wrapperProps:u,children:h,value:y,focus:g,autofocus:x,...C}=n,{rest:k,wrapperDivProps:D}=Object.entries(C).reduce((W,[H,B])=>(H.startsWith("$")?W.wrapperDivProps[H.slice(1)]=B===0?"0":B:W.rest[H]=B,W),{rest:{},wrapperDivProps:{}}),[$,I]=zh(!1);return Ih(()=>{!$&&y&&I(!0)},[$,y]),gn.createElement(wa,{$relative:!0,$mb:2,$maxW:342,css:c,...u,...D},gn.createElement(wa,{$w:"100%"},gn.createElement(Rh,{as:d,id:o||a,name:a,ref:W=>{x&&W&&W.focus(),t&&(t.current=W)},value:y,placeholder:l,className:g?"is-focused":"",$primary:s.theme.primary,$color:s.theme.input.color,$bgColor:s.theme.input.bgColor,$bgColorHover:s.theme.input.bgColorHover,...k},h)))}),ka=Hh;function ee({label:n,value:t,setValue:s}){let{config:o}=M();return To.createElement(Nh,{$px:1.25,$py:1,$borderTop:o.theme.indicatorsMenu.borderColor},To.createElement(Fh,{$size:13,$color:o.theme.indicatorsMenu.labelColor,$mt:0,$mb:.5},n),To.createElement(ka,{type:"number",name:n,onChange:a=>s(a.target.value),value:Math.abs(t),min:0,wrapperProps:{$maxW:"auto",$mb:0}}))}import{Div as Ao,Text as Kh}from"@streamlinedfi/div";import gr from"react";import jh from"@streamlinedfi/div";import{transparentize as Gh}from"polished";import Ca,{forwardRef as Xh}from"react";import{Div as Oo}from"@streamlinedfi/div";import Lo from"react";import{css as Bh,keyframes as Vh}from"styled-components";var Uh=Vh`
  0% {
    transform: translate3d(-100%, 0, 0);
  }

  100% {
    transform: translate3d(100%, 0, 0);
  }
`;function pr({text:n,width:t="100%",$w:s,$width:o,height:a=100,$h:l,$height:d,progress:c,small:u=!1,color:h="#0094FF",...y}){return Lo.createElement(Oo,{$flex:!0,$column:!0,$innerCenter:!0,$w:s||o||t,$h:l||d||a,...y},Lo.createElement(Oo,{$relative:!0,$w:u?18:22,$h:2,$overflow:"hidden",$radius:2},Lo.createElement(Oo,{$absolute:!0,$top:0,$left:0,$w:u?18:22,$h:2,$radius:2,$background:h,$css:Bh`
            animation: ${Uh} 1s ease infinite;
          `})))}var Zh={xl:{height:52,fontSize:16,fontWeight:600,px:1.5},large:{height:46,fontSize:14,px:1.25},medium:{height:42,fontSize:14,px:1},small:{height:34,fontSize:13,px:.75},xs:{height:24,fontSize:13,px:.5}};function qh({primary:n,primaryWhite:t,secondary:s,invisible:o,danger:a,buy:l,sell:d,children:c,disabled:u,rounded:h,loading:y,onClick:g,active:x,size:C="large",...k},D){let{config:$}=M(),I={$border:x?$.theme.button.borderColorActive:$.theme.button.borderColor,$border$hover:x?$.theme.button.borderColorActive:$.theme.button.borderColorHover,$boxShadow:`inset 0 0 0 1px ${x?Gh(.5,$.theme.button.borderColorActive):"transparent"}`,$background:"none",$color:x?$.theme.button.colorActive:$.theme.button.color,$color$hover:x?$.theme.button.colorActive:$.theme.button.colorHover},{height:W,fontSize:H,fontWeight:B,px:U}=Zh[C];return Ca.createElement(jh,{as:"button",ref:D,$inlineFlex:!0,$innerCenter:!0,$h:W,$radius:h?W/2:8,$px:U,$fontSize:H,$fontWeight:B||$.theme.fontWeight,$cursor:u?"default":"pointer",onClick:u?void 0:g,...I,...k},y?Ca.createElement(pr,null):c)}var nt=Xh(qh);function ot({label:n="Thickness",value:t,setValue:s}){let{config:o}=M();return gr.createElement(Ao,{$px:1.25,$py:1,$borderTop:o.theme.indicatorsMenu.borderColor},gr.createElement(Kh,{$size:13,$color:o.theme.indicatorsMenu.labelColor,$mt:0,$mb:.5},n),gr.createElement(Ao,{$flex:!0},[1,1.5,2,2.5,3].map(a=>gr.createElement(nt,{key:a,size:"xs",$mr:.5,active:a===t,onClick:()=>s(a),$background:o.theme.indicatorsMenu.buttonBgColor,$border:a===t?o.theme.primary:o.theme.indicatorsMenu.buttonBgColor},gr.createElement(Ao,{$w:18,$h:a,$background:a===t?o.theme.indicatorsMenu.buttonBorderColorActive:o.theme.indicatorsMenu.buttonBorderColor})))))}import{Div as Ft,Text as yn}from"@streamlinedfi/div";import{ChevronLeft as Jh}from"@styled-icons/octicons/ChevronLeft";import Ie from"react";import ba from"@streamlinedfi/div";import Sa from"react";function yr({active:n,setActive:t,outerWidth:s=44,outerHeight:o=30,innerSize:a=24,innerMargin:l=3}){let{config:d}=M();return Sa.createElement(ba,{as:"button",$border:"0",$relative:!0,$w:s,$radius:21,$h:o,$background:n?d.theme.switch.activeBgColor:d.theme.switch.inactiveBgColor,onClick:()=>t(!n)},Sa.createElement(ba,{$absolute:!0,$top:l,$left:l,$transform:`translateX(${n?"14px":0})`,$transition:!0,$w:a,$h:a,$radius:"50%",$background:n?d.theme.switch.activeColor:d.theme.switch.inactiveColor}))}function xe({context:n,indicator:t,children:s,preSettingsChildren:o}){let{config:a,setConfig:l}=n,[d,c]=a.indicators.currentScreenMeta,u=(h,y)=>l({...a,indicators:{...a.indicators,[d]:ae(a.indicators[d],c,g=>({...g,[h]:y}))}});return Ie.createElement(Ft,{$pt:1.25,$flex:!0,$col:!0,$h:"100%"},Ie.createElement(Ft,{as:"button",$px:1,$flex:!0,$mb:1.25,$border:"0",$background:"none",onClick:()=>l({...a,indicators:{...a.indicators,currentScreen:Ae.Indicators}})},Ie.createElement(Ft,{as:Jh,$w:16,$color:a.theme.primary}),Ie.createElement(yn,{$size:13,$lineH:16,$m:0,$color:a.theme.primary},"Indicators")),Ie.createElement(Ft,{$px:1.25,$flex:!0,$spaceBetween:!0},Ie.createElement(yn,{$size:16,$lineH:30,$weight:600,$color:a.theme.indicatorsMenu.titleColor,$mt:0,$mb:1.375},t.indicator),Ie.createElement(yr,{active:t.active,setActive:h=>u("active",h)})),Ie.createElement(Ft,{$w:"100%",$outerCenter:!0,$overflowY:"scroll",$maxH:360},o,Ie.createElement(Ft,{$flex:!0,$spaceBetween:!0,$mb:.5},Ie.createElement(yn,{$px:1.25,$m:0,$size:13,$fontWeight:a.theme.fontWeight,$color:a.theme.indicatorsMenu.settingsColor},"Settings"),Ie.createElement(yn,{as:"button",$px:1.25,$m:0,$size:13,$color:a.theme.indicatorsMenu.settingsColor,$fontWeight:a.theme.fontWeight,$border:"0",$background:"none",onClick:()=>{let{active:h,...y}=a.indicators.defaultConfig[t.indicator];l({...a,indicators:{...a.indicators,[d]:ae(a.indicators[d],c,g=>({...g,...y}))}})}},"Reset Defaults")),s))}function Yo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return xn.createElement(xe,{context:n,indicator:l},xn.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),xn.createElement(rt,{value:l.color,options:l.colorOptions,setValue:c=>d("color",c)}),xn.createElement(ot,{value:l.thickness,setValue:c=>d("thickness",c)}))}import Eo from"react";function Wo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return Eo.createElement(xe,{context:n,indicator:l},Eo.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),Eo.createElement(ee,{label:"Standard Deviation",value:l.stdDev,setValue:c=>d("stdDev",c)}))}import{Div as Me,Text as xr}from"@streamlinedfi/div";import{Plus as $a}from"@styled-icons/evaicons-solid/Plus";import dp from"lodash/sortBy";import X,{useState as mp}from"react";import{Div as wn}from"@streamlinedfi/div";import Ct from"react";import Qh from"react-drag-listview";import{createGlobalStyle as ep}from"styled-components";function Io(n,t,s){let o=[...n],a=t<0?o.length+t:t;if(a>=0&&a<o.length){let l=s<0?o.length+s:s,[d]=o.splice(t,1);o.splice(l,0,d)}return o}var tp=ep`
  .drag-list-line {
    z-index: ${n=>n.zIndex} !important;
    border: 1px solid  ${n=>n.borderColor} !important;
  }
`,rp=n=>{let{config:t}=M();return Ct.createElement(wn,{className:"drag-list-handle",$flex:!0,$col:!0,$shrink:"0",$innerCenter:!0,$w:24,$minH:"100%",$cursor:"grab",$radius:8,$background$hover:t.theme.dragList.handleBgColorHover,$mr:.25},Ct.createElement(wn,{$w:12,$h:2,$background:t.theme.dragList.handleColor,$mb:"2px"}),Ct.createElement(wn,{$w:12,$h:2,$background:t.theme.dragList.handleColor}))},Ma=({children:n,...t})=>Ct.createElement(wn,{$flex:!0,className:"drag-list-item",...t},Ct.createElement(rp,null),n);function zo({children:n,listItems:t,onDragEnd:s}){let{config:o}=M();return Ct.createElement(Qh,{onDragEnd:(a,l)=>{s(Io(t,a,l))},nodeSelector:".drag-list-item",handleSelector:".drag-list-handle",lineClassName:"drag-list-line"},n,Ct.createElement(tp,{zIndex:o.theme.dragList.topZIndex,borderColor:o.theme.primary}))}import{Div as cp,Text as up}from"@streamlinedfi/div";import Bt from"react";import np from"@streamlinedfi/div";import op,{forwardRef as ip}from"react";var sp=ip(({children:n,disabled:t,onClick:s,...o},a)=>{let{config:l}=M();return op.createElement(np,{ref:a,$block:!0,$py:.375,$px:1.25,$mx:.5,$radius:l.theme.menu.item.borderRadius,$background$hover:t?void 0:l.theme.menu.item.bgColorHover,$background$active:t?void 0:l.theme.menu.item.activeBgColor,$color:l.theme.menu.item.color,$color$hover:t?void 0:l.theme.menu.item.colorHover,$color$active:t?void 0:l.theme.menu.item.colorActive,$transition:!0,$cursor:t?"default":"pointer",$opacity:t?.5:void 0,onClick:t?void 0:s,...o},n)}),bt=sp;import{divMixin as ap}from"@streamlinedfi/div";import lp from"styled-components";var fp=lp.hr`
  border: 0;
  width: 100%;
  height: 1px;
  background: ${n=>[100,200,300,400].includes(n.color)?n.theme[`fill${n.color}`]:n.theme.fill200};
  margin: 16px 0;

  ${n=>ap(n)};
`,St=fp;function Po({show:n,setShow:t,items:s,children:o,x:a="left",y:l="bottom",xOffset:d=0,yOffset:c=0,showAngle:u=!1,...h}){let{config:y}=M();return Bt.createElement(He,{$display:n?"block":"none",y:l,x:a,xOffset:d,yOffset:c,onOutsideClick:()=>t(!1),$py:.75,$color:y.theme.popoverMenu.color,showAngle:u,$textAlign:"left",...h},s.map((g,x)=>{if(/title/i.test(g.type))return Bt.createElement(cp,{key:g.key||g.props.text||x,$py:.375,$px:1.25,$mx:.5},Bt.createElement(up,{$m:0,$size:12,$weight:600,$color:y.theme.popoverMenu.uppercaseColor,$uppercase:!0},g.props.text));if(/item/i.test(g.type))return g.props.href||g.href?Bt.createElement(bt,{as:"a",prefetch:!1,key:g.key||g.props.text||x,href:g.props.href||g.href,...g.props,onClick:C=>{t(!1),g.props.onClick&&g.props.onClick(C)}},g.props.text):Bt.createElement(bt,{key:g.key||g.props.text||x,href:g.props.href,...g.props,onClick:C=>{t(!1),g.props.onClick&&g.props.onClick(C)}},g.props.text);if(/separator/i.test(g.type))return Bt.createElement(St,{key:x,$my:.5})}))}var hp={[_.RSI]:"RSI",[_.ATR]:"ATR",[_.ROC]:"ROC"};function Da({indicator:n,setActive:t,setScreen:s,hasDuplicates:o,setRemove:a,...l}){let{config:d}=M();return X.createElement(Me,{$flex:!0,$h:48,$innerCenter:!0,$spaceBetween:!0,$px:1.25,...l},X.createElement(Me,{$flex:!0,$w:"auto",$h:"100%",$innerCenter:!0,$innerLeft:!0},X.createElement(xr,{$size:13,$color:d.theme.indicatorsMenu.indicatorTextColor,$m:0,$mr:.5},hp[n.indicator]||n.indicator),X.createElement(xr,{$m:0,$size:13,$color:d.theme.indicatorsMenu.settingsColor},[n.length,n.type,n.stdDev,n.fastLength,n.slowLength,n.signalLineLength,n.kLength,n.kSmoothing,n.dSmoothing].filter(Boolean).join(" "))),X.createElement(Me,{$flex:!0,$w:"auto",$h:"100%",$innerCenter:!0,$innerLeft:!0},X.createElement(xr,{as:"button",$size:13,$fontWeight:d.theme.fontWeight,$color:n.active?d.theme.indicatorsMenu.settingsColorActive:d.theme.indicatorsMenu.settingsColor,$mr:.5,$border:"0",$background:"none",onClick:()=>s(n)},"Settings"),X.createElement(yr,{active:n.active,setActive:t,outerWidth:40,outerHeight:26,innerSize:22,innerMargin:2}),o&&X.createElement(Me,{$w:24},a&&X.createElement(Me,{as:"button",$border:"0",$background:"none",onClick:a},X.createElement(Me,{as:$a,$w:20,$relative:!0,$left:4,$fill:d.theme.indicatorsMenu.removeIconColor,$transform:"rotate(45deg)"})))))}function Ro({context:n}){let{config:t,setConfig:s}=n,[o,a]=mp(),l=dp(t.indicators.windows,"order"),d=t.indicators.mainChart.map(x=>x.indicator),c=!!d.filter((x,C)=>d.indexOf(x)!==C).length,u=x=>{s({...t,indicators:{...t.indicators,windows:x.map((C,k)=>({...C,order:k}))}})},h=(x,C)=>k=>s({...t,indicators:{...t.indicators,currentScreen:k.indicator,currentScreenMeta:[x,C]}}),y=(x,C)=>k=>s({...t,indicators:{...t.indicators,[x]:ae(t.indicators[x],C,D=>({...D,active:k}))}}),g=x=>()=>s({...t,indicators:{...t.indicators,mainChart:ae(t.indicators.mainChart,x,C=>({...C,active:!1,shouldRemove:!0}))}});return X.createElement(Me,{$py:1.25},X.createElement(Me,{$mb:1.5},X.createElement(Me,{$px:1.25,$flex:!0,$spaceBetween:!0,$mobile$justifyContent:"flex-start"},X.createElement(xr,{$size:13,$color:t.theme.indicatorsMenu.subtitleColor,$mb:.5},"Main chart"),X.createElement(Me,{$relative:!0,$mobile$left:8,$mobile$top:-1},X.createElement(Me,{as:"button",$border:"0",$background:"none",onClick:()=>a(!0)},X.createElement(Me,{as:$a,$w:20,$fill:o?t.theme.indicatorsMenu.addIconColorActive:t.theme.indicatorsMenu.addIconColor,$transition:!0,$transform:o?"rotate(90deg)":"rotate(0deg)"})),o&&X.createElement(Po,{showAngle:!0,show:o,setShow:a,y:"bottom",xOffset:-20,x:"left",$background:t.theme.popoverMenu.bgColor,items:[{type:"item",props:{text:_.MA,onClick:()=>s({...t,indicators:{...t.indicators,mainChart:[...t.indicators.mainChart,{...t.indicators.defaultConfig[_.MA],color:t.indicators.defaultConfig[_.MA].colorOptions.find(x=>t.indicators.mainChart.some(C=>C.color!==x))||t.indicators.defaultConfig[_.MA].color}]}})}}]}))),X.createElement(St,{$my:"0"}),t.indicators.mainChart.map((x,C)=>X.createElement(X.Fragment,{key:C},X.createElement(Da,{indicator:x,setScreen:h("mainChart",C),setActive:y("mainChart",C),hasDuplicates:c,setRemove:c&&C>0?g(C):void 0}),X.createElement(St,{$my:"0"})))),X.createElement(Me,null,X.createElement(xr,{$px:1.25,$size:13,$color:t.theme.indicatorsMenu.subtitleColor,$mb:.5},"Indicator windows"),X.createElement(zo,{listItems:l,onDragEnd:u},l.map((x,C)=>X.createElement(Ma,{key:C,$px:1.25,$borderTop:t.theme.dragList.borderColor,$borderBottom:t.theme.dragList.borderColor,$mb:"-1px",$background$hover:t.theme.dragList.bgColorHover},X.createElement(Da,{indicator:x,setScreen:h("windows",C),setActive:y("windows",C),$px:"0"}))))))}import vr from"react";import{Div as _a,Text as pp}from"@streamlinedfi/div";import vn from"react";function wr({label:n="Select",value:t,setValue:s,options:o}){let{config:a}=M();return vn.createElement(_a,{$px:1.25,$py:1,$borderTop:a.theme.indicatorsMenu.borderColor},vn.createElement(pp,{$size:13,$color:a.theme.indicatorsMenu.labelColor,$mt:0,$mb:.5},n),vn.createElement(_a,{$flex:!0},o.map(l=>vn.createElement(nt,{key:l.value,size:"xs",$mr:.5,active:l.value===t,onClick:()=>s(l.value),$background:a.theme.indicatorsMenu.buttonBgColor,$border:l.value===t?a.theme.primary:a.theme.indicatorsMenu.buttonBgColor},l.text))))}function Ho({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return vr.createElement(xe,{context:n,indicator:l},vr.createElement(wr,{label:"Type",value:l.type,options:[{text:"Simple",value:"SMA"},{text:"Exponential",value:"EMA"}],setValue:c=>d("type",c)}),vr.createElement(ee,{label:"Fast Length",value:l.fastLength,setValue:c=>d("fastLength",c)}),vr.createElement(ee,{label:"Slow Length",value:l.slowLength,setValue:c=>d("slowLength",c)}),vr.createElement(ee,{label:"Signal Line Length",value:l.signalLineLength,setValue:c=>d("signalLineLength",c)}))}import kr from"react";function No({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return kr.createElement(xe,{context:n,indicator:l},kr.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),kr.createElement(wr,{label:"Type",value:l.type,options:[{text:"Simple",value:"SMA"},{text:"Exponential",value:"EMA"}],setValue:c=>d("type",c)}),kr.createElement(rt,{value:l.color,options:l.colorOptions,setValue:c=>d("color",c)}),kr.createElement(ot,{value:l.thickness,setValue:c=>d("thickness",c)}))}import kn from"react";function Fo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return kn.createElement(xe,{context:n,indicator:l},kn.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),kn.createElement(rt,{value:l.color,options:l.colorOptions,setValue:c=>d("color",c)}),kn.createElement(ot,{value:l.thickness,setValue:c=>d("thickness",c)}))}import Vt from"react";function Bo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return Vt.createElement(xe,{context:n,indicator:l},Vt.createElement(ee,{label:"Length",value:l.length,setValue:c=>d("length",c)}),Vt.createElement(rt,{value:l.color,options:l.colorOptions,setValue:c=>d("color",c)}),Vt.createElement(ot,{value:l.thickness,setValue:c=>d("thickness",c)}),Vt.createElement(ee,{label:"Upper line",value:l.upperLine,setValue:c=>d("upperLine",c)}),Vt.createElement(ee,{label:"Lower line",value:l.lowerLine,setValue:c=>d("lowerLine",c)}))}import Ut from"react";function Vo({context:n}){let{config:t,setConfig:s}=n,[o,a]=t.indicators.currentScreenMeta,l=t.indicators[o][a],d=(c,u)=>s({...t,indicators:{...t.indicators,[o]:ae(t.indicators[o],a,h=>({...h,[c]:u}))}});return Ut.createElement(xe,{context:n,indicator:l},Ut.createElement(ee,{label:"K Length",value:l.kLength,setValue:c=>d("kLength",c)}),Ut.createElement(ee,{label:"K Smoothing",value:l.kSmoothing,setValue:c=>d("kSmoothing",c)}),Ut.createElement(ee,{label:"D Smoothing",value:l.dSmoothing,setValue:c=>d("dSmoothing",c)}),Ut.createElement(ee,{label:"Upper line",value:l.upperLine,setValue:c=>d("upperLine",c)}),Ut.createElement(ee,{label:"Lower line",value:l.lowerLine,setValue:c=>d("lowerLine",c)}))}var xp={[Ae.Indicators]:Ro,[Ae.MA]:No,[Ae.RSI]:Bo,[Ae.ATR]:Yo,[Ae.STO]:Vo,[Ae.MACD]:Ho,[Ae.BB]:Wo,[Ae.ROC]:Fo};function Uo({floating:n,strategy:t,x:s,y:o,context:a,onOutsideClick:l}){let{config:d}=a,c=xp[d.indicators.currentScreen||Ae.Indicators];return typeof window<"u"&&gp(Cr.createElement(yp,{theme:ct.theme},Cr.createElement(Ta,{$fixed:!0,$cover:!0,$z:d.theme.popoverMenu.zIndex-1,onClick:l},Cr.createElement(Ta,{ref:n,style:{position:t,top:o??0,left:s??0,width:360}},Cr.createElement(He,{y:"bottom",x:"center",yOffset:12,$w:360,onOutsideClick:l},Cr.createElement(c,{context:a}))))),document.getElementById("streamlined-container"))}var{entries:Ya}=Object,jo={crosshair:ha,line:Kr,rect:Jr,harea:Xr,hline:qr,vline:tn,text:Qr},Qk=kp(le)`
  ${n=>console.log("TCL: styled props",n,n.theme.spacing(1))};
`;function Go({onTimeframeChange:n}){let t=M(),{frame:s,config:o,setConfig:a}=t,[l,d]=Aa(!1),[c,u]=Aa(!1),h=$o(),y=o.timeframe,g=typeof window<"u"&&typeof document<"u"?document.body.clientWidth<o.mobileThreshold:!1,x=o.width<472,{x:C,y:k,reference:D,floating:$,strategy:I}=ma({strategy:"absolute",placement:"bottom"}),W=S=>a({...o,tool:S}),H=(S=!0)=>{a({...o,indicators:{...o.indicators,showMenu:S,currentScreen:"Indicators"}})},B=976,U=jo[o.tool];return z.createElement(vp,{divProps:{style:{width:"100%"},className:"streamlined-chart-html"}},z.createElement(Cp,{theme:ct.theme},z.createElement(le,{$w:"100%",$absolute:!0},z.createElement(le,{$flex:!0,$w:"auto",$absolute:!0,$top:s.header.yStart,...o.width>B?{$left:"50%",$transform:"translateX(-50%)"}:{$right:o.theme.header.marginRight}},z.createElement(le,{$relative:!0,$flex:!0,$innerCenter:!0,$w:"auto",$border:l?`1px solid ${o.theme.header.buttonBorderColorActive}`:`1px solid ${o.theme.header.buttonBorderColor}`,$background:o.theme.header.background,$h:34,$radius:17,$mr:.5},o.width>B?o.timeframes.map(S=>z.createElement(le,{key:S.id,$flex:!0,as:"button",$shrink:"0",$innerCenter:!0,$w:32,$h:32,$radius:16,$fontSize:13,$fontWeight:o.theme.fontWeight,$color:y.id===S.id?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$background:y.id===S.id?o.theme.header.buttonBgColorActive:"none",$border:"0",onClick:()=>n(S)},S.text)):z.createElement(z.Fragment,null,z.createElement(le,{id:"t",$flex:!0,as:"button",$shrink:"0",$innerCenter:!0,$h:32,$px:.75,$radius:16,$fontSize:13,$fontWeight:o.theme.fontWeight,$color:l?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$boxShadow:`inset 0 0 0 1px ${l?La(.5,o.theme.header.buttonColorActive):"transparent"}`,$background:"none",$border:"0",onClick:()=>d(!l)},z.createElement(le,{as:"span",$mr:.25},y.text),z.createElement(le,{as:Oa,$w:12})),l&&z.createElement(He,{x:"center",y:"bottom",onOutsideClick:()=>d(!1),$p:1.25,$color:o.theme.popoverMenu.color,showAngle:!1,$textAlign:"left"},z.createElement(Cn,{$size:13,$weight:600,$color:o.theme.popoverMenu.uppercaseColor,$uppercase:!0,$mt:0,$mb:.5},"Minute"),z.createElement(le,{$flex:!0,$mb:1.5},o.timeframes.filter(S=>/^M/.test(S.id)).map(S=>z.createElement(nt,{active:S.id===y.id,size:"small",rounded:!0,key:S.id,$mr:.5,onClick:()=>{n(S),d(!1)}},S.text))),z.createElement(Cn,{$size:13,$weight:600,$color:o.theme.popoverMenu.uppercaseColor,$uppercase:!0,$mt:0,$mb:.5},"Hour"),z.createElement(le,{$flex:!0,$mb:1.5},o.timeframes.filter(S=>/^H/.test(S.id)).map(S=>z.createElement(nt,{active:S.id===y.id,size:"small",rounded:!0,key:S.id,$mr:.5,onClick:()=>{n(S),d(!1)}},S.text))),z.createElement(Cn,{$size:13,$weight:600,$color:o.theme.popoverMenu.uppercaseColor,$uppercase:!0,$mt:0,$mb:.5},"Day/Week"),z.createElement(le,{$flex:!0},o.timeframes.filter(S=>/^(D|W)/.test(S.id)).map(S=>z.createElement(nt,{active:S.id===y.id,size:"small",rounded:!0,key:S.id,$mr:.5,onClick:()=>{n(S),d(!1)}},S.text)))))),!g&&z.createElement(le,{$relative:!0,$flex:!0,$innerCenter:!0,$w:"auto",$border:c?`1px solid ${o.theme.header.buttonBorderColorActive}`:`1px solid ${o.theme.header.buttonBorderColor}`,$boxShadow:`inset 0 0 0 1px ${c?La(.5,o.theme.header.buttonBorderColorActive):"transparent"}`,$background:o.theme.header.background,$h:34,$radius:17,$mr:.5},o.width>B?Ya(jo).map(([S,Z])=>z.createElement(le,{key:S,$flex:!0,as:"button",$shrink:"0",$innerCenter:!0,$w:32,$h:32,$radius:16,$color:o.tool===S?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$background:o.tool===S?o.theme.header.buttonBgColorActive:"none",$border:"0",onClick:()=>W(S),"aria-label":S},z.createElement(Z,null))):z.createElement(z.Fragment,null,z.createElement(le,{$flex:!0,as:"button","aria-label":"Chart tool",$shrink:"0",$innerCenter:!0,$h:32,$px:.75,$radius:16,$color:c?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$background:"none",$border:"0",onClick:()=>u(!c)},z.createElement(le,{as:U,$mr:.25}),z.createElement(le,{as:Oa,$w:12})),c&&z.createElement(He,{x:"left",y:"bottom",onOutsideClick:()=>u(!1),$p:1,$color:o.theme.popoverMenu.color,showAngle:!1,$textAlign:"left"},z.createElement(Cn,{$size:13,$weight:600,$color:o.theme.popoverMenu.uppercaseColor,$uppercase:!0,$mt:0,$mb:.5,$center:!0},"Tools"),z.createElement(le,{$flex:!0},Ya(jo).map(([S,Z])=>z.createElement(nt,{key:S,active:S===o.tool,size:"small",rounded:!0,$mx:.25,onClick:()=>{W(S),u(!1)}},z.createElement(Z,null))))))),!x&&z.createElement(le,{ref:D,as:"button",$flex:!0,$innerCenter:!0,$w:"auto",$border:`1px solid ${o.indicators.showMenu?o.theme.header.buttonBorderColorActive:o.theme.header.buttonBorderColor}`,$background:o.theme.header.background,$h:34,$radius:17,$px:.75,$fontSize:13,$fontWeight:o.theme.fontWeight,$color:o.indicators.showMenu?o.theme.header.buttonColorActive:o.theme.header.buttonColor,$mr:.5,onClick:()=>H(!o.indicators.showMenu)},"Indicators"),o.indicators.showMenu&&z.createElement(Uo,{floating:$,strategy:I,x:C,y:k,context:t,onOutsideClick:()=>H(!1)}),o.width>=584&&z.createElement(le,{as:"button",$flex:!0,$innerCenter:!0,$w:"auto",$border:o.theme.header.buttonBorderColor,$background:o.theme.header.background,$h:34,$radius:17,$px:.75,$fontSize:13,$fontWeight:o.theme.fontWeight,$color:o.theme.header.buttonColor,$mr:.5,onClick:h},"Screenshot"),o.showFullscreenButton&&z.createElement(le,{as:"button",$flex:!0,$innerCenter:!0,$w:"auto",$border:o.theme.header.buttonBorderColor,$background:o.theme.header.background,$h:34,$radius:17,$px:.75,$fontSize:13,$color:o.theme.header.buttonColor,onClick:()=>a({...o,fullscreen:!o.fullscreen})},z.createElement(le,{as:wp,$w:20,$fill:o.theme.header.buttonColor}))))))}import Sn,{forwardRef as Mp,useRef as Dp}from"react";import Xo from"lodash/isNil";var{fromEntries:bp,entries:Sp}=Object;function Zo(n){return Array.isArray(n)?n.map(Zo).filter(t=>!Xo(t)):typeof n=="object"&&!Xo(n)?bp(Sp(n).map(([t,s])=>[t,Zo(s)]).filter(([t,s])=>!Xo(s))):n}var bn=Zo;function $p({getWidth:n,...t},s){let o=Dp(),{config:a}=M(),l={fontFamily:a.theme.fontFamily,fontSize:a.theme.fontSize,fontWeight:a.theme.fontWeight,fill:a.theme.color,...bn(t)};return o.current?.textWidth&&typeof n=="function"&&n(o.current?.textWidth),Sn.createElement(Sn.Fragment,null,t.bgFill&&o.current?.textWidth&&Sn.createElement(Te,{x:t.x,y:t.y,offsetX:t.bgPadding,offsetY:t.bgPadding,width:o.current.textWidth+t.bgPadding*2,height:l.fontSize+t.bgPadding*2,fill:t.bgFill,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1}),Sn.createElement(ys,{ref:d=>{(n||t.bgFill)&&(o.current=d),s&&(s.current=d)},transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,...l}))}var br=Mp($p);function Tp({onTimeframeChange:n,onSymbolClick:t}){let{frame:s,config:o,setCursor:a}=M(),[l,d]=_p(),c=o.width<472,u=c?new qo.Text({text:o.symbol.code,fontFamily:o.theme.fontFamily,fontSize:o.theme.title.fontSize,fontWeight:500}).getTextWidth():Math.max(new qo.Text({text:o.symbol.name,fontFamily:o.theme.fontFamily,fontSize:o.theme.title.fontSize,fontWeight:500}).getTextWidth(),new qo.Text({text:o.symbol.code,fontFamily:o.theme.fontFamily,fontSize:o.theme.subtitle.fontSize,fontWeight:500}).getTextWidth());return Ne.createElement(j,null,o.symbolClick!==!1?Ne.createElement(Qn,{onMouseEnter:()=>{a("pointer"),d(!0)},onMouseLeave:()=>{a("default"),d(!1)},onClick:t},Ne.createElement(Te,{x:s.header.xStart,y:s.header.yStart,width:u+8+o.theme.header.angleDownSize+4,height:4+o.theme.title.fontSize+4+o.theme.subtitle.fontSize+4}),Ne.createElement(br,{text:c?o.symbol.code:o.symbol.name,x:s.header.xStart,y:c?s.header.yStart+12:s.header.yStart+4,fontSize:o.theme.title.fontSize,fill:l?o.theme.title.colorHover:o.theme.title.color}),!c&&Ne.createElement(br,{text:o.symbol.code,x:s.header.xStart,y:s.header.yStart+4+o.theme.title.fontSize+4,fontSize:o.theme.subtitle.fontSize,fill:l?o.theme.subtitle.colorHover:o.theme.subtitle.color}),Ne.createElement(Co,{x:s.header.xStart+u+(c?4:8),y:c?s.header.yStart+12+4:s.header.yStart+4+4,size:o.theme.header.angleDownSize,color:l?o.theme.header.angleDownColorHover:o.theme.header.angleDownColor})):Ne.createElement(Qn,null,Ne.createElement(br,{text:c?o.symbol.code:o.symbol.name,x:s.header.xStart,y:c?s.header.yStart+12:s.header.yStart+4,fontSize:o.theme.title.fontSize,fill:o.theme.title.color}),!c&&Ne.createElement(br,{text:o.symbol.code,x:s.header.xStart,y:s.header.yStart+4+o.theme.title.fontSize+4,fontSize:o.theme.subtitle.fontSize,fill:o.theme.subtitle.color})),Ne.createElement(Go,{onTimeframeChange:n}))}var Ea=Tp;import Dr,{useRef as qa}from"react";import{scaleLinear as a0}from"d3-scale";import Mr from"react";import{ATR as Rp,EMA as Hp,RSI as Np,SMA as Sr,Stochastic as Fp}from"@debut/indicators";import Bp,{useContext as Vp}from"react";import Op from"lodash/inRange";var Lp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=o.map(c=>[a.x(c.i),l(c.value)]).filter(([c,u])=>u!==void 0&&Op(c,t.xStart,t.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.color,strokeWidth:s.thickness,points:d,perfectDrawEnabled:!1,listening:!1}}]},Wa=Lp;import Jo from"lodash/inRange";import{transparentize as za}from"polished";import Ia from"lodash/last";var Ap=1;function Ko(n){let t=(Ia(n.range())-n.range()[0])/(Ia(n.domain())-n.domain()[0]),s=Ap,o=1;return t>10?(o=2,s=3):t>5?(o=1.5,s=2):t>2.5&&(s=1),{width:t-s,margin:s,wickWidth:o}}var Yp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=Ko(a.x),c=s.signalLineLength>1?o.map(g=>[a.x(g.i),l(g.values.signal)]).filter(([g,x])=>x!==void 0&&Jo(g,t.xStart,t.xEnd)).flat(1):[],u=o.map(g=>[a.x(g.i),l(g.values.macd)]).filter(([g,x])=>x!==void 0&&Jo(g,t.xStart,t.xEnd)).flat(1),h=(g,x)=>{if(g){if(g.values.histogram&&Math.abs(g.values.histogram)!==1/0)return g.values.histogram;if((!g.values.histogram||Math.abs(g.values.histogram)===1/0)&&x>=s.signalLineLength)return g.values.macd}},y=o.map((g,x)=>{let C=h(g,x),k=h(o[x-1],x-1),D;return C>0?(D=n.theme.candleUpColor,k!==void 0&&(D=C>k?n.theme.candleUpColor:za(.25,n.theme.candleUpColor))):(D=n.theme.candleDownColor,k!==void 0&&(D=C<k?n.theme.candleDownColor:za(.25,n.theme.candleDownColor))),[a.x(g.i),l(C),D]}).filter(([g,x])=>x!==void 0&&Jo(g,t.xStart,t.xEnd));return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},...y.map(([g,x,C])=>({type:"Rect",attrs:{x:g,y:Math.min(x,l(0)),width:Math.max(d.width,.5),height:Math.abs(x-l(0)),fill:C,perfectDrawEnabled:!1,listening:!1}})),{type:"Line",attrs:{stroke:s.macdLineColor,strokeWidth:s.thickness,points:u,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.signalLineColor,strokeWidth:s.thickness,points:c,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.axes.lineColor,strokeWidth:1,points:[t.xEnd,t.yStart,t.xEnd,t.yEnd],perfectDrawEnabled:!1,listening:!1}}]},Pa=Yp;import Ep from"lodash/inRange";var Wp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=o.map(c=>[a.x(c.i),l(c.value)]).filter(([c,u])=>u!==void 0&&Ep(c,t.xStart,t.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.roc.zeroLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(0),t.xEnd,l(0)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.color,strokeWidth:s.thickness,points:d,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.axes.lineColor,strokeWidth:1,points:[t.xEnd,t.yStart,t.xEnd,t.yEnd],perfectDrawEnabled:!1,listening:!1}}]},Ra=Wp;import Ip from"lodash/inRange";var zp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=o.map(c=>[a.x(c.i),l(c.value)]).filter(([c,u])=>u!==void 0&&Ip(c,t.xStart,t.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Rect",attrs:{x:t.xStart,y:l(s.upperLine),width:t.xEnd-t.xStart,height:l(s.lowerLine)-l(s.upperLine),fill:n.theme.indicators.rsi.bgColor}},{type:"Line",attrs:{stroke:n.theme.indicators.rsi.upperLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(s.upperLine),t.xEnd,l(s.upperLine)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.rsi.middleLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(50),t.xEnd,l(50)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.rsi.lowerLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(s.lowerLine),t.xEnd,l(s.lowerLine)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.color,strokeWidth:s.thickness,points:d,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.axes.lineColor,strokeWidth:1,points:[t.xEnd,t.yStart,t.xEnd,t.yEnd],perfectDrawEnabled:!1,listening:!1}}]},Ha=zp;import Na from"lodash/inRange";var Pp=({config:n,indicatorFrame:t,indicator:s,series:o,scales:a,yScale:l})=>{let d=o.map(u=>[a.x(u.i),l(u.values.k)]).filter(([u,h])=>h!==void 0&&Na(u,t.xStart,t.xEnd)).flat(1),c=o.map(u=>[a.x(u.i),l(u.values.d)]).filter(([u,h])=>h!==void 0&&Na(u,t.xStart,t.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.theme.indicatorWindow.splitLineColor,strokeWidth:n.theme.indicatorWindow.splitLineWidth,points:[t.xStart,t.yStart,t.xEnd,t.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Rect",attrs:{x:t.xStart,y:l(s.upperLine),width:t.xEnd-t.xStart,height:l(s.lowerLine)-l(s.upperLine),fill:n.theme.indicators.stochastic.bgColor}},{type:"Line",attrs:{stroke:n.theme.indicators.stochastic.upperLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(0),t.xEnd,l(0)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.stochastic.upperLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(s.upperLine),t.xEnd,l(s.upperLine)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.stochastic.middleLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(50),t.xEnd,l(50)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.indicators.stochastic.lowerLineColor,strokeWidth:1,dash:[3,4],points:[t.xStart,l(s.lowerLine),t.xEnd,l(s.lowerLine)],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.kColor,strokeWidth:s.thickness,points:d,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:s.dColor,strokeWidth:s.thickness,points:c,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:n.theme.axes.lineColor,strokeWidth:1,points:[t.xEnd,t.yStart,t.xEnd,t.yEnd],perfectDrawEnabled:!1,listening:!1}}]},Fa=Pp;function Up(n,t){if(!n.series)return[];let s=new Np(Number(t.length));return n.series?.map(o=>({i:o.i,value:s.nextValue(o.close)}))}function jp(n,t){if(!n.series)return[];let s=new Rp(Number(t.length),"SMA");return n.series?.map(o=>({i:o.i,value:s.nextValue(o.high,o.low,o.close)}))}function Gp(n,t){if(!n.series)return[];let s=Number(t.length);return n.series.map((o,a)=>{if(a<s)return null;let l=o.close,d=n.series[a-s].close,c=(l-d)/d*100;return{i:o.i,value:c}}).filter(Boolean)}function Xp(n,t){if(!n.series)return[];let s=new Sr(Number(t.kSmoothing)),o=new Sr(Number(t.kSmoothing)),a=new Sr(Number(t.kSmoothing)),l=new Fp(Number(t.kLength),Number(t.dSmoothing));return n.series?.map(d=>{let c=s.nextValue(d.high),u=o.nextValue(d.low),h=a.nextValue(d.close);if(h){let{k:y,d:g}=l.nextValue(c,u,h)||{};return{i:d.i,values:{k:y,d:g}}}}).filter(Boolean)}function Zp(n,t){if(!n.series)return[];let s=t.type==="SMA"?Sr:Hp,o=new s(Number(t.fastLength)),a=new s(Number(t.slowLength)),l=new Sr(Number(t.signalLineLength));return n.series?.map(d=>{let c=o.nextValue(d.close),u=a.nextValue(d.close);if(!u||!c)return;let h=c-u,y=h&&l.nextValue(h)||void 0,g=h-y||void 0;if(!Number.isNaN(h))return{i:d.i,values:{macd:h,emaFast:c,emaSlow:u,signal:y,histogram:g}}}).filter(Boolean)}var Ba={[_.RSI]:Up,[_.ATR]:jp,[_.STO]:Xp,[_.MACD]:Zp,[_.ROC]:Gp},Va={[_.RSI]:Ha,[_.ATR]:Wa,[_.STO]:Fa,[_.MACD]:Pa,[_.ROC]:Ra},Qo=(n,{config:t,frame:s,indicatorFrame:o})=>n.copy().nice().ticks().reverse().reduce((a,l,d)=>{let c=n(l);return d>0&&c>a.yEnd-t.theme.axes.minTickSpaceY||c>o.yEnd-t.theme.axes.fontSize/2||c<o.yStart+t.theme.axes.fontSize/2?a:{yEnd:c-t.theme.axes.fontSize,ticks:[...a.ticks,{value:l,y:c}]}},{yEnd:s.mainInner.yEnd,ticks:[]}).ticks,Ua={[_.RSI]:(n,{indicator:t})=>[{value:t.upperLine,y:n(t.upperLine)},{value:t.lowerLine,y:n(t.lowerLine)}],[_.STO]:(n,{indicator:t})=>[{value:t.upperLine,y:n(t.upperLine)},{value:t.lowerLine,y:n(t.lowerLine)}],[_.ATR]:Qo,[_.MACD]:Qo,[_.ROC]:Qo},ja={[_.RSI]:()=>[100,0],[_.STO]:()=>[100,0],[_.ATR]:n=>[Math.ceil(Math.max(...n.map(t=>t.value||0))),0],[_.ROC]:n=>{let t=n.map(a=>a.value||0),s=Math.max(...t),o=Math.min(...t);return[Math.ceil(s),Math.floor(o)]},[_.MACD]:n=>[Math.ceil(Math.max(...n.flatMap(s=>[s.values.histogram&&Math.abs(s.values.histogram)!==1/0?s.values.histogram:0,s.values.macd||0]))),Math.floor(Math.min(...n.flatMap(s=>[s.values.histogram&&Math.abs(s.values.histogram)!==1/0?s.values.histogram:0,s.values.macd||0])))]},ei=Bp.createContext();function dt(){return Vp(ei)}import{useEffect as Kp}from"react";import Jp from"lodash/forEach";function qp({frame:n,config:t,value:s,y:o,showLine:a=!0}){return[t.theme.grid.showY&&a&&{type:"Line",attrs:{points:[n.mainChart.xStart,o,n.mainChart.xEnd,o],stroke:t.theme.grid.lineColor,strokeWidth:1,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{points:[n.yAxis.xStart,o,n.yAxis.xStart+t.theme.axes.tickSize,o],stroke:t.theme.axes.tickColor,strokeWidth:1,perfectDrawEnabled:!1,listening:!1}},{type:"Text",attrs:{fontFamily:t.theme.fontFamily,fontStyle:t.theme.fontStyle,fontSize:t.theme.axes.fontSize,text:t.formatters.axes.y(s),fill:t.theme.axes.color,x:n.yAxis.xStart+t.theme.axes.tickSize+t.theme.axes.tickMargin,y:o+1,offsetY:t.theme.axes.fontSize/2,perfectDrawEnabled:!1}}]}var Mn=qp;function ti(){let{frame:n,config:t}=M(),{baseRenderer:s,key:o,yScale:a,indicator:l,indicatorFrame:d,series:c,scales:u}=dt();if(c.length&&u.loaded){let h=()=>{let y=Ua[l.indicator](a,{config:t,frame:n,indicator:l,indicatorFrame:d});Jp(y,g=>{s(Mn,{key:`${o}.ticks.${g.value}`,value:t.formatters.axes.y(g.value),y:g.y,showLine:[_.ATR,_.MACD].includes(l.indicator)})})};s.destroyAllWith(`${o}.ticks`),h(),u.onChange(h,`${o}.ticks`)}return Kp(()=>()=>{u.offChange(`${o}.ticks`)},[]),null}import{useEffect as Qp}from"react";function ri(){let{baseRenderer:n,key:t,yScale:s,indicator:o,indicatorFrame:a,series:l,scales:d}=dt(),c=`${t}.chart`;if(l.length&&d.loaded){let u=()=>{n.destroyAllWith(c),n(Va[o.indicator],{key:c,indicatorFrame:a,indicator:o,series:l,scales:d,yScale:s})};u(),d.onChange(u,c)}return Qp(()=>()=>{d.offChange(c)},[]),null}import e0 from"lodash/inRange";function ni(){let{dispatch:n,config:t}=M(),{topRenderer:s,key:o,yScale:a,indicatorFrame:l,series:d}=dt();return d.length&&n.on(`mousemove.${o}`,c=>{let u=`${o}.yTick`;c&&e0(c.offsetY,l.yStart,l.yEnd)?s(zt,{key:u,x:c.offsetX,y:c.offsetY,fill:t.theme.crosshair.color,text:t.formatters.crosshair.y(a?.invert(c.offsetY))}):s.destroy(u)}),null}import{useEffect as s0}from"react";import Za from"lodash/last";import Ga from"konva";import t0 from"lodash/round";import{transparentize as r0}from"polished";var n0={[_.RSI]:"RSI",[_.ATR]:"ATR",[_.MACD]:"MACD"},o0={[_.RSI]:n=>n.length,[_.ATR]:n=>n.length,[_.STO]:n=>[n.kLength,n.kSmoothing,n.dSmoothing].join(" "),[_.ROC]:n=>n.length,[_.MACD]:n=>[n.fastLength,n.slowLength,n.signalLineLength].join(" ")};function i0({config:n,indicator:t,indicatorFrame:s,value:o}){let a={fontFamily:n.theme.fontFamily,fontStyle:n.theme.fontStyle,fontSize:n.theme.axes.fontSize,text:n0[t.indicator]||t.indicator,fill:n.theme.indicatorWindow.color,x:s.xStart,y:s.yStart+16,offsetY:n.theme.axes.fontSize/2,perfectDrawEnabled:!1},l=new Ga.Text(a).getTextWidth(),d={...a,text:o0[t.indicator](t),fill:n.theme.indicatorWindow.settingsColor,x:a.x+l+8},c=new Ga.Text(d).getTextWidth();return[{type:"Rect",attrs:{x:s.xStart,y:s.yStart+16-n.theme.fontSize/2,width:l+c+8,height:n.theme.fontSize,fill:r0(.25,n.theme.indicatorWindow.bgColor),cornerRadius:[0,8,8,0]}},{type:"Text",attrs:a},{type:"Text",attrs:d},{type:"Text",attrs:{...d,text:t0(o,2),fill:t.color,x:d.x+c+8}}]}var Xa=i0;function oi(){let{dispatch:n,config:t}=M(),{topRenderer:s,key:o,indicator:a,indicatorFrame:l,series:d}=dt(),c=`${o}.infoWindow`;if(d.length){let u=h=>s(Xa,{key:c,indicatorFrame:l,indicator:a,value:h});u(Za(d).value),n.on(`candle.${c}`,h=>{u(d.find(y=>y.i===h?.i)?.value||Za(d).value)})}return s0(()=>()=>{s.destroy(c),n.on(`candle.${c}`,null)},[]),null}function ii({indicator:n,i:t,indicatorFrame:s,scales:o,baseRenderer:a,topRenderer:l}){let{data:d,config:c}=M(),u=n.indicator.replace(/\s/g,"")+t;if(n.active){let h=Ba[n.indicator],y=h(d,n),g=a0().domain(ja[n.indicator](y)).range([s.yStart+c.theme.indicatorWindow.splitLineWidth,s.yEnd]),x={baseRenderer:a,topRenderer:l,yScale:g,scales:o,key:u,indicator:n,indicatorFrame:s,series:y};return Mr.createElement(ei.Provider,{value:x},Mr.createElement(ti,null),Mr.createElement(ri,null),Mr.createElement(oi,null),Mr.createElement(ni,null))}return a.destroyAllWith(u),l.destroyAllWith(u),null}function si(){let{config:n,frame:t}=M(),s=se("indicatorWindows"),o=qa(),a=qa(),l=ie(o.current),d=ie(a.current);return Dr.createElement(Dr.Fragment,null,Dr.createElement(j,{ref:o}),Dr.createElement(j,{ref:a}),n.indicators.windows.map((c,u)=>Dr.createElement(ii,{key:u,i:u,indicator:c,indicatorFrame:t.indicatorWindows.find(h=>h.indicator===c.indicator),scales:s,baseRenderer:l,topRenderer:d})))}import Dn,{useRef as L0}from"react";import l0 from"lodash/forEach";import f0 from"lodash/inRange";import fi from"lodash/last";import{useEffect as c0}from"react";var ai=window.devicePixelRatio>1?.5:0;function li({stepWidth:n,x:t,open:s,high:o,low:a,close:l,color:d,minWidth:c=0}){let u=ai,h=1;n>10?(h=2,u=3):n>5?(h=1.5,u=2):n>2.5&&(u=1);let y=Math.max(n-u,c),g=Math.min(s,l),x=Math.max(h,Math.abs(l-s));return[{type:"Line",attrs:{points:[t+u/2+y/2,o,t+u/2+y/2,a],stroke:d,strokeWidth:h,perfectDrawEnabled:!1,listening:!1}},{type:"Rect",attrs:{x:t+u/2,y:g,width:y,height:x,fill:d,perfectDrawEnabled:!1,listening:!1,visible:y>=1}}]}var u0=JSON.stringify;function ci({layerRef:n}){let t=ie(n.current),s=se("candles"),{frame:o,config:a,data:l}=M();return c0(()=>{if(s.loaded&&l.series){let d=()=>{let c=(fi(s.x.range())-s.x.range()[0])/(fi(s.x.domain())-s.x.domain()[0]),u=fi(l.series).i;l0(l.series,h=>{let y=s.x(h.i);t(li,{key:`candle.${h.i}`,stepWidth:c,show:f0(y,o.mainChart.xStart-c,o.mainChart.xEnd+c),x:y,open:s.y(h.open),high:s.y(h.high),low:s.y(h.low),close:s.y(h.close),color:h.close>=h.open?a.theme.candleUpColor:a.theme.candleDownColor,minWidth:h.i===u?1:0})})};d(),s.onChange(d)}return()=>{t.destroyAll()}},[l.seriesId,s.loaded,a.timeframe.id,u0(o.mainChart)]),null}import{useEffect as p0}from"react";import{SMA as g0,EMA as y0,BollingerBands as x0}from"@debut/indicators";import d0 from"lodash/inRange";var m0=({indicator:n,frame:t,series:s,scales:o})=>{let a=s.map(l=>[o.x(l.i),o.y(l.value)]).filter(([l,d])=>d!==void 0&&d0(l,t.mainChart.xStart,t.mainChart.xEnd)).flat(1);return[{type:"Line",attrs:{stroke:n.color,strokeWidth:n.thickness,points:a,perfectDrawEnabled:!1,listening:!1}}]},Ka=m0;import ui from"lodash/inRange";var h0=({indicator:n,config:t,frame:s,series:o,scales:a})=>{let l=o.map(u=>[a.x(u.i),a.y(u.values.upper)]).filter(([u,h])=>h!==void 0&&ui(u,s.mainChart.xStart,s.mainChart.xEnd)).flat(1),d=o.map(u=>[a.x(u.i),a.y(u.values.middle)]).filter(([u,h])=>h!==void 0&&ui(u,s.mainChart.xStart,s.mainChart.xEnd)).flat(1),c=o.map(u=>[a.x(u.i),a.y(u.values.lower)]).filter(([u,h])=>h!==void 0&&ui(u,s.mainChart.xStart,s.mainChart.xEnd));return[{type:"Line",attrs:{fill:t.theme.indicators.bb.bgColor,points:[l,c.reverse()].flat(2),perfectDrawEnabled:!1,listening:!1,closed:!0}},{type:"Line",attrs:{stroke:t.theme.indicators.bb.upperlineColor,strokeWidth:n.thickness,points:l,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:t.theme.indicators.bb.middlelineColor,strokeWidth:n.thickness,points:d,perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:t.theme.indicators.bb.lowerlineColor,strokeWidth:n.thickness,points:c.flat(1),perfectDrawEnabled:!1,listening:!1}}]},Ja=h0;var w0=JSON.stringify;function v0(n,t){if(!n.series)return[];let s=t.type==="SMA"?g0:y0,o=new s(Number(t.length));return n.series?.map(a=>({i:a.i,value:o.nextValue(a.close)}))}function k0(n,t){if(!n.series)return[];let s=new x0(Number(t.length),Number(t.stdDev));return n.series?.map(o=>({i:o.i,values:s.nextValue(o.close)})).filter(o=>o.values)}var C0={[_.MA]:v0,[_.BB]:k0},b0={[_.MA]:Ka,[_.BB]:Ja};function di({layerRef:n}){let{config:t,setConfig:s,frame:o,data:a}=M(),l=ie(n.current),d=se("indicators");return d.loaded&&(l.destroyAll(),t.indicators.mainChart.forEach((c,u)=>{let y=`${c.indicator.replace(/\s/g,"")+u}.mainChart`;if(c.active){let x=(C0[c.indicator]||(()=>[]))(a,c);if(!x.length)return;let C=()=>{l(b0[c.indicator],{key:y,indicator:c,scales:d,series:x,frame:o,config:t})};C(),d.onChange(C,y)}else d.offChange(y),l.destroy(y)})),p0(()=>{t.indicators.mainChart.some(c=>c.shouldRemove)&&s({...t,indicators:{...t.indicators,mainChart:t.indicators.mainChart.filter(c=>!c.shouldRemove)}})},[w0(t.indicators.mainChart)]),null}import{useEffect as S0}from"react";import{transparentize as M0}from"polished";import D0 from"lodash/forEach";import Qa from"lodash/last";import $0 from"lodash/maxBy";import _0 from"lodash/filter";import el from"lodash/inRange";var T0=JSON.stringify;function O0({frame:n,x:t,height:s,stepWidth:o,color:a}){let l=ai;o>10?l=3:o>5?l=2:o>2.5&&(l=1);let d=Math.max(o-l,.5),c=n.mainChart.yEnd-s;return[{type:"Rect",attrs:{x:t+l/2,y:c,width:d,height:s,fill:M0(.75,a),transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1}}]}function mi({layerRef:n}){let{frame:t,data:s,config:o}=M(),a=ie(n.current),l=se("volumes");S0(()=>{if(s.series?.[0].volume){let d=()=>{if(!l.loaded)return;let c=t.mainChart.height*.2,u=$0(_0(s.series,y=>el(y.i,...l.x.domain())),"volume")?.volume||0,h=(Qa(l.x.range())-l.x.range()[0])/(Qa(l.x.domain())-l.x.domain()[0]);D0(s.series,({i:y,close:g,open:x,volume:C})=>{let k=l.x(y);a(O0,{key:y,show:el(k,t.mainChart.xStart-h,t.mainChart.xEnd+h),x:k,stepWidth:h,height:C/u*c,color:g>=x?o.theme.candleUpColor:o.theme.candleDownColor})})};d(),l.onChange(d)}return()=>{a.destroyAll()}},[s.seriesId,l.loaded,o.timeframe.id,T0(t.mainChart)])}function hi(){let{frame:n}=M(),t=L0();return Dn.createElement(j,{ref:t,clipX:n.mainChart.xStart,clipY:n.mainChart.yStart,clipWidth:n.mainChart.width,clipHeight:n.mainChart.height},Dn.createElement(di,{layerRef:t}),Dn.createElement(mi,{layerRef:t}),Dn.createElement(ci,{layerRef:t}))}import{transparentize as A0}from"polished";import pi from"react";import{Html as Y0}from"react-konva-utils";function E0({loading:n}){let{frame:t,config:s}=M();return n?pi.createElement(j,null,pi.createElement(Y0,{divProps:{style:{width:"100%"}}},pi.createElement(pr,{$absolute:!0,$left:t.mainInner.xStart,$top:t.mainInner.yStart,$width:t.mainInner.width,$height:t.mainInner.height,$background:A0(.5,s.theme.bgColor)}))):null}var tl=E0;import mt,{useEffect as W0,useState as rl}from"react";import{Html as I0}from"react-konva-utils";import{ThemeProvider as z0}from"styled-components";function P0(){let{config:n,dispatch:t}=M(),[s,o]=rl(null),[a,l]=rl(null);return W0(()=>{t.on("contextmenu.menusOverlay",d=>{o({x:d.offsetX,y:d.offsetY})}),t.on("pointerdown.menusOverlay",()=>{o(null)}),t.on("hoverDrawing.menusOverlay",d=>{l(d)})},[t]),mt.createElement(j,null,s&&mt.createElement(I0,{divProps:{style:{width:"100%"},className:"streamlined-chart-html"}},mt.createElement(z0,{theme:ct.theme},mt.createElement(He,{onOutsideClick:()=>o(null),$top:s.y,$left:s.x,$py:.75,$w:256,$color:n.theme.popoverMenu.color,showAngle:!1,$textAlign:"left",$maxH:192,$height:"auto",$overflowY:"scroll"},mt.createElement(bt,{onClick:()=>{t.call("resetZoom"),t.call("rerender"),o(null)}},"Reset Chart"),mt.createElement(St,{$my:.5}),mt.createElement(bt,{disabled:!a,onClick:()=>{t.call("removeDrawing",null,a),o(null)}},"Remove Drawing"),mt.createElement(bt,{onClick:()=>{t.call("removeDrawings"),o(null)}},"Remove Drawings")))))}var nl=P0;import jt from"konva";import ol from"lodash/last";import{transparentize as R0}from"polished";import H0,{useEffect as N0,useRef as F0}from"react";function il({config:n,frame:t,candle:s}){let o=n.theme.ohlcvOverlay,a=t.mainChart.yStart+o.overlayMarginTop,l=a+n.theme.fontSize+o.itemMarginBottom,d=l+n.theme.fontSize+o.itemMarginBottom,c={fontFamily:n.theme.fontFamily,fontWeight:n.theme.fontWeight,fontSize:o.fontSize,fill:o.keyColor},u={fontFamily:n.theme.fontFamily,fontWeight:n.theme.fontWeight,fontSize:o.fontSize,fill:o.valueColor},h=new jt.Text({text:"Volume",...c}).getTextWidth(),y=new jt.Text({text:"Close",...c}).getTextWidth(),g=t.mainChart.xStart+h+o.itemMarginRight,x=g+Math.ceil(Math.max(new jt.Text({text:n.formatters.axes.y(s.high),...c}).getTextWidth(),new jt.Text({text:n.formatters.axes.y(s.low),...c}).getTextWidth()))+o.colMarginRight,C=x+y+o.itemMarginRight,D=C+Math.ceil(Math.max(new jt.Text({text:n.formatters.axes.y(s.open),...c}).getTextWidth(),new jt.Text({text:n.formatters.axes.y(s.high),...c}).getTextWidth()))+o.overlayMarginRight-t.mainChart.xStart,$=d+n.theme.fontSize+o.overlayMarginBottom-t.mainChart.yStart;return[{type:"Rect",attrs:{x:t.mainChart.xStart,y:t.mainChart.yStart,width:D,height:$,fill:R0(.3,n.theme.bgColor),cornerRadius:[0,0,8,0]}},{type:"Text",attrs:{text:"High",x:t.mainChart.xStart,y:a,...c}},{type:"Text",attrs:{text:n.formatters.axes.y(s.high),x:g,y:a,...u}},{type:"Text",attrs:{text:"Low",x:t.mainChart.xStart,y:l,...c}},{type:"Text",attrs:{text:n.formatters.axes.y(s.low),x:g,y:l,...u}},{type:"Text",attrs:{text:"Volume",x:t.mainChart.xStart,y:d,...c}},{type:"Text",attrs:{text:s.volume?.toLocaleString("en-US"),x:g,y:d,...u}},{type:"Text",attrs:{text:"Open",x,y:a,...c}},{type:"Text",attrs:{text:n.formatters.axes.y(s.open),x:C,y:a,...u}},{type:"Text",attrs:{text:"Close",x,y:l,...c}},{type:"Text",attrs:{text:n.formatters.axes.y(s.close),x:C,y:l,...u}}]}function B0(){let{config:n,data:t,dispatch:s}=M(),o=F0(),a=ie(o.current);return N0(()=>{t.series&&n.width>=640?(a(il,{key:"ohlcvOverlay",candle:ol(t.series)}),s.on("candle.ohlcvOverlay",d=>{a(il,{key:"ohlcvOverlay",candle:d||ol(t.series)})})):(a.destroyAll(),s.on("candle.ohlcvOverlay",null))},[s,t.seriesId,n.width]),H0.createElement(j,{ref:o})}var sl=B0;import $r from"react";import{transparentize as V0}from"polished";import U0 from"use-image";function j0({loading:n}){let{frame:t,config:s}=M(),[o,a]=U0("/assets/logo-chart.svg","anonymous","origin"),l=4;return $r.createElement(j,null,!(n||a!=="loaded"||s.width<=416)&&$r.createElement($r.Fragment,null,$r.createElement(Te,{x:t.mainChart.xStart,y:t.mainChart.yEnd-l*3-28,width:103+l,height:28+l*2,fill:V0(.25,s.theme.bgColor),cornerRadius:[0,8,8,0]}),$r.createElement(xs,{x:t.mainChart.xStart,y:t.mainChart.yEnd-l*2-28,width:103,height:28,image:o})))}var al=j0;import ll from"lodash/forEach";import G0 from"lodash/inRange";import X0,{useEffect as Z0,useRef as fl}from"react";var q0=JSON.stringify;function K0({frame:n,config:t,value:s,x:o,emphasize:a}){return[{type:"Line",attrs:{points:[o,n.xAxis.yStart,o,n.xAxis.yStart+t.theme.axes.tickSize],stroke:t.theme.axes.tickColor,strokeWidth:1,perfectDrawEnabled:!1,listening:!1}},{type:"Text",attrs:{fontFamily:t.theme.fontFamily,fontWeight:a?600:t.theme.fontWeight,fontSize:t.theme.axes.fontSize,fill:a?t.theme.axes.emphasizeColor:t.theme.axes.color,x:o,y:n.xAxis.yStart+t.theme.axes.tickSize+t.theme.axes.tickMargin,text:s,listening:!1}}]}function J0(){let{dispatch:n,frame:t,config:s}=M(),o=fl(),a=fl([]),l=ie(o.current),d=se("xAxis");return Z0(()=>{d.onChange(()=>{let c={};ll(d.xTicks,(u,h)=>{let y=u.i;h===0&&u.x+50>d.xTicks?.[1]?.x||(l(K0,{key:y,show:G0(u.x,t.mainChart.xStart,t.mainChart.xEnd),value:u.value,x:u.x,emphasize:u.emphasize}),c[y]=y)}),ll(a.current,u=>{c[u]||l.destroy(u)}),a.current=Object.keys(c)})},[n,o.current,q0(t.xAxis)]),X0.createElement(j,{ref:o})}var cl=J0;import $n,{useRef as gi}from"react";import yi from"lodash/inRange";import ul from"lodash/forEach";import xi from"lodash/last";function Q0(){let{config:n,data:t,frame:s}=M(),o=gi([]),a=gi(),l=gi(),d=ie(a.current),c=ie(l.current),u=se("yAxis");if(a.current&&u.loaded&&t.series){let h=()=>{let g={};ul(u.yTicks,D=>{let $=D.value,I=D.y!==void 0&&!Number.isNaN(D.y)&&yi(D.y,u.y.range()[0],xi(u.y.range()))&&yi(D.value,u.y.domain()[0],xi(u.y.domain()));d(Mn,{key:$,show:I,value:n.formatters.axes.y(D.value),y:D.y}),g[$]=$}),ul(o.current,D=>{g[D]||d.destroy(D)}),o.current=Object.keys(g);let x=xi(t.series),C=u.y(x.close),k=x.close>x.open?n.theme.candleUpColor:n.theme.candleDownColor;d.destroy("lastClose"),d(zt,{key:"lastClose",y:C,show:yi(C,s.yAxis.yStart,s.yAxis.yEnd),text:n.formatters.axes.y(x.close),fill:k})};h(),u.onChange(h),(()=>{c(({frame:g,config:x})=>[{type:"Line",attrs:{stroke:x.theme.axes.lineColor,strokeWidth:1,points:[g.xAxis.xStart,g.xAxis.yStart,g.xAxis.xEnd,g.xAxis.yStart],perfectDrawEnabled:!1,listening:!1}},{type:"Line",attrs:{stroke:x.theme.axes.lineColor,strokeWidth:1,points:[g.yAxis.xStart,g.yAxis.yStart,g.yAxis.xStart,g.yAxis.yEnd],perfectDrawEnabled:!1,listening:!1}}],{key:"axeslines"})})()}return $n.createElement($n.Fragment,null,$n.createElement(j,{ref:a}),$n.createElement(j,{ref:l}))}var dl=Q0;import{createGlobalStyle as eg}from"styled-components";var ml=eg`
  .streamlined-chart-html {
    box-sizing: border-box;

    *,
    *:before,
    *:after {
      box-sizing: inherit;
    }

    &,
    input,
    textarea,
    button {
      font-family: ${n=>n.theme.fontFamily};
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      font-smoothing: antialiased;
    }

    p {
      font-weight: ${n=>n.theme.fontWeight};
      font-size: ${n=>n.theme.fontSize}px;
    }

    a,
    button,
    label {
      cursor: pointer;

      &:active:not([disabled]) {
        filter: brightness(90%);
        transition-duration: 0.05s;
      }
    }

    a {
      &,
      &:active,
      &:visited,
      &:hover {
        text-decoration: none;
      }
    }
  }
`;var tg=n=>t=>{n.current.content.style.cursor=t},hl=tg;function wi(...n){return t=>{n.filter(Boolean).forEach(s=>{s.current=t})}}import rg from"deepmerge";import{useEffect as ng,useState as og}from"react";import{format as pl}from"friendly-numbers";import gl from"moment-timezone";import{tint as Gt,transparentize as Mt}from"polished";var v={fontFamily:'-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif',colorMap:{0:"#0094FF",1:"#4db705",2:"#d6c103",3:"#e3482d",4:"#e21de7"},primary:"#0094FF",greenCandle:"#24C1B0",redCandle:"#FF5959",fill900:"#F5F7FB",fill800:"#E7EBFA",fill700:"#CAD3ED",fill600:"#ADB7D3",fill500:"#95A0BF",fill400:"#7D88AA",fill300:"#4A5169",fill200:"#3E4459",fill100:"#313747",border:"#3E4459",background:"#232936",backgroundDarker:"#1d222d",backgroundDarkest:"#181c25"},ht=ya(v),vi={title:"",xKey:"x",yKey:"y",formatters:{axes:{x:n=>gl.tz(n,"America/New_York").format("MMM \u2019YY"),y:n=>pl(n,{formattedDecimals:2})},crosshair:{x:n=>gl.tz(n,"America/New_York").format("D MMM \u2019YY HH:mm"),y:n=>pl(n,{formattedDecimals:2})}},tool:"crosshair",screenshotFileFormat:"{date} - Streamlined Finance.{fileType}",excludeWeekend:!0,session:"0400-2000",timezone:"America/New_York",fullscreen:!1,showFullscreenButton:!0,initialCandlesWindow:150,mobileThreshold:768,theme:{colors:Object.values(v.colorMap),bgColor:v.backgroundDarker,borderRadius:10,primary:v.primary,lineColor:v.primary,lineWidth:1.5,lineCircleSize:10,candleUpColor:v.greenCandle,candleDownColor:v.redCandle,fontFamily:v.fontFamily,fontSize:14,fontWeight:500,color:v.fill600,padding:[20,24,24,24],title:{fontSize:14,marginBottom:12,color:v.fill800,colorHover:v.fill900},subtitle:{fontSize:13,marginBottom:12,color:v.fill600,colorHover:v.fill700},header:{angleDownSize:10,angleDownColor:v.fill600,angleDownColorHover:v.fill800,toolbarBorderColor:v.fill200,buttonFontSize:13,buttonColor:v.fill500,buttonColorHover:v.fill800,buttonColorActive:v.primary,buttonBgColorActive:v.fill100,buttonBorderColor:v.fill300,buttonBorderColorActive:v.primary,marginRight:20,background:v.backgroundDarker},legend:{fontSize:13,color:v.fill600,itemMarginRight:12,itemMarginBottom:8,marginBottom:12,circle:{positionTop:0,size:11,marginRight:6,lineWidth:1.5}},grid:{lineColor:v.fill100,showY:!0,showX:!1},axes:{fontSize:13,color:v.fill500,emphasizeColor:v.fill600,lineColor:v.fill300,tickColor:v.fill300,tickSize:8,tickMargin:4,lastValueTickBgSize:20,xEndShiftRatio:1.05,minTickWidthX:60,minTickSpaceY:8,hoverColor:Mt(.95,v.fill400)},indicatorWindow:{splitLineColor:v.fill300,splitLineWidth:2,bgColor:v.background,color:v.fill500,settingsColor:v.fill600},crosshair:{color:v.fill800,tickColor:v.fill800,tickBgColor:v.fill200,lineColor:v.fill500,lineDash:[3,4]},ohlcvOverlay:{keyColor:v.fill500,valueColor:v.fill600,fontSize:13,overlayMarginTop:8,overlayMarginBottom:8,overlayMarginRight:8,itemMarginBottom:8,itemMarginRight:16,colMarginRight:24},menu:{bgColor:v.background,borderColor:v.fill300,borderWidth:1,borderRadius:6,padding:6,item:{padding:10,fontSize:13,color:v.fill700,colorHover:v.fill900,colorActive:v.fill800,bgColorHover:Gt(.03,v.background),bgColorActive:v.backgroundDarkest,borderRadius:8}},input:{labelColor:v.fill500,labelBgColor:v.background,color:v.fill700,bgColor:Gt(.02,v.background),bgColorHover:Gt(.03,v.background),bgColorDarker:Gt(.02,v.backgroundDarker),bgColorDarkerHover:Gt(.03,v.backgroundDarker)},button:{borderColor:v.fill200,borderColorHover:v.fill300,borderColorActive:v.primary,color:v.fill700,colorHover:v.fill800,colorActive:v.primary},popoverMenu:{zIndex:9999,background:v.backgroundDarker,bgColor:v.backgroundDarker,borderColor:v.fill300,color:v.fill700,uppercaseColor:v.fill500},indicatorsMenu:{titleColor:v.fill800,subtitleColor:v.fill500,indicatorTextColor:v.fill700,borderColor:v.fill200,settingsColor:v.fill500,buttonBgColor:Gt(.02,v.background),buttonBorderColor:v.fill700,buttonBorderColorActive:v.fill900,labelColor:v.fill600,addIconColor:v.fill500,addIconColorActive:v.fill800,settingsColorActive:v.primary,removeIconColor:v.fill400},drawingToolbar:{colors:[v.primary,v.greenCandle,v.redCandle,v.fill800,v.fill600],iconColor:v.fill800,bgColor:v.backgroundDarker,borderColor:v.fill300,closeColor:v.fill600,closeBgColor:v.fill100,textColor:v.fill500,textColorActive:v.fill800,textBgColor:v.fill100},switch:{activeBgColor:Mt(.25,v.primary),inactiveBgColor:v.fill300,activeColor:v.fill800,inactiveColor:v.fill600},dragList:{topZIndex:9999,borderColor:v.fill200,bgColorHover:v.backgroundDarker,handleBgColorHover:v.backgroundDarkest,handleColor:v.fill300},close:{bgColorActive:v.backgroundDarkest,color:v.fill400,colorHover:v.fill900,colorActive:v.fill700},indicators:{bb:{bgColor:Mt(.5,v.backgroundDarkest),upperlineColor:v.red,middlelineColor:v.primary,lowerlineColor:v.greenCandle},macd:{bgColor:Mt(.5,v.backgroundDarkest),histogramColor:v.greenCandle,histogramBgColor:Mt(.25,v.greenCandle),signalLineColor:v.primary,signalLineBgColor:Mt(.25,v.primary),histogramBarColor:v.redCandle,histogramBarBgColor:Mt(.25,v.redCandle)},roc:{zeroLineColor:v.fill300},rsi:{bgColor:v.backgroundDarkest,upperLineColor:v.fill400,lowerLineColor:v.fill400,middleLineColor:v.fill300},stochastic:{bgColor:v.backgroundDarkest,upperLineColor:v.fill400,lowerLineColor:v.fill400,middleLineColor:v.fill300}}},indicators:{showMenu:!1,currentScreen:"Indicators",currentScreenMeta:[],mainChart:[ht[_.BB],ht[_.MA]],windows:[ht[_.MACD],ht[_.RSI],ht[_.ATR],ht[_.STO],ht[_.ROC]],defaultConfig:ht}};var{stringify:ig}=JSON;function yl(n){return{...rg(vi,bn(n)),indicators:n.indicators||vi.indicators}}function ki(n){let[t,s]=og(yl(n));return ng(()=>{s(yl(n))},[ig(n)]),[t,s]}import _n from"lodash/last";import sg from"lodash/map";import ag from"lodash/reverse";import{useEffect as lg,useRef as fg,useState as cg}from"react";function xl(n,t,s){return`${n}:${t}:${s?.length?`${s[0].time}:${s[0].close}-${_n(s).time}:${_n(s).close}:${s.length}`:null}`}function ug(n,t,s){return`${n}:${t}:${s?.length?`${s[0].time}-${_n(s).time}:${s.length}`:null}`}function dg(n,t,s,o,a){let d=n[0].time<_n(n).time?n:ag(n);t.zeroIndex=Math.max(0,d.length-s),t.series=sg(d,(c,u)=>({i:u-t.zeroIndex,...c})),t.seriesId=xl(o,a,t.series),t.timeSeriesId=ug(o,a,t.series),t.scaleId=`${o}:${a}`,t.timeframe=a}function Ci(n,t,s,o,a){let l=fg({}),[d,c]=cg({zeroIndex:void 0,series:null,seriesId:void 0,timeframe:void 0});return lg(()=>{if(n?.length){let u=l.current;u[s]=u[s]||{},u[s][o.id]=u[s][o.id]||{},dg(n,u[s][o.id],t,s,o.id),c({...u[s][o.id]})}},[xl(s,o.id,n),o.id,a]),d}import mg from"konva";import wl from"lodash/last";import hg from"lodash/sortBy";import pg from"lodash/sum";import{useMemo as gg}from"react";var{stringify:yg}=JSON;function Dt(n){return n.width=n.xEnd-n.xStart,n.height=n.yEnd-n.yStart,n}function xg(n,t){let{theme:s}=n;if(!(n.width>0))return null;let o=Dt({yStart:Array.isArray(s.padding)?s.padding[0]:s.padding,xEnd:n.width-(Array.isArray(s.padding)?s.padding[1]:s.padding),yEnd:n.height-(Array.isArray(s.padding)?s.padding[2]:s.padding),xStart:Array.isArray(s.padding)?s.padding[3]:s.padding}),l=Dt({xStart:o.xStart,xEnd:o.xEnd,yStart:o.yStart,yEnd:o.yStart+48}),d=0;if(t.series){let D=wl(t.series).close,$=String(D).length,I=new mg.Text({text:n.formatters.axes.y(Array($).fill("0").join("")),fontFamily:s.axes.fontFamily||s.fontFamily,fontSize:s.axes.fontSize}).getTextWidth();d=Math.ceil(I/5)*5}let c=s.axes.tickSize+s.axes.tickMargin+d+s.axes.tickMargin*2,u=s.axes.tickSize+s.axes.tickMargin+s.axes.fontSize,h=Dt({xStart:o.xStart,xEnd:o.xEnd-c,yStart:l.yEnd,yEnd:o.yEnd}),y=hg(n.indicators.windows.filter(D=>D.active),"order"),g=y.reduce((D,$)=>{let I=pg(y.filter(W=>!D.some(H=>H.indicator===W.indicator)).map(W=>W.height||W.defaultHeight));return[...D,{indicator:$.indicator,xStart:h.xStart,xEnd:h.xEnd,yStart:h.yEnd-u-I,yEnd:h.yEnd-u-I+($.height||$.defaultHeight)}]},[]).map(Dt),x=Dt({xStart:h.xStart,xEnd:h.xEnd,yStart:l.yEnd,yEnd:g.length?g[0].yStart:h.yEnd-u}),C=Dt({xStart:x.xStart,xEnd:x.xEnd,yStart:g.length?wl(g).yEnd:x.yEnd,yEnd:o.yEnd});h.yEnd=C.yStart;let k=Dt({xStart:x.xEnd,xEnd:o.xEnd,yStart:x.yStart,yEnd:x.yEnd});return{bodyInner:o,header:l,mainInner:h,mainChart:x,indicatorWindows:g,xAxis:C,yAxis:k}}function wg(n,t){return gg(()=>xg(n,t),[n.width,n.height,yg(n.indicators.windows),t.seriesId])}var vl=wg;var Sg=JSON.stringify;function Mg({fwdRef:n,data:t,config:s,loading:o,onLoadMore:a,onTimeframeChange:l,onSymbolClick:d,onDrawings:c,onFullscreen:u,onConfig:h}){let y=bg(),g=Cg(()=>vg("mousemove","pointerdown","pointerup","zoom","zoomX","zoomY","resetZoom","rerender","dragX","dragY","scale","candle","hoverDrawing","removeDrawing","removeDrawings","contextmenu"),[]),[x,C]=ki(s),k=Ci(t,x.initialCandlesWindow,x.symbol.code,x.timeframe,g),D=vl(x,k),$=hl(y);bi(()=>{typeof u=="function"&&u(x.fullscreen)},[u,x.fullscreen]),bi(()=>{typeof h=="function"&&h(x)},[Sg(x)]),bi(()=>{if(!document.getElementById("streamlined-container")){let W=document.createElement("div");W.id="streamlined-container",W.className="streamlined-chart-html",document.body.appendChild(W)}},[]);let I={stageRef:y,config:x,setConfig:C,data:k,frame:D,setCursor:$,dispatch:g};return D?me.createElement(me.Fragment,null,me.createElement(ml,{theme:x.theme}),me.createElement(gs,{ref:wi(n,y),width:x.width,height:x.height},me.createElement(to.Provider,{value:I},me.createElement(j,null,me.createElement(Te,{x:0,y:0,width:x.width,height:x.width,cornerRadius:x.theme.borderRadius,fill:x.theme.bgColor})),me.createElement(Ea,{onTimeframeChange:l,onSymbolClick:d}),me.createElement(dl,null),me.createElement(cl,null),me.createElement(hi,null),me.createElement(co,{onDrawings:c}),me.createElement(si,null),me.createElement(Ys,null),me.createElement(sl,null),me.createElement(nl,null),me.createElement(al,{loading:o}),me.createElement(Vs,{onLoadMore:a}),me.createElement(tl,{loading:o})))):null}var mM=kg(Mg,nn);export{mM as default};
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.30.1 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)
*/
//# sourceMappingURL=Chart-EBVCKQSQ.mjs.map